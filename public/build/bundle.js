var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function i(){return Object.create(null)}function s(e){e.forEach(r)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c;function l(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function u(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function h(e,t,n){e.$$.on_destroy.push(u(t,n))}function d(e,t,n,r){if(e){const i=f(e,t,n,r);return e[0](i)}}function f(e,t,r,i){return e[1]&&i?n(r.ctx.slice(),e[1](i(t))):r.ctx}function p(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}function m(e,t,n,r,i,s){if(i){const o=f(t,n,r,s);e.p(o,i)}}function g(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function v(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function y(e,t,n){return e.set(n),t}const w="undefined"!=typeof window;let b=w?()=>window.performance.now():()=>Date.now(),_=w?e=>requestAnimationFrame(e):e;const I=new Set;function T(e){I.forEach((t=>{t.c(e)||(I.delete(t),t.f())})),0!==I.size&&_(T)}function E(e){let t;return 0===I.size&&_(T),{promise:new Promise((n=>{I.add(t={c:e,f:n})})),abort(){I.delete(t)}}}function S(e,t){e.appendChild(t)}function k(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function C(e){const t=D("style");return function(e,t){S(e.head||e,t),t.sheet}(k(e),t),t.sheet}function x(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function N(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function D(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function P(){return R(" ")}function O(){return R("")}function $(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function L(e){return function(t){return t.preventDefault(),e.call(this,t)}}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function F(e,t){t=""+t,e.data!==t&&(e.data=t)}function V(e,t){e.value=null==t?"":t}function U(e,t,n,r){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function j(e,t){return new e(t)}const q=new Map;let B,z=0;function G(e,t,n,r,i,s,o,a=0){const c=16.666/r;let l="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*s(e);l+=100*e+`%{${o(r,1-r)}}\n`}const u=l+`100% {${o(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,d=k(e),{stylesheet:f,rules:p}=q.get(d)||function(e,t){const n={stylesheet:C(t),rules:{}};return q.set(e,n),n}(d,e);p[h]||(p[h]=!0,f.insertRule(`@keyframes ${h} ${u}`,f.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${r}ms linear ${i}ms 1 both`,z+=1,h}function K(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),z-=i,z||_((()=>{z||(q.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&A(t)})),q.clear())})))}function H(e){B=e}function W(){if(!B)throw new Error("Function called outside component initialization");return B}function Q(e){W().$$.on_mount.push(e)}function J(e,t){return W().$$.context.set(e,t),t}function Y(e){return W().$$.context.get(e)}const X=[],Z=[];let ee=[];const te=[],ne=Promise.resolve();let re=!1;function ie(e){ee.push(e)}const se=new Set;let oe,ae=0;function ce(){if(0!==ae)return;const e=B;do{try{for(;ae<X.length;){const e=X[ae];ae++,H(e),le(e.$$)}}catch(e){throw X.length=0,ae=0,e}for(H(null),X.length=0,ae=0;Z.length;)Z.pop()();for(let e=0;e<ee.length;e+=1){const t=ee[e];se.has(t)||(se.add(t),t())}ee.length=0}while(X.length);for(;te.length;)te.pop()();re=!1,se.clear(),H(e)}function le(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}function ue(){return oe||(oe=Promise.resolve(),oe.then((()=>{oe=null}))),oe}function he(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}(`${t?"intro":"outro"}${n}`))}const de=new Set;let fe;function pe(){fe={r:0,c:[],p:fe}}function me(){fe.r||s(fe.c),fe=fe.p}function ge(e,t){e&&e.i&&(de.delete(e),e.i(t))}function ve(e,t,n,r){if(e&&e.o){if(de.has(e))return;de.add(e),fe.c.push((()=>{de.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const ye={duration:0};function we(e,t){const n=t.token={};function r(e,r,i,s){if(t.token!==n)return;t.resolved=s;let o=t.ctx;void 0!==i&&(o=o.slice(),o[i]=s);const a=e&&(t.current=e)(o);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(pe(),ve(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),me())})):t.block.d(1),a.c(),ge(a,1),a.m(t.mount(),t.anchor),c=!0),t.block=a,t.blocks&&(t.blocks[r]=a),c&&ce()}if(!(i=e)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}else{const n=W();if(e.then((e=>{H(n),r(t.then,1,t.value,e),H(null)}),(e=>{if(H(n),r(t.catch,2,t.error,e),H(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}var i}function be(e){return"object"==typeof e&&null!==e?e:{}}function _e(e){e&&e.c()}function Ie(e,t,n,i){const{fragment:a,after_update:c}=e.$$;a&&a.m(t,n),i||ie((()=>{const t=e.$$.on_mount.map(r).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),c.forEach(ie)}function Te(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];ee.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),ee=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ee(e,t){-1===e.$$.dirty[0]&&(X.push(e),re||(re=!0,ne.then(ce)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Se(t,n,r,o,a,c,l,u=[-1]){const h=B;H(t);const d=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};l&&l(d.root);let f=!1;if(d.ctx=r?r(t,n.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&a(d.ctx[e],d.ctx[e]=i)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](i),f&&Ee(t,e)),n})):[],d.update(),f=!0,s(d.before_update),d.fragment=!!o&&o(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(A)}else d.fragment&&d.fragment.c();n.intro&&ge(t.$$.fragment),Ie(t,n.target,n.anchor,n.customElement),ce()}H(h)}class ke{$destroy(){Te(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ce={},xe={},Ae={},Ne=/^:(.+)/,De=e=>e.replace(/(^\/+|\/+$)/g,"").split("/"),Re=e=>e.replace(/(^\/+|\/+$)/g,""),Pe=(e,t)=>({route:e,score:e.default?0:De(e.path).reduce(((e,t)=>(e+=4,""===t?e+=1:Ne.test(t)?e+=2:"*"===t[0]?e-=5:e+=3,e)),0),index:t}),Oe=(e,t)=>{let n,r;const[i]=t.split("?"),s=De(i),o=""===s[0],a=(e=>e.map(Pe).sort(((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index)))(e);for(let e=0,i=a.length;e<i;e++){const i=a[e].route;let c=!1;if(i.default){r={route:i,params:{},uri:t};continue}const l=De(i.path),u={},h=Math.max(s.length,l.length);let d=0;for(;d<h;d++){const e=l[d],t=s[d];if(e&&"*"===e[0]){u["*"===e?"*":e.slice(1)]=s.slice(d).map(decodeURIComponent).join("/");break}if(void 0===t){c=!0;break}const n=Ne.exec(e);if(n&&!o){const e=decodeURIComponent(t);u[n[1]]=e}else if(e!==t){c=!0;break}}if(!c){n={route:i,params:u,uri:"/"+s.slice(0,d).join("/")};break}}return n||r||null},$e=(e,t)=>`${Re("/"===t?e:`${Re(e)}/${Re(t)}`)}/`,Le=()=>"undefined"!=typeof window&&"document"in window&&"location"in window,Me=e=>({params:4&e}),Fe=e=>({params:e[2]});function Ve(e){let t,n,r,i;const s=[je,Ue],o=[];function a(e,t){return e[0]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,i){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function Ue(e){let t;const n=e[8].default,r=d(n,e,e[7],Fe);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||132&i)&&m(r,n,e,e[7],t?p(n,e[7],i,Me):g(e[7]),Fe)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function je(e){let t,n,r,i={ctx:e,current:null,token:null,hasCatch:!1,pending:ze,then:Be,catch:qe,value:12,blocks:[,,,]};return we(n=e[0],i),{c(){t=O(),i.block.c()},m(e,n){x(e,t,n),i.block.m(e,i.anchor=n),i.mount=()=>t.parentNode,i.anchor=t,r=!0},p(t,r){e=t,i.ctx=e,1&r&&n!==(n=e[0])&&we(n,i)||function(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}(i,e,r)},i(e){r||(ge(i.block),r=!0)},o(e){for(let e=0;e<3;e+=1){ve(i.blocks[e])}r=!1},d(e){e&&A(t),i.block.d(e),i.token=null,i=null}}}function qe(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Be(e){let t,r,i;const s=[e[2],e[3]];var o=e[12]?.default||e[12];function a(e){let t={};for(let e=0;e<s.length;e+=1)t=n(t,s[e]);return{props:t}}return o&&(t=j(o,a())),{c(){t&&_e(t.$$.fragment),r=O()},m(e,n){t&&Ie(t,e,n),x(e,r,n),i=!0},p(e,n){const i=12&n?function(e,t){const n={},r={},i={$$scope:1};let s=e.length;for(;s--;){const o=e[s],a=t[s];if(a){for(const e in o)e in a||(r[e]=1);for(const e in a)i[e]||(n[e]=a[e],i[e]=1);e[s]=a}else for(const e in o)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}(s,[4&n&&be(e[2]),8&n&&be(e[3])]):{};if(1&n&&o!==(o=e[12]?.default||e[12])){if(t){pe();const e=t;ve(e.$$.fragment,1,0,(()=>{Te(e,1)})),me()}o?(t=j(o,a()),_e(t.$$.fragment),ge(t.$$.fragment,1),Ie(t,r.parentNode,r)):t=null}else o&&t.$set(i)},i(e){i||(t&&ge(t.$$.fragment,e),i=!0)},o(e){t&&ve(t.$$.fragment,e),i=!1},d(e){e&&A(r),t&&Te(t,e)}}}function ze(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Ge(e){let t,n,r=e[1]&&e[1].route===e[5]&&Ve(e);return{c(){r&&r.c(),t=O()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[1]&&e[1].route===e[5]?r?(r.p(e,n),2&n&&ge(r,1)):(r=Ve(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&A(t)}}}function Ke(e,t,r){let i,{$$slots:s={},$$scope:o}=t,{path:a=""}=t,{component:c=null}=t,l={},u={};const{registerRoute:d,unregisterRoute:f,activeRoute:p}=Y(xe);h(e,p,(e=>r(1,i=e)));const m={path:a,default:""===a};var g;return d(m),g=()=>{f(m)},W().$$.on_destroy.push(g),e.$$set=e=>{r(11,t=n(n({},t),v(e))),"path"in e&&r(6,a=e.path),"component"in e&&r(0,c=e.component),"$$scope"in e&&r(7,o=e.$$scope)},e.$$.update=()=>{if(i&&i.route===m){r(2,l=i.params);const{component:e,path:n,...s}=t;r(3,u=s),e&&(e.toString().startsWith("class ")?r(0,c=e):r(0,c=e())),Le()&&!i.preserveScroll&&window?.scrollTo(0,0)}},t=v(t),[c,i,l,u,p,m,a,o,s]}class He extends ke{constructor(e){super(),Se(this,e,Ke,Ge,a,{path:6,component:0})}}const We=[];function Qe(t,n=e){let r;const i=new Set;function s(e){if(a(t,e)&&(t=e,r)){const e=!We.length;for(const e of i)e[1](),We.push(e,t);if(e){for(let e=0;e<We.length;e+=2)We[e][0](We[e+1]);We.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,a=e){const c=[o,a];return i.add(c),1===i.size&&(r=n(s)||e),o(t),()=>{i.delete(c),0===i.size&&r&&(r(),r=null)}}}}function Je(t,n,r){const i=!Array.isArray(t),a=i?[t]:t,c=n.length<2;return function(e,t){return{subscribe:Qe(e,t).subscribe}}(r,(t=>{let r=!1;const l=[];let h=0,d=e;const f=()=>{if(h)return;d();const r=n(i?l[0]:l,t);c?t(r):d=o(r)?r:e},p=a.map(((e,t)=>u(e,(e=>{l[t]=e,h&=~(1<<t),r&&f()}),(()=>{h|=1<<t}))));return r=!0,f(),function(){s(p),d(),r=!1}}))}const Ye=e=>({...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}),Xe=(e=>{const t=[];let n=Ye(e);return{get location(){return n},listen(r){t.push(r);const i=()=>{n=Ye(e),r({location:n,action:"POP"})};return e.addEventListener("popstate",i),()=>{e.removeEventListener("popstate",i);const n=t.indexOf(r);t.splice(n,1)}},navigate(r,{state:i,replace:s=!1,preserveScroll:o=!1,blurActiveElement:a=!0}={}){i={...i,key:Date.now()+""};try{s?e.history.replaceState(i,"",r):e.history.pushState(i,"",r)}catch(t){e.location[s?"replace":"assign"](r)}n=Ye(e),t.forEach((e=>e({location:n,action:"PUSH",preserveScroll:o}))),a&&document.activeElement.blur()}}})(Le()?window:((e="/")=>{let t=0;const n=[{pathname:e,search:""}],r=[];return{get location(){return n[t]},addEventListener(e,t){},removeEventListener(e,t){},history:{get entries(){return n},get index(){return t},get state(){return r[t]},pushState(e,i,s){const[o,a=""]=s.split("?");t++,n.push({pathname:o,search:a}),r.push(e)},replaceState(e,i,s){const[o,a=""]=s.split("?");n[t]={pathname:o,search:a},r[t]=e}}}})()),{navigate:Ze}=Xe,et=e=>({route:4&e,location:2&e}),tt=e=>({route:e[2]&&e[2].uri,location:e[1]}),nt=e=>({route:4&e,location:2&e}),rt=e=>({route:e[2]&&e[2].uri,location:e[1]});function it(e){let t;const n=e[15].default,r=d(n,e,e[14],tt);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||16390&i)&&m(r,n,e,e[14],t?p(n,e[14],i,et):g(e[14]),tt)},i(e){t||(ge(r,e),t=!0)},o(e){ve(r,e),t=!1},d(e){r&&r.d(e)}}}function st(t){let n,r,i=t[1].pathname,s=ot(t);return{c(){s.c(),n=O()},m(e,t){s.m(e,t),x(e,n,t),r=!0},p(t,r){2&r&&a(i,i=t[1].pathname)?(pe(),ve(s,1,1,e),me(),s=ot(t),s.c(),ge(s,1),s.m(n.parentNode,n)):s.p(t,r)},i(e){r||(ge(s),r=!0)},o(e){ve(s),r=!1},d(e){e&&A(n),s.d(e)}}}function ot(n){let r,i,a,c;const l=n[15].default,u=d(l,n,n[14],rt);return{c(){r=D("div"),u&&u.c()},m(e,t){x(e,r,t),u&&u.m(r,null),c=!0},p(e,t){u&&u.p&&(!c||16390&t)&&m(u,l,e,e[14],c?p(l,e[14],t,nt):g(e[14]),rt)},i(s){c||(ge(u,s),ie((()=>{c&&(a&&a.end(1),i=function(n,r,i){const s={direction:"in"};let a,c,l=r(n,i,s),u=!1,h=0;function d(){a&&K(n,a)}function f(){const{delay:r=0,duration:i=300,easing:s=t,tick:o=e,css:f}=l||ye;f&&(a=G(n,0,1,i,r,s,f,h++)),o(0,1);const p=b()+r,m=p+i;c&&c.abort(),u=!0,ie((()=>he(n,!0,"start"))),c=E((e=>{if(u){if(e>=m)return o(1,0),he(n,!0,"end"),d(),u=!1;if(e>=p){const t=s((e-p)/i);o(t,1-t)}}return u}))}let p=!1;return{start(){p||(p=!0,K(n),o(l)?(l=l(s),ue().then(f)):f())},invalidate(){p=!1},end(){u&&(d(),u=!1)}}}(r,n[3],{}),i.start())})),c=!0)},o(l){ve(u,l),i&&i.invalidate(),a=function(n,r,i){const a={direction:"out"};let c,l=r(n,i,a),u=!0;const h=fe;function d(){const{delay:r=0,duration:i=300,easing:o=t,tick:a=e,css:d}=l||ye;d&&(c=G(n,1,0,i,r,o,d));const f=b()+r,p=f+i;ie((()=>he(n,!1,"start"))),E((e=>{if(u){if(e>=p)return a(0,1),he(n,!1,"end"),--h.r||s(h.c),!1;if(e>=f){const t=o((e-f)/i);a(1-t,t)}}return u}))}return h.r+=1,o(l)?ue().then((()=>{l=l(a),d()})):d(),{end(e){e&&l.tick&&l.tick(1,0),u&&(c&&K(n,c),u=!1)}}}(r,n[3],{}),c=!1},d(e){e&&A(r),u&&u.d(e),e&&a&&a.end()}}}function at(e){let t,n,r,i;const s=[st,it],o=[];function a(e,t){return e[0]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function ct(e,t,n){let r,i,s,o,{$$slots:a={},$$scope:c}=t,{basepath:l="/"}=t,{url:u=null}=t,{viewtransition:d=null}=t,{history:f=Xe}=t;J(Ae,f);const p=Y(Ce),m=Y(xe),g=Qe([]);h(e,g,(e=>n(12,i=e)));const v=Qe(null);h(e,v,(e=>n(2,o=e)));let y=!1;const w=p||Qe(u?{pathname:u}:f.location);h(e,w,(e=>n(1,r=e)));const b=m?m.routerBase:Qe({path:l,uri:l});h(e,b,(e=>n(13,s=e)));const _=Je([b,v],(([e,t])=>{if(!t)return e;const{path:n}=e,{route:r,uri:i}=t;return{path:r.default?n:r.path.replace(/\*.*$/,""),uri:i}}));let I=!1;return p||(Q((()=>f.listen((e=>{n(11,I=e.preserveScroll||!1),w.set(e.location)})))),J(Ce,w)),J(xe,{activeRoute:v,base:b,routerBase:_,registerRoute:e=>{const{path:t}=s;let{path:n}=e;if(e._path=n,e.path=$e(t,n),"undefined"==typeof window){if(y)return;const t=Oe([e],r.pathname);t&&(v.set(t),y=!0)}else g.update((t=>[...t,e]))},unregisterRoute:e=>{g.update((t=>t.filter((t=>t!==e))))}}),e.$$set=e=>{"basepath"in e&&n(8,l=e.basepath),"url"in e&&n(9,u=e.url),"viewtransition"in e&&n(0,d=e.viewtransition),"history"in e&&n(10,f=e.history),"$$scope"in e&&n(14,c=e.$$scope)},e.$$.update=()=>{if(8192&e.$$.dirty){const{path:e}=s;g.update((t=>t.map((t=>Object.assign(t,{path:$e(e,t._path)})))))}if(6146&e.$$.dirty){const e=Oe(i,r.pathname);v.set(e?{...e,preserveScroll:I}:e)}},[d,r,o,(e,t,n)=>{const r=d(n);return"function"==typeof r?.fn?r.fn(e,r):r},g,v,w,b,l,u,f,I,i,s,c,a]}class lt extends ke{constructor(e){super(),Se(this,e,ct,at,a,{basepath:8,url:9,viewtransition:0,history:10})}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const ut=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ut(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw new dt;const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ft=function(e){return function(e){const t=ut(e);return ht.encodeByteArray(t,!0)}(e).replace(/\./g,"")},pt=function(e){try{return ht.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=mt(e[n],t[n]));return e}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const gt=()=>
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,vt=()=>{try{return gt()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&pt(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},yt=e=>{var t,n;return null===(n=null===(t=vt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},wt=e=>{const t=yt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},bt=()=>{var e;return null===(e=vt())||void 0===e?void 0:e.config},_t=e=>{var t;return null===(t=vt())||void 0===t?void 0:t[`_${e}`]};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class It{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Tt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ft(JSON.stringify({alg:"none",type:"JWT"})),ft(JSON.stringify(s)),""].join(".")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Et(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function St(){var e;const t=null===(e=vt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function kt(){return"object"==typeof self&&self.self===self}function Ct(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function At(){const e=Et();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Nt(){return!St()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dt(){try{return"object"==typeof indexedDB}catch(e){return!1}}class Rt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Rt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pt.prototype.create)}}class Pt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Ot,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new Rt(r,o,n)}}const Ot=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Lt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Mt(n)&&Mt(s)){if(!Lt(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function Mt(e){return null!==e&&"object"==typeof e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ft(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Vt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Ut(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function jt(e,t){const n=new qt(e,t);return n.subscribe.bind(n)}class qt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Bt),void 0===r.error&&(r.error=Bt),void 0===r.complete&&(r.complete=Bt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Bt(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zt(e){return e&&e._delegate?e._delegate:e}class Gt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Kt="[DEFAULT]";
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ht{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new It;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e))try{this.getOrInitializeService({instanceIdentifier:Kt})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Kt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Kt){return this.instances.has(e)}getOptions(e=Kt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Kt?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=Kt){return this.component?this.component.multipleInstances?e:Kt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Wt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ht(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Qt=[];var Jt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Jt||(Jt={}));const Yt={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},Xt=Jt.INFO,Zt={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},en=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Zt[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class tn{constructor(e){this.name=e,this._logLevel=Xt,this._logHandler=en,this._userLogHandler=null,Qt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Yt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...e),this._logHandler(this,Jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...e),this._logHandler(this,Jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...e),this._logHandler(this,Jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...e),this._logHandler(this,Jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...e),this._logHandler(this,Jt.ERROR,...e)}}const nn=(e,t)=>t.some((t=>e instanceof t));let rn,sn;const on=new WeakMap,an=new WeakMap,cn=new WeakMap,ln=new WeakMap,un=new WeakMap;let hn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return an.get(e);if("objectStoreNames"===t)return e.objectStoreNames||cn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function dn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(sn||(sn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(mn(this),t),pn(on.get(this))}:function(...t){return pn(e.apply(mn(this),t))}:function(t,...n){const r=e.call(mn(this),t,...n);return cn.set(r,t.sort?t.sort():[t]),pn(r)}}function fn(e){return"function"==typeof e?dn(e):(e instanceof IDBTransaction&&function(e){if(an.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));an.set(e,t)}(e),nn(e,rn||(rn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,hn):e)}function pn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(pn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&on.set(t,e)})).catch((()=>{})),un.set(t,e),t}(e);if(ln.has(e))return ln.get(e);const t=fn(e);return t!==e&&(ln.set(e,t),un.set(t,e)),t}const mn=e=>un.get(e);const gn=["get","getKey","getAll","getAllKeys","count"],vn=["put","add","delete","clear"],yn=new Map;function wn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(yn.get(t))return yn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=vn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!gn.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return yn.set(t,s),s}hn=(e=>({...e,get:(t,n,r)=>wn(t,n)||e.get(t,n,r),has:(t,n)=>!!wn(t,n)||e.has(t,n)}))(hn);
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class bn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const _n="@firebase/app",In="0.10.5",Tn=new tn("@firebase/app"),En="@firebase/app-compat",Sn="@firebase/analytics-compat",kn="@firebase/analytics",Cn="@firebase/app-check-compat",xn="@firebase/app-check",An="@firebase/auth",Nn="@firebase/auth-compat",Dn="@firebase/database",Rn="@firebase/database-compat",Pn="@firebase/functions",On="@firebase/functions-compat",$n="@firebase/installations",Ln="@firebase/installations-compat",Mn="@firebase/messaging",Fn="@firebase/messaging-compat",Vn="@firebase/performance",Un="@firebase/performance-compat",jn="@firebase/remote-config",qn="@firebase/remote-config-compat",Bn="@firebase/storage",zn="@firebase/storage-compat",Gn="@firebase/firestore",Kn="@firebase/vertexai-preview",Hn="@firebase/firestore-compat",Wn="firebase",Qn="[DEFAULT]",Jn={[_n]:"fire-core",[En]:"fire-core-compat",[kn]:"fire-analytics",[Sn]:"fire-analytics-compat",[xn]:"fire-app-check",[Cn]:"fire-app-check-compat",[An]:"fire-auth",[Nn]:"fire-auth-compat",[Dn]:"fire-rtdb",[Rn]:"fire-rtdb-compat",[Pn]:"fire-fn",[On]:"fire-fn-compat",[$n]:"fire-iid",[Ln]:"fire-iid-compat",[Mn]:"fire-fcm",[Fn]:"fire-fcm-compat",[Vn]:"fire-perf",[Un]:"fire-perf-compat",[jn]:"fire-rc",[qn]:"fire-rc-compat",[Bn]:"fire-gcs",[zn]:"fire-gcs-compat",[Gn]:"fire-fst",[Hn]:"fire-fst-compat",[Kn]:"fire-vertex","fire-js":"fire-js",[Wn]:"fire-js-all"},Yn=new Map,Xn=new Map,Zn=new Map;function er(e,t){try{e.container.addComponent(t)}catch(n){Tn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function tr(e,t){e.container.addOrOverwriteComponent(t)}function nr(e){const t=e.name;if(Zn.has(t))return Tn.debug(`There were multiple attempts to register component ${t}.`),!1;Zn.set(t,e);for(const t of Yn.values())er(t,e);for(const t of Xn.values())er(t,e);return!0}function rr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ir(e){return void 0!==e.options}function sr(e){return void 0!==e.settings}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const or=new Pt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let ar=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Gt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}};
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class cr extends ar{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,fr(_n,In,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){dr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw or.create("server-app-deleted")}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const lr="10.12.2";function ur(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Qn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw or.create("bad-app-name",{appName:String(i)});if(n||(n=bt()),!n)throw or.create("no-options");const s=Yn.get(i);if(s){if(Lt(n,s.options)&&Lt(r,s.config))return s;throw or.create("duplicate-app",{appName:i})}const o=new Wt(i);for(const e of Zn.values())o.addComponent(e);const a=new ar(n,r,o);return Yn.set(i,a),a}function hr(e=Qn){const t=Yn.get(e);if(!t&&e===Qn&&bt())return ur();if(!t)throw or.create("no-app",{appName:e});return t}async function dr(e){let t=!1;const n=e.name;if(Yn.has(n))t=!0,Yn.delete(n);else if(Xn.has(n)){e.decRefCount()<=0&&(Xn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function fr(e,t,n){var r;let i=null!==(r=Jn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Tn.warn(e.join(" "))}nr(new Gt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function pr(e,t){if(null!==e&&"function"!=typeof e)throw or.create("invalid-log-argument");!function(e,t){for(const n of Qt){let r=null;t&&t.level&&(r=Yt[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Jt[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)}function mr(e){var t;t=e,Qt.forEach((e=>{e.setLogLevel(t)}))}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const gr="firebase-heartbeat-database",vr=1,yr="firebase-heartbeat-store";let wr=null;function br(){return wr||(wr=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=pn(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(pn(o.result),e.oldVersion,e.newVersion,pn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(gr,vr,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(yr)}catch(e){console.warn(e)}}}).catch((e=>{throw or.create("idb-open",{originalErrorMessage:e.message})}))),wr}async function _r(e,t){try{const n=(await br()).transaction(yr,"readwrite"),r=n.objectStore(yr);await r.put(t,Ir(e)),await n.done}catch(e){if(e instanceof Rt)Tn.warn(e.message);else{const t=or.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Tn.warn(t.message)}}}function Ir(e){return`${e.name}!${e.options.appId}`}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Tr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Sr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Er();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Er(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),kr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ft(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Er(){return(new Date).toISOString().substring(0,10)}class Sr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Dt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await br()).transaction(yr),n=await t.objectStore(yr).get(Ir(e));return await t.done,n}catch(e){if(e instanceof Rt)Tn.warn(e.message);else{const t=or.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Tn.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return _r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return _r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function kr(e){return ft(JSON.stringify({version:2,heartbeats:e})).length}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cr;Cr="",nr(new Gt("platform-logger",(e=>new bn(e)),"PRIVATE")),nr(new Gt("heartbeat",(e=>new Tr(e)),"PRIVATE")),fr(_n,In,Cr),fr(_n,In,"esm2017"),fr("fire-js","");var xr=Object.freeze({__proto__:null,FirebaseError:Rt,SDK_VERSION:lr,_DEFAULT_ENTRY_NAME:Qn,_addComponent:er,_addOrOverwriteComponent:tr,_apps:Yn,_clearComponents:function(){Zn.clear()},_components:Zn,_getProvider:rr,_isFirebaseApp:ir,_isFirebaseServerApp:sr,_registerComponent:nr,_removeServiceInstance:function(e,t,n=Qn){rr(e,t).clearInstance(n)},_serverApps:Xn,deleteApp:dr,getApp:hr,getApps:function(){return Array.from(Yn.values())},initializeApp:ur,initializeServerApp:function(e,t){if(kt())throw or.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=ir(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);if(void 0!==r.releaseOnDeref&&delete r.releaseOnDeref,void 0!==t.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw or.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=Xn.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new Wt(i);for(const e of Zn.values())a.addComponent(e);const c=new cr(n,t,i,a);return Xn.set(i,c),c},onLog:pr,registerVersion:fr,setLogLevel:mr});function Ar(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
fr("firebase","10.12.2","app"),"function"==typeof SuppressedError&&SuppressedError;const Nr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Dr="EMAIL_SIGNIN",Rr="PASSWORD_RESET",Pr="RECOVER_EMAIL",Or="REVERT_SECOND_FACTOR_ADDITION",$r="VERIFY_AND_CHANGE_EMAIL",Lr="VERIFY_EMAIL";function Mr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Fr=
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Vr=Mr,Ur=new Pt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jr=new tn("@firebase/auth");function qr(e,...t){jr.logLevel<=Jt.ERROR&&jr.error(`Auth (${lr}): ${e}`,...t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Br(e,...t){throw Wr(e,...t)}function zr(e,...t){return Wr(e,...t)}function Gr(e,t,n){const r=Object.assign(Object.assign({},Vr()),{[t]:n});return new Pt("auth","Firebase",r).create(t,{appName:e.name})}function Kr(e){return Gr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Br(e,"argument-error"),Gr(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wr(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Ur.create(e,...t)}function Qr(e,t,...n){if(!e)throw Wr(t,...n)}function Jr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw qr(t),new Error(t)}function Yr(e,t){e||Jr(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xr(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zr(){return"http:"===ei()||"https:"===ei()}function ei(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ti{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())||xt()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zr()||Ct()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ni(e,t){Yr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ri{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const ii={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},si=new ti(3e4,6e4);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function oi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ai(e,t,n,r,i={}){return ci(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ft(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),ri.fetch()(ui(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function ci(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ii),t);try{const t=new di(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw fi(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw fi(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw fi(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw fi(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Gr(e,a,o);Br(e,a)}}catch(t){if(t instanceof Rt)throw t;Br(e,"network-request-failed",{message:String(t)})}}async function li(e,t,n,r,i={}){const s=await ai(e,t,n,r,i);return"mfaPendingCredential"in s&&Br(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ui(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?ni(e.config,i):`${e.config.apiScheme}://${i}`}function hi(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class di{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(zr(this.auth,"network-request-failed"))),si.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function fi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zr(e,t,r);return i.customData._tokenResponse=n,i}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pi(e){return void 0!==e&&void 0!==e.getResponse}function mi(e){return void 0!==e&&void 0!==e.enterprise}class gi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hi(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function vi(e,t){return ai(e,"POST","/v1/accounts:lookup",t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function wi(e){return 1e3*Number(e)}function bi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return qr("JWT malformed, contained fewer than 3 sections"),null;try{const e=pt(n);return e?JSON.parse(e):(qr("Failed to decode base64 JWT payload"),null)}catch(e){return qr("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function _i(e){const t=bi(e);return Qr(t,"internal-error"),Qr(void 0!==t.exp,"internal-error"),Qr(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Ii(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Rt&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Ti{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ei{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yi(this.lastLoginAt),this.creationTime=yi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Si(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ii(e,vi(n,{idToken:r}));Qr(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ki(s.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ei(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function ki(e){return e.map((e=>{var{providerId:t}=e,n=Ar(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qr(e.idToken,"internal-error"),Qr(void 0!==e.idToken,"internal-error"),Qr(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):_i(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qr(0!==e.length,"internal-error");const t=_i(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Qr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ci(e,{},(async()=>{const n=Ft({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ui(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ri.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ci;return n&&(Qr("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Qr("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Qr("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ci,this.toJSON())}_performRefresh(){return Jr("not implemented")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xi(e,t){Qr("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Ai{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ar(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ti(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ei(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ii(this,this.stsTokenManager.getToken(this.auth,e));return Qr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=zt(e),r=await n.getIdToken(t),i=bi(r);Qr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:yi(wi(i.auth_time)),issuedAtTime:yi(wi(i.iat)),expirationTime:yi(wi(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=zt(e);await Si(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Qr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Si(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await Ii(this,
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function(e,t){return ai(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Qr(y&&I,e,"internal-error");const T=Ci.fromJSON(this.name,I);Qr("string"==typeof y,e,"internal-error"),xi(u,e.name),xi(h,e.name),Qr("boolean"==typeof w,e,"internal-error"),Qr("boolean"==typeof b,e,"internal-error"),xi(d,e.name),xi(f,e.name),xi(p,e.name),xi(m,e.name),xi(g,e.name),xi(v,e.name);const E=new Ai({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(E.providerData=_.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t,n=!1){const r=new Ci;r.updateFromServerResponse(t);const i=new Ai({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Si(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Qr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ki(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),o=new Ci;o.updateFromIdToken(n);const a=new Ai({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ei(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(a,c),a}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ni=new Map;function Di(e){Yr(e instanceof Function,"Expected a class definition");let t=Ni.get(e);return t?(Yr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ni.set(e,t),t)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ri{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ri.type="NONE";const Pi=Ri;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Oi(e,t,n){return`firebase:${e}:${t}:${n}`}class $i{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Oi(this.userKey,r.apiKey,i),this.fullPersistenceKey=Oi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new $i(Di(Pi),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Di(Pi);const s=Oi(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=Ai._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new $i(i,e,n)):new $i(i,e,n)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Li(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ui(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qi(t))return"Blackberry";if(Bi(t))return"Webos";if(Fi(t))return"Safari";if((t.includes("chrome/")||Vi(t))&&!t.includes("edge/"))return"Chrome";if(ji(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Mi(e=Et()){return/firefox\//i.test(e)}function Fi(e=Et()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Vi(e=Et()){return/crios\//i.test(e)}function Ui(e=Et()){return/iemobile/i.test(e)}function ji(e=Et()){return/android/i.test(e)}function qi(e=Et()){return/blackberry/i.test(e)}function Bi(e=Et()){return/webos/i.test(e)}function zi(e=Et()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Gi(e=Et()){return zi(e)||ji(e)||Bi(e)||qi(e)||/windows phone/i.test(e)||Ui(e)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ki(e,t=[]){let n;switch(e){case"Browser":n=Li(Et());break;case"Worker":n=`${Li(Et())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${lr}/${r}`}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Hi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Wi{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Qi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yi(this),this.idTokenSubscription=new Yi(this),this.beforeStateQueue=new Hi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ur,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Di(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await $i.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await vi(this,{idToken:e}),n=await Ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(sr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Si(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(Kr(this));const t=e?zt(e):null;return t&&Qr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return sr(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(Kr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Di(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return ai(e,"GET","/v2/passwordPolicy",oi(e,t))}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this),t=new Wi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ai(e,"POST","/v2/accounts:revokeToken",oi(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Di(e)||this._popupRedirectResolver;Qr(t,this,"argument-error"),this.redirectPersistenceManager=await $i.create(this,[Di(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ki(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){jr.logLevel<=Jt.WARN&&jr.warn(`Auth (${lr}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Ji(e){return zt(e)}class Yi{constructor(e){this.auth=e,this.observer=null,this.addObserver=jt((e=>this.observer=e))}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let Xi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zi(e){return Xi.loadJS(e)}function es(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ts{constructor(e){this.type="recaptcha-enterprise",this.auth=Ji(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return ai(e,"GET","/v2/recaptchaConfig",oi(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new gi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))}function r(t,n,r){const i=window.grecaptcha;mi(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{n(this.auth).then((n=>{if(!t&&mi(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=Xi.recaptchaEnterpriseScript;0!==t.length&&(t+=n),Zi(t).then((()=>{r(n,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function ns(e,t,n,r=!1){const i=new ts(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function rs(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ns(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ns(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function is(e,t,n){const r=Ji(e);Qr(r._canInitEmulator,r,"emulator-config-failed"),Qr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=ss(t),{host:o,port:a}=function(e){const t=ss(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:os(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:os(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */()}function ss(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function os(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class as{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,t){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function cs(e,t){return ai(e,"POST","/v1/accounts:resetPassword",oi(e,t))}async function ls(e,t){return ai(e,"POST","/v1/accounts:signUp",t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function us(e,t){return li(e,"POST","/v1/accounts:signInWithPassword",oi(e,t))}async function hs(e,t){return ai(e,"POST","/v1/accounts:sendOobCode",oi(e,t))}async function ds(e,t){return hs(e,t)}async function fs(e,t){return hs(e,t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ps extends as{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ps(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ps(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return rs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",us);case"emailLink":
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
return async function(e,t){return li(e,"POST","/v1/accounts:signInWithEmailLink",oi(e,t))}(e,{email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return rs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ls);case"emailLink":return async function(e,t){return li(e,"POST","/v1/accounts:signInWithEmailLink",oi(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function ms(e,t){return li(e,"POST","/v1/accounts:signInWithIdp",oi(e,t))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class gs extends as{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ar(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new gs(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ms(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ms(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ms(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ft(t)}return e}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const vs={USER_NOT_FOUND:"user-not-found"};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ys extends as{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ys({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ys({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return li(e,"POST","/v1/accounts:signInWithPhoneNumber",oi(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await li(e,"POST","/v1/accounts:signInWithPhoneNumber",oi(e,t));if(n.temporaryProof)throw fi(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return li(e,"POST","/v1/accounts:signInWithPhoneNumber",oi(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),vs)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ys({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ws{constructor(e){var t,n,r,i,s,o;const a=Vt(Ut(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Qr(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Vt(Ut(e)).link,n=t?Vt(Ut(t)).deep_link_id:null,r=Vt(Ut(e)).deep_link_id;return(r?Vt(Ut(r)).link:null)||r||n||t||e}(e);try{return new ws(t)}catch(e){return null}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class bs{constructor(){this.providerId=bs.PROVIDER_ID}static credential(e,t){return ps._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ws.parseLink(t);return Qr(n,"argument-error"),ps._fromEmailAndCode(e,n.code,n.tenantId)}}bs.PROVIDER_ID="password",bs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",bs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class _s{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Is extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ts extends Is{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return Qr("providerId"in t&&"signInMethod"in t,"argument-error"),gs._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Qr(e.idToken||e.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ts.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ts.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new Ts(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Es extends Is{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch(e){return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com",Es.PROVIDER_ID="facebook.com";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Ss extends Is{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gs._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ss.credential(t,n)}catch(e){return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com",Ss.PROVIDER_ID="google.com";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ks extends Is{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch(e){return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com",ks.PROVIDER_ID="github.com";class Cs extends as{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return ms(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ms(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ms(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Cs(n,i):null}static _create(e,t){return new Cs(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class xs extends _s{constructor(e){Qr(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return xs.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return xs.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Cs.fromJSON(e);return Qr(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Cs._create(n,t)}catch(e){return null}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class As extends Is{constructor(){super("twitter.com")}static credential(e,t){return gs._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return As.credential(t,n)}catch(e){return null}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function Ns(e,t){return li(e,"POST","/v1/accounts:signUp",oi(e,t))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */As.TWITTER_SIGN_IN_METHOD="twitter.com",As.PROVIDER_ID="twitter.com";class Ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Ai._fromIdTokenResponse(e,n,r),s=Rs(n);return new Ds({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Rs(n);return new Ds({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Rs(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Ps extends Rt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ps.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ps(e,t,n,r)}}function Os(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ps._fromErrorAndOperation(e,n,t,r);throw n}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $s(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Ls(e,t){const n=zt(e);await Fs(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return ai(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=$s(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ms(e,t,n=!1){const r=await Ii(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ds._forOperation(e,"link",r)}async function Fs(e,t,n){await Si(t);const r=!1===e?"provider-already-linked":"no-such-provider";Qr($s(t.providerData).has(n)===e,t.auth,r)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Vs(e,t,n=!1){const{auth:r}=e;if(sr(r.app))return Promise.reject(Kr(r));const i="reauthenticate";try{const s=await Ii(e,Os(r,i,t,e),n);Qr(s.idToken,r,"internal-error");const o=bi(s.idToken);Qr(o,r,"internal-error");const{sub:a}=o;return Qr(e.uid===a,r,"user-mismatch"),Ds._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Br(r,"user-mismatch"),e}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Us(e,t,n=!1){if(sr(e.app))return Promise.reject(Kr(e));const r="signIn",i=await Os(e,r,t),s=await Ds._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function js(e,t){return Us(Ji(e),t)}async function qs(e,t){const n=zt(e);return await Fs(!1,n,t.providerId),Ms(n,t)}async function Bs(e,t){return Vs(zt(e),t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function zs(e,t){if(sr(e.app))return Promise.reject(Kr(e));const n=Ji(e),r=await async function(e,t){return li(e,"POST","/v1/accounts:signInWithCustomToken",oi(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Ds._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Gs{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ks._fromServerResponse(e,t):"totpInfo"in t?Hs._fromServerResponse(e,t):Br(e,"internal-error")}}class Ks extends Gs{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ks(t)}}class Hs extends Gs{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Hs(t)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ws(e,t,n){var r;Qr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Qr(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Qr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Qr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Qs(e){const t=Ji(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Js(e,t,n){const r=Ji(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ws(r,i,n),await rs(r,i,"getOobCode",ds)}async function Ys(e,t){await async function(e,t){return ai(e,"POST","/v1/accounts:update",oi(e,t))}(zt(e),{oobCode:t})}async function Xs(e,t){const n=zt(e),r=await cs(n,{oobCode:t}),i=r.requestType;switch(Qr(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Qr(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Qr(r.mfaInfo,n,"internal-error");default:Qr(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Gs._fromServerResponse(Ji(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Zs(e,t,n){if(sr(e.app))return Promise.reject(Kr(e));const r=Ji(e),i=rs(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ns),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Qs(e),t})),o=await Ds._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function eo(e,t,n){return sr(e.app)?Promise.reject(Kr(e)):js(zt(e),bs.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Qs(e),t}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function to(e,t){const n={identifier:t,continueUri:Zr()?Xr():"http://localhost"},{signinMethods:r}=
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */await async function(e,t){return ai(e,"POST","/v1/accounts:createAuthUri",oi(e,t))}(zt(e),n);return r||[]}async function no(e,t){const n=zt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ws(n.auth,r,t);const{email:i}=await async function(e,t){return hs(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ro(e,t,n){const r=zt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Ws(r.auth,i,n);const{email:s}=await async function(e,t){return hs(e,t)}(r.auth,i);s!==e.email&&await e.reload()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function io(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=zt(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await Ii(r,async function(e,t){return ai(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function so(e,t){return oo(zt(e),null,t)}async function oo(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Ii(e,async function(e,t){return ai(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ao{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class co extends ao{constructor(e,t,n,r){super(e,t,n),this.username=r}}class lo extends ao{constructor(e,t){super(e,"facebook.com",t)}}class uo extends co{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class ho extends ao{constructor(e,t){super(e,"google.com",t)}}class fo extends co{constructor(e,t,n){super(e,"twitter.com",t,n)}}function po(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=bi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new ao(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new lo(s,i);case"github.com":return new uo(s,i);case"google.com":return new ho(s,i);case"twitter.com":return new fo(s,i,e.screenName||null);case"custom":case"anonymous":return new ao(s,null);default:return new ao(s,r,i)}}(n)}function mo(e,t,n,r){return zt(e).onAuthStateChanged(t,n,r)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class go{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new go("enroll",e,t)}static _fromMfaPendingCredential(e){return new go("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return go._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return go._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class vo{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ji(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Gs._fromServerResponse(n,e)));Qr(r.mfaPendingCredential,n,"internal-error");const s=go._fromMfaPendingCredential(r.mfaPendingCredential);return new vo(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Ds._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Qr(t.user,n,"internal-error"),Ds._forOperation(t.user,t.operationType,o);default:Br(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class yo{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Gs._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new yo(e)}async getSession(){return go._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Ii(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Ii(this.user,function(e,t){return ai(e,"POST","/v2/accounts/mfaEnrollment:withdraw",oi(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}const wo=new WeakMap;const bo="__sak";
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class _o{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bo,"1"),this.storage.removeItem(bo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Io extends _o{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Et();return Fi(e)||zi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Gi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);At()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Io.type="LOCAL";const To=Io;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Eo extends _o{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Eo.type="SESSION";const So=Eo;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ko{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ko(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Co(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ko.receivers=[];class xo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Co("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ao(){return window}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function No(){return void 0!==Ao().WorkerGlobalScope&&"function"==typeof Ao().importScripts}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Do="firebaseLocalStorageDb",Ro="firebaseLocalStorage",Po="fbase_key";class Oo{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function $o(e,t){return e.transaction([Ro],t?"readwrite":"readonly").objectStore(Ro)}function Lo(){const e=indexedDB.open(Do,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ro,{keyPath:Po})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ro)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Do);return new Oo(e).toPromise()}(),t(await Lo()))}))}))}async function Mo(e,t,n){const r=$o(e,!0).put({[Po]:t,value:n});return new Oo(r).toPromise()}function Fo(e,t){const n=$o(e,!0).delete(t);return new Oo(n).toPromise()}class Vo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Lo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return No()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ko._getInstance(No()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new xo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lo();return await Mo(e,bo,"1"),await Fo(e,bo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Mo(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=$o(e,!1).get(t),r=await new Oo(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Fo(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=$o(e,!1).getAll();return new Oo(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Vo.type="LOCAL";const Uo=Vo;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const jo=1e12;class qo{constructor(e){this.auth=e,this.counter=jo,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Bo(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||jo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||jo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||jo;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Bo{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;Qr(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zo=es("rcb"),Go=new ti(3e4,6e4);class Ko{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ao().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return Qr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&pi(Ao().grecaptcha)?Promise.resolve(Ao().grecaptcha):new Promise(((n,r)=>{const i=Ao().setTimeout((()=>{r(zr(e,"network-request-failed"))}),Go.get());Ao()[zo]=()=>{Ao().clearTimeout(i),delete Ao()[zo];const s=Ao().grecaptcha;if(!s||!pi(s))return void r(zr(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Zi(`${Xi.recaptchaV2Script}?${Ft({onload:zo,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(zr(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ao().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ho{async load(e){return new qo(e)}clearedOneInstance(){}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Wo="recaptcha",Qo={theme:"light",type:"image"};let Jo=class{constructor(e,t,n=Object.assign({},Qo)){this.parameters=n,this.type=Wo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ji(e),this.isInvisible="invisible"===this.parameters.size,Qr("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof t?document.getElementById(t):t;Qr(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ho:new Ko,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Qr(!this.parameters.sitekey,this.auth,"argument-error"),Qr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Qr("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=Ao()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){Qr(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Qr(Zr()&&!No(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await ai(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Qr(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Qr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};class Yo{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ys._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Xo(e,t,n){var r;const i=await n.verify();try{let s;if(Qr("string"==typeof i,e,"argument-error"),Qr(n.type===Wo,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Qr("enroll"===t.type,e,"internal-error");const n=
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */await function(e,t){return ai(e,"POST","/v2/accounts/mfaEnrollment:start",oi(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Qr("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Qr(n,e,"missing-multi-factor-info");const o=await function(e,t){return ai(e,"POST","/v2/accounts/mfaSignIn:start",oi(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ai(e,"POST","/v1/accounts:sendVerificationCode",oi(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let Zo=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ji(t)}verifyPhoneNumber(e,t){return Xo(this.auth,e,zt(t))}static credential(e,t){return ys._fromVerification(e,t)}static credentialFromResult(t){const n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ys._fromTokenResponse(t,n):null}};
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ea(e,t){return t?Di(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Zo.PROVIDER_ID="phone",Zo.PHONE_SIGN_IN_METHOD="phone";class ta extends as{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ms(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ms(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ms(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function na(e){return Us(e.auth,new ta(e),e.bypassAuthState)}function ra(e){const{auth:t,user:n}=e;return Qr(n,t,"internal-error"),Vs(n,new ta(e),e.bypassAuthState)}async function ia(e){const{auth:t,user:n}=e;return Qr(n,t,"internal-error"),Ms(n,new ta(e),e.bypassAuthState)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class sa{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return na;case"linkViaPopup":case"linkViaRedirect":return ia;case"reauthViaPopup":case"reauthViaRedirect":return ra;default:Br(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const oa=new ti(2e3,1e4);class aa extends sa{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,aa.currentPopupAction&&aa.currentPopupAction.cancel(),aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qr(e,this.auth,"internal-error"),e}async onExecution(){Yr(1===this.filter.length,"Popup operations only handle one event");const e=Co();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(zr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,oa.get())};e()}}aa.currentPopupAction=null;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const ca="pendingRedirect",la=new Map;class ua extends sa{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=la.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=pa(t),r=fa(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}la.set(this.auth._key(),e)}return this.bypassAuthState||la.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ha(e,t){return fa(e)._set(pa(t),"true")}function da(e,t){la.set(e._key(),t)}function fa(e){return Di(e._redirectPersistence)}function pa(e){return Oi(ca,e.config.apiKey,e.name)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ma(e,t,n){return async function(e,t,n){if(sr(e.app))return Promise.reject(Kr(e));const r=Ji(e);Hr(e,t,_s),await r._initializationPromise;const i=ea(r,n);return await ha(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function ga(e,t,n){return async function(e,t,n){const r=zt(e);if(Hr(r.auth,t,_s),sr(r.auth.app))return Promise.reject(Kr(r.auth));await r.auth._initializationPromise;const i=ea(r.auth,n);await ha(i,r.auth);const s=await wa(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function va(e,t,n){return async function(e,t,n){const r=zt(e);Hr(r.auth,t,_s),await r.auth._initializationPromise;const i=ea(r.auth,n);await Fs(!1,r,t.providerId),await ha(i,r.auth);const s=await wa(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function ya(e,t,n=!1){if(sr(e.app))return Promise.reject(Kr(e));const r=Ji(e),i=ea(r,t),s=new ua(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function wa(e){const t=Co(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ba{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ia(e);default:return!1}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ia(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(zr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_a(e))}saveEventToCache(e){this.cachedEventUids.add(_a(e)),this.lastProcessedEventTime=Date.now()}}function _a(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ia({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function Ta(e,t={}){return ai(e,"GET","/v1/projects",t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ea=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sa=/^https?/;function ka(e){const t=Xr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Sa.test(n))return!1;if(Ea.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ca=new ti(3e4,6e4);function xa(){const e=Ao().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function Aa(e){return new Promise(((t,n)=>{var r,i,s;function o(){xa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xa(),n(zr(e,"network-request-failed"))},timeout:Ca.get()})}if(null===(i=null===(r=Ao().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ao().gapi)||void 0===s?void 0:s.load)){const t=es("iframefcb");return Ao()[t]=()=>{gapi.load?o():n(zr(e,"network-request-failed"))},Zi(`${Xi.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Na=null,e}))}let Na=null;
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Da=new ti(5e3,15e3),Ra="__/auth/iframe",Pa="emulator/auth/iframe",Oa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$a=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function La(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ni(t,Pa):`https://${e.config.authDomain}/${Ra}`,r={apiKey:t.apiKey,appName:e.name,v:lr},i=$a.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ft(r).slice(1)}`}async function Ma(e){const t=await function(e){return Na=Na||Aa(e),Na}(e),n=Ao().gapi;return Qr(n,e,"internal-error"),t.open({where:document.body,url:La(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oa,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=zr(e,"network-request-failed"),s=Ao().setTimeout((()=>{r(i)}),Da.get());function o(){Ao().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Fa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Va{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ua(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Fa),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Et().toLowerCase();n&&(a=Vi(l)?"_blank":n),Mi(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Et()){var t;return zi(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t||"",a),new Va(null);const h=window.open(t||"",a,u);Qr(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Va(h)}const ja="__/auth/handler",qa="emulator/auth/handler",Ba=encodeURIComponent("fac");async function za(e,t,n,r,i,s){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:lr,eventId:i};if(t instanceof _s){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Is){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const c=await e._getAppCheckToken(),l=c?`#${Ba}=${encodeURIComponent(c)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${ja}`;return ni(e,qa)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)}?${Ft(a).slice(1)}${l}`}const Ga="webStorageSupport";const Ka=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=So,this._completeRedirectFn=ya,this._overrideRedirectResult=da}async _openPopup(e,t,n,r){var i;Yr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ua(e,await za(e,t,n,Xr(),r),Co())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ao().location.href=e}(await za(e,t,n,Xr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Yr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ma(e),n=new ba(e);return t.register("authEvent",(t=>{Qr(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ga,{type:Ga},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Ga];void 0!==i&&t(!!i),Br(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ta(e);for(const e of t)try{if(ka(e))return}catch(e){}Br(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gi()||Fi()||zi()}};class Ha{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Jr("unexpected MultiFactorSessionType")}}}class Wa extends Ha{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Wa(e)}_finalizeEnroll(e,t,n){return function(e,t){return ai(e,"POST","/v2/accounts/mfaEnrollment:finalize",oi(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return ai(e,"POST","/v2/accounts/mfaSignIn:finalize",oi(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Qa{constructor(){}static assertion(e){return Wa._fromCredential(e)}}Qa.FACTOR_ID="phone";var Ja="@firebase/auth",Ya="1.7.4";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Xa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Za=_t("authIdTokenMaxAge")||300;let ec=null;var tc;!function(e){Xi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=zr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),tc="Browser",nr(new Gt("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Qr(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:tc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ki(tc)},c=new Qi(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Di);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),nr(new Gt("auth-internal",(e=>(e=>new Xa(e))(Ji(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),fr(Ja,Ya,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(tc)),fr(Ja,Ya,"esm2017");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let nc=class{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nc.UNAUTHENTICATED=new nc(null),nc.GOOGLE_CREDENTIALS=new nc("google-credentials-uid"),nc.FIRST_PARTY=new nc("first-party-uid"),nc.MOCK_USER=new nc("mock-user");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let rc="10.12.1";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const ic=new tn("@firebase/firestore");function sc(e,...t){if(ic.logLevel<=Jt.DEBUG){const n=t.map(cc);ic.debug(`Firestore (${rc}): ${e}`,...n)}}function oc(e,...t){if(ic.logLevel<=Jt.ERROR){const n=t.map(cc);ic.error(`Firestore (${rc}): ${e}`,...n)}}function ac(e,...t){if(ic.logLevel<=Jt.WARN){const n=t.map(cc);ic.warn(`Firestore (${rc}): ${e}`,...n)}}function cc(e){if("string"==typeof e)return e;try{
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function lc(e="Unexpected state"){const t=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+e;throw oc(t),new Error(t)}function uc(e,t){e||lc()}function hc(e,t){return e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const dc="unknown",fc="invalid-argument",pc="unauthenticated",mc="failed-precondition",gc="unimplemented";let vc=class extends Rt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},yc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nc.UNAUTHENTICATED)))}shutdown(){}},bc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class _c{constructor(e){this.auth=null,e.onInit((e=>{this.auth=e}))}getToken(){return this.auth?this.auth.getToken().then((e=>e?(uc("string"==typeof e.accessToken),new yc(e.accessToken,new nc(this.auth.getUid()))):null)):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}}let Ic=class{constructor(e,t,n){this.t=e,this.i=t,this.o=n,this.type="FirstParty",this.user=nc.FIRST_PARTY,this.u=new Map}l(){return this.o?this.o():null}get headers(){this.u.set("X-Goog-AuthUser",this.t);const e=this.l();return e&&this.u.set("Authorization",e),this.i&&this.u.set("X-Goog-Iam-Authorization-Token",this.i),this.u}},Tc=class{constructor(e,t,n){this.t=e,this.i=t,this.o=n}getToken(){return Promise.resolve(new Ic(this.t,this.i,this.o))}start(e,t){e.enqueueRetryable((()=>t(nc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Ec=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}};class Sc{constructor(e){this.h=e,this.appCheck=null,e.onInit((e=>{this.appCheck=e}))}getToken(){return this.appCheck?this.appCheck.getToken().then((e=>e?(uc("string"==typeof e.token),new Ec(e.token)):null)):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let kc=class{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}},Cc=class e{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},xc=class e{constructor(e,t,n){void 0===t?t=0:t>e.length&&lc(),void 0===n?n=e.length-t:n>e.length-t&&lc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return 0===e.comparator(this,t)}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ac=class e extends xc{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const e of t){if(e.indexOf("//")>=0)throw new vc(fc,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split("/").filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}};const Nc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Dc=class e extends xc{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return Nc.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new e(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new vc(fc,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new vc(fc,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new vc(fc,"Path has invalid escape sequence: "+t);r+=e,i+=2}else"`"===e?(o=!o,i++):"."!==e||o?(r+=e,i++):(s(),i++)}if(s(),o)throw new vc(fc,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},Rc=class e{constructor(e){this.path=e}static fromPath(t){return new e(Ac.fromString(t))}static fromName(t){return new e(Ac.fromString(t).popFirst(5))}static empty(){return new e(Ac.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ac.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ac.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new Ac(t.slice()))}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Pc(e,t,n){if(!n)throw new vc(fc,`Function ${e}() cannot be called with an empty ${t}.`)}function Oc(e){if(!Rc.isDocumentKey(e))throw new vc(fc,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $c(e){if(Rc.isDocumentKey(e))throw new vc(fc,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Lc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":lc()}function Mc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vc(fc,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lc(e);throw new vc(fc,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}let Vc=null;function Uc(e){return 0===e&&1/e==-1/0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const jc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qc,Bc;function zc(e){if(void 0===e)return oc("RPC_ERROR","HTTP error has no status"),dc;switch(e){case 200:return"ok";case 400:return mc;case 401:return pc;case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 416:return"out-of-range";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return dc;case 501:return gc;case 503:return"unavailable";case 504:return"deadline-exceeded";default:return e>=200&&e<300?"ok":e>=400&&e<500?mc:e>=500&&e<600?"internal":dc}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(Bc=qc||(qc={}))[Bc.OK=0]="OK",Bc[Bc.CANCELLED=1]="CANCELLED",Bc[Bc.UNKNOWN=2]="UNKNOWN",Bc[Bc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bc[Bc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bc[Bc.NOT_FOUND=5]="NOT_FOUND",Bc[Bc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bc[Bc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bc[Bc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bc[Bc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bc[Bc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bc[Bc.ABORTED=10]="ABORTED",Bc[Bc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bc[Bc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bc[Bc.INTERNAL=13]="INTERNAL",Bc[Bc.UNAVAILABLE=14]="UNAVAILABLE",Bc[Bc.DATA_LOSS=15]="DATA_LOSS";class Gc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.m=t+"://"+e.host,this.A=`projects/${n}/databases/${r}`,this.T="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get R(){return!1}P(e,t,n,r,i){const s=(null===Vc?Vc=268435456+Math.round(2147483648*Math.random()):Vc++,"0x"+Vc.toString(16)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */),o=this.I(e,t.toUriEncodedString());sc("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.A,"x-goog-request-params":this.T};return this.V(a,r,i),this.p(e,o,a,n).then((t=>(sc("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw ac("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}g(e,t,n,r,i,s){return this.P(e,t,n,r,i)}V(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+rc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}I(e,t){const n=jc[e];return`${this.m}/v1/${t}:${n}`}terminate(){}}{constructor(e,t){super(e),this.F=t}v(e,t){throw new Error("Not supported by FetchConnection")}async p(e,t,n,r){var i;const s=JSON.stringify(r);let o;try{o=await this.F(t,{method:"POST",headers:n,body:s})}catch(e){const t=e;throw new vc(zc(t.status),"Request failed with error: "+t.statusText)}if(!o.ok){let e=await o.json();Array.isArray(e)&&(e=e[0]);const t=null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message;throw new vc(zc(o.status),`Request failed with error: ${null!=t?t:o.statusText}`)}return o.json()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let Hc=class{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Kc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}};function Wc(e,t){return e<t?-1:e>t?1:0}function Qc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let Xc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}},Zc=class e{constructor(e){this.binaryString=e}static fromBase64String(t){const n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Xc("Invalid base64 string: "+e):e}}(t);return new e(n)}static fromUint8Array(t){const n=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Zc.EMPTY_BYTE_STRING=new Zc("");const el=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tl(e){if(uc(!!e),"string"==typeof e){let t=0;const n=el.exec(e);if(uc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:nl(e.seconds),nanos:nl(e.nanos)}}function nl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rl(e){return"string"==typeof e?Zc.fromBase64String(e):Zc.fromUint8Array(e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let il=class e{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vc(fc,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vc(fc,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new vc(fc,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vc(fc,"Timestamp seconds out of range: "+e)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wc(this.nanoseconds,e.nanoseconds):Wc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function sl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ol(e){const t=e.mapValue.fields.__previous_value__;return sl(t)?ol(t):t}function al(e){const t=tl(e.mapValue.fields.__local_write_time__.timestampValue);return new il(t.seconds,t.nanos)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const cl={fields:{__type__:{stringValue:"__max__"}}};function ll(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sl(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)?9007199254740991:10:lc()}function ul(e,t){if(e===t)return!0;const n=ll(e);if(n!==ll(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return al(e).isEqual(al(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=tl(e.timestampValue),r=tl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return rl(e.bytesValue).isEqual(rl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return nl(e.geoPointValue.latitude)===nl(t.geoPointValue.latitude)&&nl(e.geoPointValue.longitude)===nl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return nl(e.integerValue)===nl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=nl(e.doubleValue),r=nl(t.doubleValue);return n===r?Uc(n)===Uc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Qc(e.arrayValue.values||[],t.arrayValue.values||[],ul);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Jc(n)!==Jc(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!ul(n[e],r[e])))return!1;return!0}(e,t);default:return lc()}}function hl(e,t){return void 0!==(e.values||[]).find((e=>ul(e,t)))}function dl(e,t){if(e===t)return 0;const n=ll(e),r=ll(t);if(n!==r)return Wc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=nl(e.integerValue||e.doubleValue),r=nl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fl(e.timestampValue,t.timestampValue);case 4:return fl(al(e),al(t));case 5:return Wc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=rl(e),r=rl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=Wc(n[e],r[e]);if(0!==t)return t}return Wc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wc(nl(e.latitude),nl(t.latitude));return 0!==n?n:Wc(nl(e.longitude),nl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=dl(n[e],r[e]);if(t)return t}return Wc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===cl&&t===cl)return 0;if(e===cl)return 1;if(t===cl)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=Wc(r[e],s[e]);if(0!==t)return t;const o=dl(n[r[e]],i[s[e]]);if(0!==o)return o}return Wc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw lc()}}function fl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wc(e,t);const n=tl(e),r=tl(t),i=Wc(n.seconds,r.seconds);return 0!==i?i:Wc(n.nanos,r.nanos)}function pl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ml(e){return!!e&&"arrayValue"in e}function gl(e){return!!e&&"nullValue"in e}function vl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yl(e){return!!e&&"mapValue"in e}function wl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=wl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=wl(e.arrayValue.values[n]);return t}return Object.assign({},e)}let bl=class{constructor(e,t){this.position=e,this.inclusive=t}},_l=class{},Il=class e extends _l{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(t,n,r):new El(t,n,r):"array-contains"===n?new xl(t,r):"in"===n?new Al(t,r):"not-in"===n?new Nl(t,r):"array-contains-any"===n?new Dl(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Sl(e,n):new kl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(dl(t,this.value)):null!==t&&ll(this.value)===ll(t)&&this.matchesComparison(dl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Tl=class e extends _l{constructor(e,t){super(),this.filters=e,this.op=t,this.D=null}static create(t,n){return new e(t,n)}matches(e){return function(e){return"and"===e.op}(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.D||(this.D=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.D}getFilters(){return Object.assign([],this.filters)}},El=class extends Il{constructor(e,t,n){super(e,t,n),this.key=Rc.fromName(n.referenceValue)}matches(e){const t=Rc.comparator(e.key,this.key);return this.matchesComparison(t)}},Sl=class extends Il{constructor(e,t){super(e,"in",t),this.keys=Cl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},kl=class extends Il{constructor(e,t){super(e,"not-in",t),this.keys=Cl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Rc.fromName(e.referenceValue)))}let xl=class extends Il{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ml(t)&&hl(t.arrayValue,this.value)}},Al=class extends Il{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hl(this.value.arrayValue,t)}},Nl=class extends Il{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hl(this.value.arrayValue,t)}},Dl=class extends Il{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ml(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>hl(this.value.arrayValue,e)))}},Rl=class{constructor(e,t="asc"){this.field=e,this.dir=t}},Pl=class e{constructor(e){this.timestamp=e}static fromTimestamp(t){return new e(t)}static min(){return new e(new il(0,0))}static max(){return new e(new il(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}},Ol=class e{constructor(e,t){this.comparator=e,this.root=t||Ll.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ll.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ll.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}},$l=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ll=class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=s?s:e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lc();if(this.right.isRed())throw lc();const e=this.left.check();if(e!==this.right.check())throw lc();return e+(this.isRed()?0:1)}};Ll.EMPTY=null,Ll.RED=!0,Ll.BLACK=!1,Ll.EMPTY=new class{constructor(){this.size=0}get key(){throw lc()}get value(){throw lc()}get color(){throw lc()}get left(){throw lc()}get right(){throw lc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ll(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let Ml=class e{constructor(e){this.comparator=e,this.data=new Ol(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fl(this.data.getIterator())}getIteratorFrom(e){return new Fl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const e=n.getNext().key,t=r.getNext().key;if(0!==this.comparator(e,t))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(t){const n=new e(this.comparator);return n.data=t,n}},Fl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},Vl=class e{constructor(e){this.fields=e,e.sort(Dc.comparator)}static empty(){return new e([])}unionWith(t){let n=new Ml(Dc.comparator);for(const e of this.fields)n=n.add(e);for(const e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},Ul=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(t)}setAll(e){let t=Dc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=wl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());yl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ul(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];yl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Yc(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new e(wl(this.value))}},jl=class e{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new e(t,0,Pl.min(),Pl.min(),Pl.min(),Ul.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,Pl.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,Pl.min(),Pl.min(),Ul.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,Pl.min(),Pl.min(),Ul.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ul.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ul.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},ql=class{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.C=null}};function Bl(e,t=null,n=[],r=[],i=null,s=null,o=null){return new ql(e,t,n,r,i,s,o)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let zl=class{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.S=null,this.N=null,this.O=null,this.startAt,this.endAt}};function Gl(e){const t=hc(e);return t.N||(t.N=function(e,t){if("F"===e.limitType)return Bl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Rl(e.field,t)}));const n=e.endAt?new bl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new bl(e.startAt.position,e.startAt.inclusive):null;return Bl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,function(e){const t=hc(e);if(null===t.S){t.S=[];const e=new Set;for(const n of t.explicitOrderBy)t.S.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ml(Dc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.S.push(new Rl(r,n))})),e.has(Dc.keyField().canonicalString())||t.S.push(new Rl(Dc.keyField(),n))}return t.S}(e))),t.N}function Kl(e,t){const n=e.filters.concat([t]);return new zl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let Hl=class{constructor(){this._=void 0}},Wl=class extends Hl{},Ql=class extends Hl{constructor(e){super(),this.elements=e}},Jl=class extends Hl{constructor(e){super(),this.elements=e}},Yl=class extends Hl{constructor(e,t){super(),this.serializer=e,this.q=t}},Xl=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}},Zl=class{},eu=class extends Zl{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},tu=class extends Zl{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}},nu=class extends Zl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ru=class extends Zl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const iu={asc:"ASCENDING",desc:"DESCENDING"},su={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ou={and:"AND",or:"OR"};let au=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function cu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function uu(e,t){return cu(e,t.toTimestamp())}function hu(e){return uc(!!e),Pl.fromTimestamp(function(e){const t=tl(e);return new il(t.seconds,t.nanos)}(e))}function du(e,t){return fu(e,t).canonicalString()}function fu(e,t){const n=function(e){return new Ac(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function pu(e,t){return du(e.databaseId,t.path)}function mu(e,t){const n=function(e){const t=Ac.fromString(e);return uc(Eu(t)),t}(t);if(n.get(1)!==e.databaseId.projectId)throw new vc(fc,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vc(fc,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rc(function(e){return uc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}(n))}function gu(e,t,n){return{name:pu(e,t),fields:n.value.mapValue.fields}}function vu(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=function(e,t){return du(e.databaseId,t)}(e,i);const s=function(e){if(0!==e.length)return Iu(Tl.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:_u(e.field),direction:yu(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=function(e,t){return e.useProto3Json||function(e){return null==e}(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{B:n,parent:i}}function yu(e){return iu[e]}function wu(e){return su[e]}function bu(e){return ou[e]}function _u(e){return{fieldPath:e.canonicalString()}}function Iu(e){return e instanceof Il?function(e){if("=="===e.op){if(vl(e.value))return{unaryFilter:{field:_u(e.field),op:"IS_NAN"}};if(gl(e.value))return{unaryFilter:{field:_u(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vl(e.value))return{unaryFilter:{field:_u(e.field),op:"IS_NOT_NAN"}};if(gl(e.value))return{unaryFilter:{field:_u(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_u(e.field),op:wu(e.op),value:e.value}}}(e):e instanceof Tl?function(e){const t=e.getFilters().map((e=>Iu(e)));return 1===t.length?t[0]:{compositeFilter:{op:bu(e.op),filters:t}}}(e):lc()}function Tu(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Eu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Su(e){return new au(e,!0)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let ku=class extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.Y=!1}Z(){if(this.Y)throw new vc(mc,"The client has already been terminated.")}P(e,t,n,r){return this.Z(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.P(e,fu(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===pc&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vc(dc,e.toString())}))}g(e,t,n,r,i){return this.Z(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.g(e,fu(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===pc&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vc(dc,e.toString())}))}terminate(){this.Y=!0,this.connection.terminate()}};async function Cu(e,t){const n=hc(e),r={writes:t.map((e=>function(e,t){let n;if(t instanceof eu)n={update:gu(e,t.key,t.value)};else if(t instanceof nu)n={delete:pu(e,t.key)};else if(t instanceof tu)n={update:gu(e,t.key,t.data),updateMask:Tu(t.fieldMask)};else{if(!(t instanceof ru))return lc();n={verify:pu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Wl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ql)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Jl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yl)return{fieldPath:t.field.canonicalString(),increment:n.q};throw lc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:uu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:lc()}(e,t.precondition)),n}(n.serializer,e)))};await n.P("Commit",n.serializer.databaseId,Ac.emptyPath(),r)}async function xu(e,t){const n=hc(e),r={documents:t.map((e=>pu(n.serializer,e)))},i=await n.g("BatchGetDocuments",n.serializer.databaseId,Ac.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){uc(!!t.found),t.found.name,t.found.updateTime;const n=mu(e,t.found.name),r=hu(t.found.updateTime),i=t.found.createTime?hu(t.found.createTime):Pl.min(),s=new Ul({mapValue:{fields:t.found.fields}});return jl.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){uc(!!t.missing),uc(!!t.readTime);const n=mu(e,t.missing),r=hu(t.readTime);return jl.newNoDocument(n,r)}(e,t):lc()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());uc(!!t),o.push(t)})),o}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Au=new Map;function Nu(e){if(e._terminated)throw new vc(mc,"The client has already been terminated.");if(!Au.has(e)){sc("ComponentProvider","Initializing Datastore");const t=function(e){return new Gc(e,fetch.bind(null))}(function(e,t,n,r){return new kc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Fc(r.experimentalLongPollingOptions),r.useFetchStreams)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e._databaseId,e.app.options.appId||"",e._persistenceKey,e._freezeSettings())),n=Su(e._databaseId),r=function(e,t,n,r){return new ku(e,t,n,r)}(e._authCredentials,e._appCheckCredentials,t,n);Au.set(e,r)}return Au.get(e)}let Du=class{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new vc(fc,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vc(fc,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}!function(e,t,n,r){if(!0===t&&!0===r)throw new vc(fc,`${e} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new vc(fc,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new vc(fc,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new vc(fc,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ru=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Du({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vc(mc,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vc(mc,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Du(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wc;switch(e.type){case"firstParty":return new Tc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new vc(fc,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Au.get(e);t&&(sc("ComponentProvider","Removing Datastore"),Au.delete(e),t.terminate())}(this),Promise.resolve()}};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let Pu=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},Ou=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $u(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},$u=class e extends Pu{constructor(e,t,n){super(e,t,function(e){return new zl(e)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ou(this.firestore,null,new Rc(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function Lu(e,t,...n){if(e=zt(e),Pc("collection","path",t),e instanceof Ru){const r=Ac.fromString(t,...n);return $c(r),new $u(e,null,r)}{if(!(e instanceof Ou||e instanceof $u))throw new vc(fc,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ac.fromString(t,...n));return $c(r),new $u(e.firestore,null,r)}}function Mu(e,t,...n){if(e=zt(e),1===arguments.length&&(t=Hc.newId()),Pc("doc","path",t),e instanceof Ru){const r=Ac.fromString(t,...n);return Oc(r),new Ou(e,null,new Rc(r))}{if(!(e instanceof Ou||e instanceof $u))throw new vc(fc,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ac.fromString(t,...n));return Oc(r),new Ou(e.firestore,e instanceof $u?e.converter:null,new Rc(r))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let Fu=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(Zc.fromBase64String(t))}catch(t){throw new vc(fc,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new e(Zc.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}},Vu=class{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new vc(fc,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},Uu=class{constructor(e){this._methodName=e}},ju=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vc(fc,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vc(fc,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wc(this._lat,e._lat)||Wc(this._long,e._long)}};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const qu=/^__.*__$/;let Bu=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new tu(e,this.data,this.fieldMask,t,this.fieldTransforms):new eu(e,this.data,t,this.fieldTransforms)}},zu=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new tu(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Gu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lc()}}let Ku=class e{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.tt(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get et(){return this.settings.et}rt(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}nt(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.rt({path:n,it:!1});return r.st(e),r}ot(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.rt({path:n,it:!1});return r.tt(),r}ut(e){return this.rt({path:void 0,it:!0})}_t(e){return rh(e,this.settings.methodName,this.settings.ct||!1,this.path,this.settings.lt)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}tt(){if(this.path)for(let e=0;e<this.path.length;e++)this.st(this.path.get(e))}st(e){if(0===e.length)throw this._t("Document fields must not be empty");if(Gu(this.et)&&qu.test(e))throw this._t('Document fields cannot begin and end with "__"')}},Hu=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Su(e)}ht(e,t,n,r=!1){return new Ku({et:e,methodName:t,lt:n,path:Dc.emptyPath(),it:!1,ct:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wu(e){const t=e._freezeSettings(),n=Su(e._databaseId);return new Hu(e._databaseId,!!t.ignoreUndefinedProperties,n)}let Qu=class e extends Uu{_toFieldTransform(e){if(2!==e.et)throw 1===e.et?e._t(`${this._methodName}() can only appear at the top level of your update data`):e._t(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}};function Ju(e,t){if(Xu(e=zt(e)))return Zu("Unsupported field value:",t,e),Yu(e,t);if(e instanceof Uu)return function(e,t){if(!Gu(t.et))throw t._t(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._t(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.it&&4!==t.et)throw t._t("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ju(i,t.ut(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=zt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return function(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Uc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?function(e){return{integerValue:""+e}}(t):function(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(t)?"-0":t}}(e,t)}(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=il.fromDate(e);return{timestampValue:cu(t.serializer,n)}}if(e instanceof il){const n=new il(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cu(t.serializer,n)}}if(e instanceof ju)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fu)return{bytesValue:lu(t.serializer,e._byteString)};if(e instanceof Ou){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._t(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:du(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._t(`Unsupported field value: ${Lc(e)}`)}(e,t)}function Yu(e,t){const n={};return function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yc(e,((e,r)=>{const i=Ju(r,t.nt(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Xu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof il||e instanceof ju||e instanceof Fu||e instanceof Ou||e instanceof Uu)}function Zu(e,t,n){if(!Xu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Lc(n);throw"an object"===r?t._t(e+" a custom object"):t._t(e+" "+r)}}function eh(e,t,n){if((t=zt(t))instanceof Vu)return t._internalPath;if("string"==typeof t)return nh(e,t);throw rh("Field path arguments must be of type string or ",e,!1,void 0,n)}const th=new RegExp("[~\\*/\\[\\]]");function nh(e,t,n){if(t.search(th)>=0)throw rh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Vu(...t.split("."))._internalPath}catch(r){throw rh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function rh(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new vc(fc,a+e+c)}function ih(e,t){return e.some((e=>e.isEqual(t)))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let sh=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ou(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new oh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ch("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}},oh=class extends sh{data(){return super.data()}},ah=class{constructor(e,t){this._docs=t,this.query=e}get docs(){return[...this._docs]}get size(){return this.docs.length}get empty(){return 0===this.docs.length}forEach(e,t){this._docs.forEach(e,t)}};function ch(e,t){return"string"==typeof t?nh(e,t):t instanceof Vu?t._internalPath:t._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let lh=class{},uh=class extends lh{};function hh(e,t,...n){let r=[];t instanceof lh&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof ph)).length,n=e.filter((e=>e instanceof dh)).length;if(t>1||t>0&&n>0)throw new vc(fc,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(r);for(const t of r)e=t._apply(e);return e}let dh=class e extends uh{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(t,n,r){return new e(t,n,r)}_apply(e){const t=this._parse(e);return vh(e._query,t),new Pu(e.firestore,e.converter,Kl(e._query,t))}_parse(e){const t=Wu(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new vc(fc,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){gh(o,s);const t=[];for(const n of o)t.push(mh(r,e,n));a={arrayValue:{values:t}}}else a=mh(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||gh(o,s),a=function(e,t,n,r=!1){return Ju(n,e.ht(r?4:3,t))}(n,t,o,"in"===s||"not-in"===s);return Il.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}};function fh(e,t,n){const r=t,i=ch("where",e);return dh._create(i,r,n)}let ph=class e extends lh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Tl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)vh(n,e),n=Kl(n,e)}(e._query,t),new Pu(e.firestore,e.converter,Kl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}};function mh(e,t,n){if("string"==typeof(n=zt(n))){if(""===n)throw new vc(fc,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!function(e){return null!==e.collectionGroup}(t)&&-1!==n.indexOf("/"))throw new vc(fc,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ac.fromString(n));if(!Rc.isDocumentKey(r))throw new vc(fc,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pl(e,new Rc(r))}if(n instanceof Ou)return pl(e,n._key);throw new vc(fc,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lc(n)}.`)}function gh(e,t){if(!Array.isArray(e)||0===e.length)throw new vc(fc,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vh(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new vc(fc,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new vc(fc,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let yh=class extends class{convertValue(e,t="none"){switch(ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Yc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new ju(nl(e.latitude),nl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ol(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=tl(e);return new il(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ac.fromString(e);uc(Eu(n));const r=new Cc(n.get(1),n.get(3)),i=new Rc(n.popFirst(5));return r.isEqual(t)||oc(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ou(this.firestore,null,t)}};function wh(e){!function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new vc(gc,"limitToLast() queries require specifying at least one orderBy() clause")}((e=Mc(e,Pu))._query);const t=Nu(e.firestore),n=new yh(e.firestore);return async function(e,t){const n=hc(e),{B:r,parent:i}=vu(n.serializer,Gl(t));return(await n.g("RunQuery",n.serializer.databaseId,i,{structuredQuery:r.structuredQuery})).filter((e=>!!e.document)).map((e=>function(e,t,n){const r=mu(e,t.name),i=hu(t.updateTime),s=t.createTime?hu(t.createTime):Pl.min(),o=new Ul({mapValue:{fields:t.fields}}),a=jl.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}(n.serializer,e.document,void 0)))}(t,e._query).then((t=>{const r=t.map((t=>new oh(e.firestore,n,t.key,t,e.converter)));return"L"===e._query.limitType&&r.reverse(),new ah(e,r)}))}function bh(e,t,n,...r){const i=Wu((e=Mc(e,Ou)).firestore);let s;return s="string"==typeof(t=zt(t))||t instanceof Vu?function(e,t,n,r,i,s){const o=e.ht(1,t,n),a=[eh(t,r,n)],c=[i];if(s.length%2!=0)throw new vc(fc,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(eh(t,s[e])),c.push(s[e+1]);const l=[],u=Ul.empty();for(let e=a.length-1;e>=0;--e)if(!ih(l,a[e])){const t=a[e];let n=c[e];n=zt(n);const r=o.ot(t);if(n instanceof Qu)l.push(t);else{const e=Ju(n,r);null!=e&&(l.push(t),u.set(t,e))}}const h=new Vl(l);return new zu(u,h,o.fieldTransforms)}(i,"updateDoc",e._key,t,n,r):function(e,t,n,r){const i=e.ht(1,t,n);Zu("Data must be an object, but it was:",i,r);const s=[],o=Ul.empty();Yc(r,((e,r)=>{const a=nh(t,e,n);r=zt(r);const c=i.ot(a);if(r instanceof Qu)s.push(a);else{const e=Ju(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Vl(s);return new zu(o,a,i.fieldTransforms)}(i,"updateDoc",e._key,t),Cu(Nu(e.firestore),[s.toMutation(e._key,Xl.exists(!0))])}function _h(e,t){const n=Mu(e=Mc(e,$u)),r=function(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}(e.converter,t),i=function(e,t,n,r,i,s={}){const o=e.ht(s.merge||s.mergeFields?2:0,t,n,i);Zu("Data must be an object, but it was:",o,r);const a=Yu(r,o);let c,l;if(s.merge)c=new Vl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=eh(t,r,n);if(!o.contains(i))throw new vc(fc,`Field '${i}' is specified in your field mask but missing from your input data.`);ih(e,i)||e.push(i)}c=new Vl(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Bu(new Ul(a),c,l)}(Wu(e.firestore),"addDoc",n._key,r,null!==n.converter,{});return Cu(Nu(e.firestore),[i.toMutation(n._key,Xl.exists(!1))]).then((()=>n))}rc=`${lr}_lite`,nr(new Gt("firestore/lite",((e,{instanceIdentifier:t,options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Ru(new _c(e.getProvider("auth-internal")),new Sc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new vc(fc,'"projectId" not provided in firebase.initializeApp.');return new Cc(e.options.projectId,t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(r,t),r);return n&&i._setSettings(n),i}),"PUBLIC").setMultipleInstances(!0)),fr("firestore-lite","4.6.3",""),fr("firestore-lite","4.6.3","esm2017");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Ih="firebasestorage.googleapis.com",Th="storageBucket";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Eh extends Rt{constructor(e,t,n=0){super(Ch(e),`Firebase Storage: ${t} (${Ch(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Eh.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ch(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Sh,kh;function Ch(e){return"storage/"+e}function xh(){return new Eh(Sh.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ah(e){return new Eh(Sh.INVALID_ARGUMENT,e)}function Nh(){return new Eh(Sh.APP_DELETED,"The Firebase app was deleted.")}function Dh(e,t){return new Eh(Sh.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Rh(e){throw new Eh(Sh.INTERNAL_ERROR,"Internal error: "+e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Sh||(Sh={}));class Ph{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ph.makeFromUrl(e,t)}catch(t){return new Ph(e,"")}if(""===n.path)return n;throw r=e,new Eh(Sh.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Ih?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const r=a[t],i=r.regex.exec(e);if(i){const e=i[r.indices.bucket];let t=i[r.indices.path];t||(t=""),n=new Ph(e,t),r.postModify(n);break}}if(null==n)throw function(e){return new Eh(Sh.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Oh{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $h(e){return"string"==typeof e||e instanceof String}function Lh(e){return Mh()&&e instanceof Blob}function Mh(){return"undefined"!=typeof Blob}function Fh(e,t,n,r){if(r<t)throw Ah(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Ah(`Invalid value for '${e}'. Expected ${n} or less.`)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vh(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Uh(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(kh||(kh={}));
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class jh{constructor(e,t,n,r,i,s,o,a,c,l,u,h=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new qh(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===kh.NO_ERROR,i=n.getStatus();if(!t||
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===kh.ABORT;return void e(!1,new qh(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new qh(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){return void 0!==e}(e)?n():n(e)}catch(e){r(e)}else if(null!==i){const e=xh();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Nh():new Eh(Sh.CANCELED,"User canceled the upload/download."))}else{r(new Eh(Sh.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new qh(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(l)return void d();if(e)return d(),void u.call(null,e,...t);if(c()||o)return d(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class qh{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Bh(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function zh(...e){const t=Bh();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(Mh())return new Blob(e);throw new Eh(Sh.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Gh(e){if("undefined"==typeof atob)throw t="base-64",new Eh(Sh.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Kh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hh{constructor(e,t){this.data=e,this.contentType=t||null}}function Wh(e,t){switch(e){case Kh.RAW:return new Hh(Qh(t));case Kh.BASE64:case Kh.BASE64URL:return new Hh(Jh(e,t));case Kh.DATA_URL:return new Hh(function(e){const t=new Yh(e);return t.base64?Jh(Kh.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(e){throw Dh(Kh.DATA_URL,"Malformed data URL.")}return Qh(t)}(t.rest)}(t),new Yh(t).contentType)}throw xh()}function Qh(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Jh(e,t){switch(e){case Kh.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Dh(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Kh.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Dh(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Gh(t)}catch(t){if(t.message.includes("polyfill"))throw t;throw Dh(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return r}class Yh{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Dh(Kh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Xh{constructor(e,t){let n=0,r="";Lh(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Lh(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Xh(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Xh(n,!0)}}static getBlob(...e){if(Mh()){const t=e.map((e=>e instanceof Xh?e.data_:e));return new Xh(zh.apply(null,t))}{const t=e.map((e=>$h(e)?Wh(Kh.RAW,e).data:e.data_));let n=0;t.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return t.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Xh(r,!0)}}uploadData(){return this.data_}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zh(e){let t;try{t=JSON.parse(e)}catch(e){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ed(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function td(e,t){return t}class nd{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||td}}let rd=null;function id(){if(rd)return rd;const e=[];e.push(new nd("bucket")),e.push(new nd("generation")),e.push(new nd("metageneration")),e.push(new nd("name","fullPath",!0));const t=new nd("name");t.xform=function(e,t){return function(e){return!$h(e)||e.length<2?e:ed(e)}(t)},e.push(t);const n=new nd("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new nd("timeCreated")),e.push(new nd("updated")),e.push(new nd("md5Hash",null,!0)),e.push(new nd("cacheControl",null,!0)),e.push(new nd("contentDisposition",null,!0)),e.push(new nd("contentEncoding",null,!0)),e.push(new nd("contentLanguage",null,!0)),e.push(new nd("contentType",null,!0)),e.push(new nd("metadata","customMetadata",!0)),rd=e,rd}function sd(e,t,n){const r={type:"file"},i=n.length;for(let e=0;e<i;e++){const i=n[e];r[i.local]=i.xform(r,t[i.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Ph(n,r);return t._makeStorageReference(i)}})}(r,e),r}function od(e,t,n){const r=Zh(t);if(null===r)return null;return sd(e,r,n)}class ad{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cd(e){if(!e)throw xh()}function ld(e,t){return function(n,r){const i=od(e,r,t);return cd(null!==i),function(e,t,n,r){const i=Zh(t);if(null===i)return null;if(!$h(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return Vh("/b/"+o(i)+"/o/"+o(s),n,r)+Uh({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function ud(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Eh(Sh.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Eh(Sh.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Eh(Sh.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Eh(Sh.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function hd(e){const t=ud(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Eh(Sh.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function dd(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=function(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}(t,r,i),l=function(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}(c,n),u="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",h="\r\n--"+a+"--",d=Xh.getBlob(u,r,h);if(null===d)throw new Eh(Sh.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");const f={name:c.fullPath},p=Vh(s,e.host,e._protocol),m=e.maxUploadRetryTime,g=new ad(p,"POST",function(e,t){return function(n,r){const i=od(e,r,t);return cd(null!==i),i}}(e,n),m);return g.urlParams=f,g.headers=o,g.body=d.uploadData(),g.errorHandler=ud(t),g}class fd{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=kh.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=kh.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=kh.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Rh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const e in r)r.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,r[e].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rh("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Rh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class pd extends fd{initXhr(){this.xhr_.responseType="text"}}function md(){return new pd}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class gd{constructor(e,t){this._service=e,this._location=t instanceof Ph?t:Ph.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new gd(e,t)}get root(){const e=new Ph(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ed(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Ph(this._location.bucket,e);return new gd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Eh(Sh.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function vd(e,t,n=Kh.RAW,r){e._throwIfRoot("uploadString");const i=Wh(n,t),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),function(e,t,n){e._throwIfRoot("uploadBytes");const r=dd(e.storage,e._location,id(),new Xh(t,!0),n);return e.storage.makeRequestWithTokens(r,md).then((t=>({metadata:t,ref:e})))}(e,i.data,s)}function yd(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Vh(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new ad(r,"GET",ld(e,n),i);return s.errorHandler=hd(t),s}(e.storage,e._location,id());return e.storage.makeRequestWithTokens(t,md).then((e=>{if(null===e)throw new Eh(Sh.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function wd(e,t){if(e instanceof Id){const n=e;if(null==n._bucket)throw new Eh(Sh.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Th+"' property when initializing the app?");const r=new gd(n,n._bucket);return null!=t?wd(r,t):r}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Ph(e._location.bucket,n);return new gd(e.storage,r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e,t):e}function bd(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Id)return new gd(e,t);throw Ah("To use ref(service, url), the first argument must be a Storage instance.")}return wd(e,t)}function _d(e,t){const n=null==t?void 0:t[Th];return null==n?null:Ph.makeFromBucketSpec(n,e)}class Id{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Ih,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ph.makeFromBucketSpec(r,this._host):_d(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Ph.makeFromBucketSpec(this._url,e):this._bucket=_d(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gd(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new Oh(Nh());{const s=function(e,t,n,r,i,s,o=!0){const a=Uh(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new jh(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Td="@firebase/storage",Ed="0.12.5",Sd="storage";function kd(e){return yd(e=zt(e))}function Cd(e,t){return bd(e=zt(e),t)}function xd(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Id(n,r,i,t,lr)}nr(new Gt(Sd,xd,"PUBLIC").setMultipleInstances(!0)),fr(Td,Ed,""),fr(Td,Ed,"esm2017");
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Ad{constructor(e,t){this._delegate=e,this.firebase=t,er(e,new Gt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),dr(this._delegate))))}_getService(e,t=Qn){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Qn){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){er(this._delegate,e)}_addOrOverwriteComponent(e){tr(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Nd=new Pt("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Dd=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function e(){const t=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){const t={},n={__esModule:!0,initializeApp:function(r,i={}){const s=ur(r,i);if($t(t,s.name))return t[s.name];const o=new e(s,n);return t[s.name]=o,o},app:r,registerVersion:fr,setLogLevel:mr,onLog:pr,apps:null,SDK_VERSION:lr,INTERNAL:{registerComponent:function(t){const i=t.name,s=i.replace("-compat","");if(nr(t)&&"PUBLIC"===t.type){const o=(e=r())=>{if("function"!=typeof e[s])throw Nd.create("invalid-app-argument",{appName:i});return e[s]()};void 0!==t.serviceProps&&mt(o,t.serviceProps),n[s]=o,e.prototype[s]=function(...e){return this._getService.bind(this,i).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){if("serverAuth"===t)return null;return t},modularAPIs:xr}};function r(e){if(!$t(t,e=e||Qn))throw Nd.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),r.App=e,n}(Ad);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){mt(t,e)},createSubscribe:jt,ErrorFactory:Pt,deepExtend:mt}),t}(),Rd=new tn("@firebase/app-compat");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if(kt()&&void 0!==self.firebase){Rd.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Rd.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pd=Dd;
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Od(){return window}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){fr("@firebase/app-compat","0.2.35",e)}();async function $d(e,t,n){var r;const{BuildInfo:i}=Od();Yr(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Yr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return zi()?o.ibi=i.packageName:ji()?o.apn=i.packageName:Br(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,za(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Ld(e){const{cordova:t}=Od();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=Et()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Md=20;class Fd extends ba{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Vd(e){const t=await qd()._get(Bd(e));return t&&await qd()._remove(Bd(e)),t}function Ud(e,t){var n,r;const i=function(e){const t=zd(e),n=t.link?decodeURIComponent(t.link):void 0,r=zd(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return zd(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=zd(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?zr(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function jd(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Md;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function qd(){return Di(To)}function Bd(e){return Oi("authEvent",e.config.apiKey,e.name)}function zd(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Vt(n.join("?"))}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Gd=class{constructor(){this._redirectPersistence=So,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ya,this._overrideRedirectResult=da}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Fd(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Br(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=Od();Qr("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Qr(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Qr("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qr("function"==typeof(null===(c=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qr("function"==typeof(null===(u=null===(l=null==h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),la.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:jd(),postBody:null,tenantId:e.tenantId,error:zr(e,"no-auth-event")}}(e,n,r);await function(e,t){return qd()._set(Bd(e),t)}(e,s);const o=await $d(e,s,t);return async function(e,t,n){const{cordova:r}=Od();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(zr(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),ji()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Ld(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Od(),n={};zi()?n.iosBundleId=t.packageName:ji()?n.androidPackageName=t.packageName:Br(e,"operation-not-supported-in-this-environment"),await Ta(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Od(),s=setTimeout((async()=>{await Vd(e),t.onEvent(Kd())}),500),o=async n=>{clearTimeout(s);const r=await Vd(e);let i=null;r&&(null==n?void 0:n.url)&&(i=Ud(r,n.url)),t.onEvent(i||Kd())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,c=`${i.packageName.toLowerCase()}://`;Od().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}};function Kd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:zr("no-auth-event")}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hd(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Wd(e=Et()){return!("file:"!==Hd()&&"ionic:"!==Hd()&&"capacitor:"!==Hd()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qd(e=Et()){return At()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=Et()){return/Edge\/\d+/.test(e)}(e)}function Jd(){try{const e=self.localStorage,t=Co();if(e)return e.setItem(t,"1"),e.removeItem(t),!Qd()||Dt()}catch(e){return Yd()&&Dt()}return!1}function Yd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xd(){return("http:"===Hd()||"https:"===Hd()||Ct()||Wd())&&!(xt()||St())&&Jd()&&!Yd()}function Zd(){return Wd()&&"undefined"!=typeof document}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const ef={LOCAL:"local",NONE:"none",SESSION:"session"},tf=Qr,nf="persistence";async function rf(e){await e._initializationPromise;const t=sf(),n=Oi(nf,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function sf(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const of=Qr;class af{constructor(){this.browserResolver=Di(Ka),this.cordovaResolver=Di(Gd),this.underlyingResolver=null,this._redirectPersistence=So,this._completeRedirectFn=ya,this._overrideRedirectResult=da}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Zd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return of(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Zd()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cf(e){return e.unwrap()}function lf(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==t?void 0:t.code)){t.resolver=new ff(e,function(e,t){var n;const r=zt(e),i=t;return Qr(t.customData.operationType,r,"argument-error"),Qr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),vo._fromError(r,i)}(e,t))}else if(r){const e=uf(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function uf(e){const{_tokenResponse:t}=e instanceof Rt?e.customData:e;if(!t)return null;if(!(e instanceof Rt)&&"temporaryProof"in t&&"phoneNumber"in t)return Zo.credentialFromResult(e);const n=t.providerId;if(!n||n===Nr.PASSWORD)return null;let r;switch(n){case Nr.GOOGLE:r=Ss;break;case Nr.FACEBOOK:r=Es;break;case Nr.GITHUB:r=ks;break;case Nr.TWITTER:r=As;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Cs._create(n,o):gs._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Ts(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Rt?r.credentialFromError(e):r.credentialFromResult(e)}function hf(e,t){return t.catch((t=>{throw t instanceof Rt&&lf(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,uf(r)),additionalUserInfo:po(e),user:pf.getOrCreate(n)};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var r}))}async function df(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>hf(e,n.confirm(t))}}class ff{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return hf(cf(this.auth),this.resolver.resolveSignIn(e))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let pf=class e{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=zt(e);return wo.has(t)||wo.set(t,yo._fromUser(t)),wo.get(t)}(e)}static getOrCreate(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return hf(this.auth,qs(this._delegate,e))}async linkWithPhoneNumber(e,t){return df(this.auth,async function(e,t,n){const r=zt(e);await Fs(!1,r,"phone");const i=await Xo(r.auth,t,zt(n));return new Yo(i,(e=>qs(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return hf(this.auth,async function(e,t,n){const r=zt(e);Hr(r.auth,t,_s);const i=ea(r.auth,n);return new aa(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,af))}async linkWithRedirect(e){return await rf(Ji(this.auth)),va(this._delegate,e,af)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return hf(this.auth,Bs(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return df(this.auth,async function(e,t,n){const r=zt(e);if(sr(r.auth.app))return Promise.reject(Kr(r.auth));const i=await Xo(r.auth,t,zt(n));return new Yo(i,(e=>Bs(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return hf(this.auth,async function(e,t,n){const r=zt(e);if(sr(r.auth.app))return Promise.reject(zr(r.auth,"operation-not-supported-in-this-environment"));Hr(r.auth,t,_s);const i=ea(r.auth,n);return new aa(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,af))}async reauthenticateWithRedirect(e){return await rf(Ji(this.auth)),ga(this._delegate,e,af)}sendEmailVerification(e){return no(this._delegate,e)}async unlink(e){return await Ls(this._delegate,e),this}updateEmail(e){return function(e,t){const n=zt(e);return sr(n.auth.app)?Promise.reject(Kr(n.auth)):oo(n,t,null)}(this._delegate,e)}updatePassword(e){return so(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=zt(e);if(sr(n.auth.app))return Promise.reject(Kr(n.auth));await Ms(n,t)}(this._delegate,e)}updateProfile(e){return io(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ro(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};pf.USER_MAP=new WeakMap;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const mf=Qr;class gf{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;mf(n,"invalid-api-key",{appName:e.name}),mf(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?af:void 0;this._delegate=t.initialize({options:{persistence:yf(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Fr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pf.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){is(this._delegate,e,t)}applyActionCode(e){return Ys(this._delegate,e)}checkActionCode(e){return Xs(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await cs(zt(e),{oobCode:t,newPassword:n}).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Qs(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return hf(this._delegate,Zs(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return to(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=ws.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){mf(Xd(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Ji(e)._initializationPromise,ya(e,t,!1)}(this._delegate,af);return e?hf(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Ji(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=vf(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=vf(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Ji(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Qr(t.handleCodeInApp,r,"argument-error"),t&&Ws(r,e,t)}(i,n),await rs(r,i,"getOobCode",fs)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return Js(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){tf(Object.values(ef).includes(t),e,"invalid-persistence-type"),xt()?tf(t!==ef.SESSION,e,"unsupported-persistence-type"):St()?tf(t===ef.NONE,e,"unsupported-persistence-type"):Yd()?tf(t===ef.NONE||t===ef.LOCAL&&Dt(),e,"unsupported-persistence-type"):tf(t===ef.NONE||Jd(),e,"unsupported-persistence-type")}(this._delegate,e),e){case ef.SESSION:t=So;break;case ef.LOCAL:t=await Di(Uo)._isAvailable()?Uo:To;break;case ef.NONE:t=Pi;break;default:return Br("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return hf(this._delegate,async function(e){var t;if(sr(e.app))return Promise.reject(Kr(e));const n=Ji(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ds({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Ns(n,{returnSecureToken:!0}),i=await Ds._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return hf(this._delegate,js(this._delegate,e))}signInWithCustomToken(e){return hf(this._delegate,zs(this._delegate,e))}signInWithEmailAndPassword(e,t){return hf(this._delegate,eo(this._delegate,e,t))}signInWithEmailLink(e,t){return hf(this._delegate,async function(e,t,n){if(sr(e.app))return Promise.reject(Kr(e));const r=zt(e),i=bs.credentialWithLink(t,n||Xr());return Qr(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),js(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return df(this._delegate,async function(e,t,n){if(sr(e.app))return Promise.reject(Kr(e));const r=Ji(e),i=await Xo(r,t,zt(n));return new Yo(i,(e=>js(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return mf(Xd(),this._delegate,"operation-not-supported-in-this-environment"),hf(this._delegate,async function(e,t,n){if(sr(e.app))return Promise.reject(zr(e,"operation-not-supported-in-this-environment"));const r=Ji(e);Hr(e,t,_s);const i=ea(r,n);return new aa(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,af))}async signInWithRedirect(e){return mf(Xd(),this._delegate,"operation-not-supported-in-this-environment"),await rf(this._delegate),ma(this._delegate,e,af)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Xs(zt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function vf(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&pf.getOrCreate(e)),error:t,complete:n}}function yf(e,t){const n=function(e,t){const n=sf();if(!n)return[];const r=Oi(nf,e,t);switch(n.getItem(r)){case ef.NONE:return[Pi];case ef.LOCAL:return[Uo,So];case ef.SESSION:return[So];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(Uo)||n.push(Uo),"undefined"!=typeof window)for(const e of[To,So])n.includes(e)||n.push(e);return n.includes(Pi)||n.push(Pi),n}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */gf.Persistence=ef;class wf{constructor(){this.providerId="phone",this._delegate=new Zo(cf(Pd.auth()))}static credential(e,t){return Zo.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}wf.PHONE_SIGN_IN_METHOD=Zo.PHONE_SIGN_IN_METHOD,wf.PROVIDER_ID=Zo.PROVIDER_ID;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const bf=Qr;class _f{constructor(e,t,n=Pd.app()){var r;bf(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Jo(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(e){e.INTERNAL.registerComponent(new Gt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new gf(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Dr,PASSWORD_RESET:Rr,RECOVER_EMAIL:Pr,REVERT_SECOND_FACTOR_ADDITION:Or,VERIFY_AND_CHANGE_EMAIL:$r,VERIFY_EMAIL:Lr}},EmailAuthProvider:bs,FacebookAuthProvider:Es,GithubAuthProvider:ks,GoogleAuthProvider:Ss,OAuthProvider:Ts,SAMLAuthProvider:xs,PhoneAuthProvider:wf,PhoneMultiFactorGenerator:Qa,RecaptchaVerifier:_f,TwitterAuthProvider:As,Auth:gf,AuthCredential:as,Error:Rt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.9")}(Pd);var If,Tf,Ef="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
    Copyright The Closure Library Authors.
    SPDX-License-Identifier: Apache-2.0
    */(function(){var e;
/** @license

     Copyright The Closure Library Authors.
     SPDX-License-Identifier: Apache-2.0
    */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),c=s(1),l=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var l=s.add(r);0>=l.l(e)&&(i=i.add(n),s=l),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(s=o(n)).j(t);h(l)||0<l.l(e);)l=(s=o(n-=r)).j(t);u(s)&&(s=c),i=i.add(s),e=f(e,l)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var c=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=c*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=c*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Tf=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var c=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+c),n);8>c?(c=o(Math.pow(n,c)),i=i.j(c).add(o(l))):i=(i=i.j(r)).add(o(l))}return i},If=r}).apply(void 0!==Ef?Ef:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Sf,kf,Cf,xf,Af,Nf,Df,Rf,Pf,Of="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
    Copyright The Closure Library Authors.
    SPDX-License-Identifier: Apache-2.0
    */(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Of&&Of];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));
/** @license

     Copyright The Closure Library Authors.
     SPDX-License-Identifier: Apache-2.0
    */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(s(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function I(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function T(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,x=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(D)}};var D=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(e){T(e)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(e){}return e}();function $(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$.aa.h.call(this)}}h($,P);var L={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function j(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}j.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),G={};function K(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):H(e,t,n,!1,r,i)}function H(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,c=Z(e);if(c||(e[z]=c=new j(e)),(n=c.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):H(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[z]=null)):U(e)}}}function Y(e){return e in G?G[e]:G[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new $(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[z])instanceof j?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"==typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new j(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;_(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&q(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"==typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(e){R.call(this),this.h=e,this.g={}}h(ce,R);var le=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}ce.prototype.N=function(){ce.aa.N.call(this),ue(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function we(){P.call(this,"c")}h(ye,P),h(we,P);var be={},_e=null;function Ie(){return _e=_e||new ne}function Te(e){P.call(this,be.La,e)}function Ee(e){const t=Ie();re(t,new Te(t))}function Se(e,t){P.call(this,be.STAT_EVENT,e),this.stat=t}function ke(e){const t=Ie();re(t,new Se(t,e))}function Ce(e,t){P.call(this,be.Ma,e),this.size=t}function xe(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(Te,P),be.STAT_EVENT="statevent",h(Se,P),be.Ma="timingevent",h(Ce,P),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var De,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function $e(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},De=new Oe;var Me={},Fe={};function Ve(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Be(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(le[0]=i.toString()),i=le);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function je(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(l(e.ba,e),t)}function Ge(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||cn(e.j,e)}function He(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Jt(n)}rn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(l(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=l[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&(Ge(a),Be(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=l[0]&&"close"!=l[0]||un(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?un(n,7):Qt(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Ee()}catch(e){}}$e.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},$e.prototype.Y=function(e){try{if(e==this.g)e:{const d=Gt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=d||7==t||Ee(),Ge(this);var n=this.g.Z();this.X=n;t:if(je(this)){var r=Kt(this.g);e="";var s=r.length,o=4==Gt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),He(this),Ke(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==Fe){4==d&&(this.s=4,ke(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,ke(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),We(this,e)}if(je(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,ke(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),He(this),Ke(this)}else Ne(this.i,this.l,a,null),We(this,a);4==d&&He(this),this.o&&!this.J&&(4==d?cn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=I(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),He(this),Ke(this)}}}catch(e){}},$e.prototype.cancel=function(){this.J=!0,He(this)},$e.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),ke(17)),He(this),this.s=2,Ke(this)):ze(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,ct(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lt(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),ct(this,t[4]),this.l=dt(t[5]||"",!0),lt(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function lt(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(It(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Tt(this,t),St(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function It(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Tt(e,t){It(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return It(e),t=kt(e,t),e.g.has(t)}function St(e,t,n){Tt(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(e){}}function xt(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Dt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function $t(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$t(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){It(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){It(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){It(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){It(this);let t=[];if("string"==typeof e)Et(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return It(this),this.i=null,Et(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Dt(this.l,this.j)},Nt.prototype.i=(mt={},function(){return mt}),h(Dt,ne),(e=Dt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var Ft=/^https?$/i,Vt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,jt(e),Bt(e)}function jt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Gt(e)?e.g.statusText:""}catch(e){a=""}e.l=a+" ["+e.Z()+"]",jt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){zt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function zt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Yt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new $e(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}hn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Yt(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||N(),x||(C(),x=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new $e(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{At(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||N(),x||(C(),x=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(l(e.Fa,e),ln(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new $e(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function cn(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ie(),new Ce(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=xe(l(e.Ga,e,t),ln(e,e.B)),e.B++,0)))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),hn(e),Yt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ct(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&ct(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Nt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Wt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?me(this.o):me(De),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Ut(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zt(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Ut(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Wt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new $e(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String($t(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Ye(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Jt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(vn,ye),h(yn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new vn(e))},wn.prototype.sa=function(e){re(this.g,new yn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Pf=function(){return new mn},Rf=function(){return Ie()},Df=be,Nf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Af=Re,Pe.COMPLETE="complete",xf=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Cf=ge,kf=Nt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Sf=Mt}).apply(void 0!==Of?Of:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const $f="@firebase/firestore";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Lf{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lf.UNAUTHENTICATED=new Lf(null),Lf.GOOGLE_CREDENTIALS=new Lf("google-credentials-uid"),Lf.FIRST_PARTY=new Lf("first-party-uid"),Lf.MOCK_USER=new Lf("mock-user");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let Mf="10.12.1";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ff=new tn("@firebase/firestore");function Vf(){return Ff.logLevel}function Uf(e,...t){if(Ff.logLevel<=Jt.DEBUG){const n=t.map(Bf);Ff.debug(`Firestore (${Mf}): ${e}`,...n)}}function jf(e,...t){if(Ff.logLevel<=Jt.ERROR){const n=t.map(Bf);Ff.error(`Firestore (${Mf}): ${e}`,...n)}}function qf(e,...t){if(Ff.logLevel<=Jt.WARN){const n=t.map(Bf);Ff.warn(`Firestore (${Mf}): ${e}`,...n)}}function Bf(e){if("string"==typeof e)return e;try{
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zf(e="Unexpected state"){const t=`FIRESTORE (${Mf}) INTERNAL ASSERTION FAILED: `+e;throw jf(t),new Error(t)}function Gf(e,t){e||zf()}function Kf(e,t){return e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Hf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wf extends Rt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Qf{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Jf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Lf.UNAUTHENTICATED)))}shutdown(){}}class Xf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Zf{constructor(e){this.t=e,this.currentUser=Lf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Qf;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qf,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Uf("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Uf("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qf)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Uf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Gf("string"==typeof t.accessToken),new Jf(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Gf(null===e||"string"==typeof e),new Lf(e)}}class ep{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Lf.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tp{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ep(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Lf.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class np{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rp{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Uf("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Uf("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Uf("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Uf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Gf("string"==typeof e.token),this.R=e.token,new np(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ip(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class sp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ip(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function op(e,t){return e<t?-1:e>t?1:0}function ap(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function cp(e){return e+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class lp{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wf(Hf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wf(Hf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Wf(Hf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wf(Hf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lp.fromMillis(Date.now())}static fromDate(e){return lp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new lp(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?op(this.nanoseconds,e.nanoseconds):op(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class up{constructor(e){this.timestamp=e}static fromTimestamp(e){return new up(e)}static min(){return new up(new lp(0,0))}static max(){return new up(new lp(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class hp{constructor(e,t,n){void 0===t?t=0:t>e.length&&zf(),void 0===n?n=e.length-t:n>e.length-t&&zf(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===hp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hp?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dp extends hp{construct(e,t,n){return new dp(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Wf(Hf.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new dp(t)}static emptyPath(){return new dp([])}}const fp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pp extends hp{construct(e,t,n){return new pp(e,t,n)}static isValidIdentifier(e){return fp.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pp.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pp(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Wf(Hf.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Wf(Hf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Wf(Hf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Wf(Hf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pp(t)}static emptyPath(){return new pp([])}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class mp{constructor(e){this.path=e}static fromPath(e){return new mp(dp.fromString(e))}static fromName(e){return new mp(dp.fromString(e).popFirst(5))}static empty(){return new mp(dp.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dp.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dp.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mp(new dp(e.slice()))}}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class gp{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function vp(e){return e.fields.find((e=>2===e.kind))}function yp(e){return e.fields.filter((e=>2!==e.kind))}gp.UNKNOWN_ID=-1;class wp{constructor(e,t){this.fieldPath=e,this.kind=t}}class bp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bp(0,Tp.min())}}function _p(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=up.fromTimestamp(1e9===r?new lp(n+1,0):new lp(n,r));return new Tp(i,mp.empty(),t)}function Ip(e){return new Tp(e.readTime,e.key,-1)}class Tp{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Tp(up.min(),mp.empty(),-1)}static max(){return new Tp(up.max(),mp.empty(),-1)}}function Ep(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=mp.comparator(e.documentKey,t.documentKey),0!==n?n:op(e.largestBatchId,t.largestBatchId)
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */)}const Sp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Cp(e){if(e.code!==Hf.FAILED_PRECONDITION||e.message!==Sp)throw e;Uf("LocalStore","Unexpectedly lost primary lease")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class xp{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xp(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xp?t:xp.resolve(t)}catch(e){return xp.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xp.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xp.reject(t)}static resolve(e){return new xp(((t,n)=>{t(e)}))}static reject(e){return new xp(((t,n)=>{n(e)}))}static waitFor(e){return new xp(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=xp.resolve(!1);for(const n of e)t=t.next((e=>e?xp.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new xp(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new xp(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ap{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Qf,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Pp(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Fp(t.target.error);this.V.reject(new Pp(e,n))}}static open(e,t,n,r){try{return new Ap(t,e.transaction(r,n))}catch(e){throw new Pp(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Uf("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $p(t)}}class Np{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Np.S(Et())&&jf("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Uf("SimpleDb","Removing database:",e),Lp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Dt())return!1;if(Np.C())return!0;const e=Et(),t=Np.S(e),n=0<t&&t<10,r=Dp(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Uf("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Pp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Wf(Hf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Wf(Hf.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Pp(e,r))},r.onupgradeneeded=e=>{Uf("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Uf("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=Ap.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),xp.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Uf("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Dp(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Rp{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Lp(this.B.delete())}}class Pp extends Wf{constructor(e,t){super(Hf.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Op(e){return"IndexedDbTransactionError"===e.name}class $p{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Uf("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Uf("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Lp(n)}add(e){return Uf("SimpleDb","ADD",this.store.name,e,e),Lp(this.store.add(e))}get(e){return Lp(this.store.get(e)).next((t=>(void 0===t&&(t=null),Uf("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Uf("SimpleDb","DELETE",this.store.name,e),Lp(this.store.delete(e))}count(){return Uf("SimpleDb","COUNT",this.store.name),Lp(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new xp(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new xp(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){Uf("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new xp(((n,r)=>{t.onerror=e=>{const t=Fp(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new xp(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Rp(i),o=t(i.primaryKey,i.value,s);if(o instanceof xp){const e=o.catch((e=>(s.done(),xp.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>xp.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Lp(e){return new xp(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Fp(e.target.error);n(t)}}))}let Mp=!1;function Fp(e){const t=Np.S(Et());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Wf("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mp||(Mp=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Vp{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Uf("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Uf("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){Op(e)?Uf("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Cp(e)}await this.X(6e4)}))}}class Up{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return xp.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Uf("IndexBackfiller",`Processing collection: ${t}`),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(Uf("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ip(t);Ep(r,n)>0&&(n=r)})),new Tp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class jp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function qp(e){return null==e}function Bp(e){return 0===e&&1/e==-1/0}function zp(e){return"number"==typeof e&&Number.isInteger(e)&&!Bp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gp(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Hp(t)),t=Kp(e.get(n),t);return Hp(t)}function Kp(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Hp(e){return e+""}function Wp(e){const t=e.length;if(Gf(t>=2),2===t)return Gf(""===e.charAt(0)&&""===e.charAt(1)),dp.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&zf(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:zf()}s=t+2}return new dp(r)}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */jp.oe=-1;const Qp=["userId","batchId"];
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jp(e,t){return[e,Gp(t)]}function Yp(e,t,n){return[e,Gp(t),n]}const Xp={},Zp=["prefixPath","collectionGroup","readTime","documentId"],em=["prefixPath","collectionGroup","documentId"],tm=["collectionGroup","readTime","prefixPath","documentId"],nm=["canonicalId","targetId"],rm=["targetId","path"],im=["path","targetId"],sm=["collectionId","parent"],om=["indexId","uid"],am=["uid","sequenceNumber"],cm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lm=["indexId","uid","orderedDocumentKey"],um=["userId","collectionPath","documentId"],hm=["userId","collectionPath","largestBatchId"],dm=["userId","collectionGroup","largestBatchId"],fm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pm=[...fm,"documentOverlays"],mm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gm=mm,vm=[...gm,"indexConfiguration","indexState","indexEntries"],ym=vm;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class wm extends kp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function bm(e,t){const n=Kf(e);return Np.F(n._e,t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _m(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Im(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Em{constructor(e,t){this.comparator=e,this.root=t||km.EMPTY}insert(e,t){return new Em(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,km.BLACK,null,null))}remove(e){return new Em(this.comparator,this.root.remove(e,this.comparator).copy(null,null,km.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sm(this.root,e,this.comparator,!0)}}class Sm{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class km{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:km.RED,this.left=null!=r?r:km.EMPTY,this.right=null!=i?i:km.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new km(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return km.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return km.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,km.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,km.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zf();if(this.right.isRed())throw zf();const e=this.left.check();if(e!==this.right.check())throw zf();return e+(this.isRed()?0:1)}}km.EMPTY=null,km.RED=!0,km.BLACK=!1,km.EMPTY=new class{constructor(){this.size=0}get key(){throw zf()}get value(){throw zf()}get color(){throw zf()}get left(){throw zf()}get right(){throw zf()}copy(e,t,n,r,i){return this}insert(e,t,n){return new km(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Cm{constructor(e){this.comparator=e,this.data=new Em(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xm(this.data.getIterator())}getIteratorFrom(e){return new xm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Cm))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Cm(this.comparator);return t.data=e,t}}class xm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Am(e){return e.hasNext()?e.getNext():void 0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Nm{constructor(e){this.fields=e,e.sort(pp.comparator)}static empty(){return new Nm([])}unionWith(e){let t=new Cm(pp.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Nm(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ap(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Dm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Rm{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Dm("Invalid base64 string: "+e):e}}(e);return new Rm(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Rm(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return op(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rm.EMPTY_BYTE_STRING=new Rm("");const Pm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Om(e){if(Gf(!!e),"string"==typeof e){let t=0;const n=Pm.exec(e);if(Gf(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$m(e.seconds),nanos:$m(e.nanos)}}function $m(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Lm(e){return"string"==typeof e?Rm.fromBase64String(e):Rm.fromUint8Array(e)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fm(e){const t=e.mapValue.fields.__previous_value__;return Mm(t)?Fm(t):t}function Vm(e){const t=Om(e.mapValue.fields.__local_write_time__.timestampValue);return new lp(t.seconds,t.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Um{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class jm{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jm("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jm&&e.projectId===this.projectId&&e.database===this.database}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const qm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bm={nullValue:"NULL_VALUE"};function zm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Mm(e)?4:ig(e)?9007199254740991:10:zf()}function Gm(e,t){if(e===t)return!0;const n=zm(e);if(n!==zm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vm(e).isEqual(Vm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Om(e.timestampValue),r=Om(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Lm(e.bytesValue).isEqual(Lm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $m(e.geoPointValue.latitude)===$m(t.geoPointValue.latitude)&&$m(e.geoPointValue.longitude)===$m(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $m(e.integerValue)===$m(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=$m(e.doubleValue),r=$m(t.doubleValue);return n===r?Bp(n)===Bp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ap(e.arrayValue.values||[],t.arrayValue.values||[],Gm);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_m(n)!==_m(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Gm(n[e],r[e])))return!1;return!0}(e,t);default:return zf()}}function Km(e,t){return void 0!==(e.values||[]).find((e=>Gm(e,t)))}function Hm(e,t){if(e===t)return 0;const n=zm(e),r=zm(t);if(n!==r)return op(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return op(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=$m(e.integerValue||e.doubleValue),r=$m(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Wm(e.timestampValue,t.timestampValue);case 4:return Wm(Vm(e),Vm(t));case 5:return op(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Lm(e),r=Lm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=op(n[e],r[e]);if(0!==t)return t}return op(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=op($m(e.latitude),$m(t.latitude));return 0!==n?n:op($m(e.longitude),$m(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Hm(n[e],r[e]);if(t)return t}return op(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===qm.mapValue&&t===qm.mapValue)return 0;if(e===qm.mapValue)return 1;if(t===qm.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=op(r[e],s[e]);if(0!==t)return t;const o=Hm(n[r[e]],i[s[e]]);if(0!==o)return o}return op(r.length,s.length)}(e.mapValue,t.mapValue);default:throw zf()}}function Wm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return op(e,t);const n=Om(e),r=Om(t),i=op(n.seconds,r.seconds);return 0!==i?i:op(n.nanos,r.nanos)}function Qm(e){return Jm(e)}function Jm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Om(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Lm(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return mp.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Jm(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Jm(e.fields[i])}`;return n+"}"}(e.mapValue):zf()}function Ym(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Xm(e){return!!e&&"integerValue"in e}function Zm(e){return!!e&&"arrayValue"in e}function eg(e){return!!e&&"nullValue"in e}function tg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ng(e){return!!e&&"mapValue"in e}function rg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Im(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=rg(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=rg(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ig(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function sg(e){return"nullValue"in e?Bm:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ym(jm.empty(),mp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:zf()}function og(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ym(jm.empty(),mp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?qm:zf()}function ag(e,t){const n=Hm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function cg(e,t){const n=Hm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class lg{constructor(e){this.value=e}static empty(){return new lg({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ng(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rg(t)}setAll(e){let t=pp.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=rg(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ng(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gm(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ng(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Im(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new lg(rg(this.value))}}function ug(e){const t=[];return Im(e.fields,((e,n)=>{const r=new pp([e]);if(ng(n)){const e=ug(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Nm(t)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class hg{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new hg(e,0,up.min(),up.min(),up.min(),lg.empty(),0)}static newFoundDocument(e,t,n,r){return new hg(e,1,t,up.min(),n,r,0)}static newNoDocument(e,t){return new hg(e,2,t,up.min(),up.min(),lg.empty(),0)}static newUnknownDocument(e,t){return new hg(e,3,t,up.min(),up.min(),lg.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(up.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lg.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lg.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=up.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hg&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hg(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class dg{constructor(e,t){this.position=e,this.inclusive=t}}function fg(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?mp.comparator(mp.fromName(o.referenceValue),n.key):Hm(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function pg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gm(e.position[n],t.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class mg{constructor(e,t="asc"){this.field=e,this.dir=t}}function gg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class vg{}class yg extends vg{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xg(e,t,n):"array-contains"===t?new Rg(e,n):"in"===t?new Pg(e,n):"not-in"===t?new Og(e,n):"array-contains-any"===t?new $g(e,n):new yg(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ag(e,n):new Ng(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Hm(t,this.value)):null!==t&&zm(this.value)===zm(t)&&this.matchesComparison(Hm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zf()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wg extends vg{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new wg(e,t)}matches(e){return bg(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bg(e){return"and"===e.op}function _g(e){return"or"===e.op}function Ig(e){return Tg(e)&&bg(e)}function Tg(e){for(const t of e.filters)if(t instanceof wg)return!1;return!0}function Eg(e){if(e instanceof yg)return e.field.canonicalString()+e.op.toString()+Qm(e.value);if(Ig(e))return e.filters.map((e=>Eg(e))).join(",");{const t=e.filters.map((e=>Eg(e))).join(",");return`${e.op}(${t})`}}function Sg(e,t){return e instanceof yg?function(e,t){return t instanceof yg&&e.op===t.op&&e.field.isEqual(t.field)&&Gm(e.value,t.value)}(e,t):e instanceof wg?function(e,t){return t instanceof wg&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Sg(n,t.filters[r])),!0)}(e,t):void zf()}function kg(e,t){const n=e.filters.concat(t);return wg.create(n,e.op)}function Cg(e){return e instanceof yg?function(e){return`${e.field.canonicalString()} ${e.op} ${Qm(e.value)}`}(e):e instanceof wg?function(e){return e.op.toString()+" {"+e.getFilters().map(Cg).join(" ,")+"}"}(e):"Filter"}class xg extends yg{constructor(e,t,n){super(e,t,n),this.key=mp.fromName(n.referenceValue)}matches(e){const t=mp.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ag extends yg{constructor(e,t){super(e,"in",t),this.keys=Dg("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ng extends yg{constructor(e,t){super(e,"not-in",t),this.keys=Dg("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Dg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>mp.fromName(e.referenceValue)))}class Rg extends yg{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zm(t)&&Km(t.arrayValue,this.value)}}class Pg extends yg{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Km(this.value.arrayValue,t)}}class Og extends yg{constructor(e,t){super(e,"not-in",t)}matches(e){if(Km(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Km(this.value.arrayValue,t)}}class $g extends yg{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Km(this.value.arrayValue,e)))}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Lg{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Mg(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Lg(e,t,n,r,i,s,o)}function Fg(e){const t=Kf(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Eg(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),qp(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Qm(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Qm(e))).join(",")),t.ue=e}return t.ue}function Vg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!gg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Sg(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pg(e.startAt,t.startAt)&&pg(e.endAt,t.endAt)}function Ug(e){return mp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function jg(e,t){return e.filters.filter((e=>e instanceof yg&&e.field.isEqual(t)))}function qg(e,t,n){let r=Bm,i=!0;for(const n of jg(e,t)){let e=Bm,t=!0;switch(n.op){case"<":case"<=":e=sg(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=Bm}ag({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ag({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Bg(e,t,n){let r=qm,i=!0;for(const n of jg(e,t)){let e=qm,t=!0;switch(n.op){case">=":case">":e=og(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=qm}cg({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];cg({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class zg{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Gg(e,t,n,r,i,s,o,a){return new zg(e,t,n,r,i,s,o,a)}function Kg(e){return new zg(e)}function Hg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wg(e){return null!==e.collectionGroup}function Qg(e){const t=Kf(e);if(null===t.ce){t.ce=[];const e=new Set;for(const n of t.explicitOrderBy)t.ce.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Cm(pp.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new mg(r,n))})),e.has(pp.keyField().canonicalString())||t.ce.push(new mg(pp.keyField(),n))}return t.ce}function Jg(e){const t=Kf(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return Mg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new mg(e.field,t)}));const n=e.endAt?new dg(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new dg(e.startAt.position,e.startAt.inclusive):null;return Mg(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Qg(e))),t.le}function Yg(e,t){const n=e.filters.concat([t]);return new zg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Xg(e,t,n){return new zg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zg(e,t){return Vg(Jg(e),Jg(t))&&e.limitType===t.limitType}function ev(e){return`${Fg(Jg(e))}|lt:${e.limitType}`}function tv(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Cg(e))).join(", ")}]`),qp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Qm(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Qm(e))).join(",")),`Target(${t})`}(Jg(e))}; limitType=${e.limitType})`}function nv(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):mp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Qg(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=fg(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qg(e),t))&&!(e.endAt&&!function(e,t,n){const r=fg(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qg(e),t))}(e,t)}function rv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function iv(e){return(t,n)=>{let r=!1;for(const i of Qg(e)){const e=sv(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function sv(e,t,n){const r=e.field.isKeyField()?mp.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Hm(r,i):zf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zf()}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ov{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Im(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Tm(this.inner)}size(){return this.innerSize}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const av=new Em(mp.comparator);function cv(){return av}const lv=new Em(mp.comparator);function uv(...e){let t=lv;for(const n of e)t=t.insert(n.key,n);return t}function hv(e){let t=lv;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function dv(){return pv()}function fv(){return pv()}function pv(){return new ov((e=>e.toString()),((e,t)=>e.isEqual(t)))}const mv=new Em(mp.comparator),gv=new Cm(mp.comparator);function vv(...e){let t=gv;for(const n of e)t=t.add(n);return t}const yv=new Cm(op);function wv(){return yv}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bp(t)?"-0":t}}function _v(e){return{integerValue:""+e}}function Iv(e,t){return zp(t)?_v(t):bv(e,t)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Tv{constructor(){this._=void 0}}function Ev(e,t,n){return e instanceof Cv?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Mm(t)&&(t=Fm(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof xv?Av(e,t):e instanceof Nv?Dv(e,t):function(e,t){const n=kv(e,t),r=Pv(n)+Pv(e.Pe);return Xm(n)&&Xm(e.Pe)?_v(r):bv(e.serializer,r)}(e,t)}function Sv(e,t,n){return e instanceof xv?Av(e,t):e instanceof Nv?Dv(e,t):n}function kv(e,t){return e instanceof Rv?function(e){return Xm(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Cv extends Tv{}class xv extends Tv{constructor(e){super(),this.elements=e}}function Av(e,t){const n=Ov(t);for(const t of e.elements)n.some((e=>Gm(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Nv extends Tv{constructor(e){super(),this.elements=e}}function Dv(e,t){let n=Ov(t);for(const t of e.elements)n=n.filter((e=>!Gm(e,t)));return{arrayValue:{values:n}}}class Rv extends Tv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Pv(e){return $m(e.integerValue||e.doubleValue)}function Ov(e){return Zm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class $v{constructor(e,t){this.field=e,this.transform=t}}class Lv{constructor(e,t){this.version=e,this.transformResults=t}}class Mv{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mv}static exists(e){return new Mv(void 0,e)}static updateTime(e){return new Mv(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vv{}function Uv(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Jv(e.key,Mv.none()):new Gv(e.key,e.data,Mv.none());{const n=e.data,r=lg.empty();let i=new Cm(pp.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Kv(e.key,r,new Nm(i.toArray()),Mv.none())}}function jv(e,t,n){e instanceof Gv?function(e,t,n){const r=e.value.clone(),i=Wv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kv?function(e,t,n){if(!Fv(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Wv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function qv(e,t,n,r){return e instanceof Gv?function(e,t,n,r){if(!Fv(e.precondition,t))return n;const i=e.value.clone(),s=Qv(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kv?function(e,t,n,r){if(!Fv(e.precondition,t))return n;const i=Qv(e.fieldTransforms,r,t),s=t.data;return s.setAll(Hv(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Fv(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bv(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=kv(r.transform,e||null);null!=i&&(null===n&&(n=lg.empty()),n.set(r.field,i))}return n||null}function zv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ap(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xv&&t instanceof xv||e instanceof Nv&&t instanceof Nv?ap(e.elements,t.elements,Gm):e instanceof Rv&&t instanceof Rv?Gm(e.Pe,t.Pe):e instanceof Cv&&t instanceof Cv}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Gv extends Vv{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kv extends Vv{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hv(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Wv(e,t,n){const r=new Map;Gf(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Sv(o,a,n[i]))}return r}function Qv(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ev(e,s,t))}return r}class Jv extends Vv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yv extends Vv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Xv{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&jv(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=qv(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=qv(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fv();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Uv(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(up.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),vv())}isEqual(e){return this.batchId===e.batchId&&ap(this.mutations,e.mutations,((e,t)=>zv(e,t)))&&ap(this.baseMutations,e.baseMutations,((e,t)=>zv(e,t)))}}class Zv{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Gf(e.mutations.length===n.length);let r=mv;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Zv(e,t,n,r)}}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ey{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ty{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ny,ry;function iy(e){switch(e){default:return zf();case Hf.CANCELLED:case Hf.UNKNOWN:case Hf.DEADLINE_EXCEEDED:case Hf.RESOURCE_EXHAUSTED:case Hf.INTERNAL:case Hf.UNAVAILABLE:case Hf.UNAUTHENTICATED:return!1;case Hf.INVALID_ARGUMENT:case Hf.NOT_FOUND:case Hf.ALREADY_EXISTS:case Hf.PERMISSION_DENIED:case Hf.FAILED_PRECONDITION:case Hf.ABORTED:case Hf.OUT_OF_RANGE:case Hf.UNIMPLEMENTED:case Hf.DATA_LOSS:return!0}}function sy(e){if(void 0===e)return jf("GRPC error has no .code"),Hf.UNKNOWN;switch(e){case ny.OK:return Hf.OK;case ny.CANCELLED:return Hf.CANCELLED;case ny.UNKNOWN:return Hf.UNKNOWN;case ny.DEADLINE_EXCEEDED:return Hf.DEADLINE_EXCEEDED;case ny.RESOURCE_EXHAUSTED:return Hf.RESOURCE_EXHAUSTED;case ny.INTERNAL:return Hf.INTERNAL;case ny.UNAVAILABLE:return Hf.UNAVAILABLE;case ny.UNAUTHENTICATED:return Hf.UNAUTHENTICATED;case ny.INVALID_ARGUMENT:return Hf.INVALID_ARGUMENT;case ny.NOT_FOUND:return Hf.NOT_FOUND;case ny.ALREADY_EXISTS:return Hf.ALREADY_EXISTS;case ny.PERMISSION_DENIED:return Hf.PERMISSION_DENIED;case ny.FAILED_PRECONDITION:return Hf.FAILED_PRECONDITION;case ny.ABORTED:return Hf.ABORTED;case ny.OUT_OF_RANGE:return Hf.OUT_OF_RANGE;case ny.UNIMPLEMENTED:return Hf.UNIMPLEMENTED;case ny.DATA_LOSS:return Hf.DATA_LOSS;default:return zf()}}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function oy(){return new TextEncoder}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(ry=ny||(ny={}))[ry.OK=0]="OK",ry[ry.CANCELLED=1]="CANCELLED",ry[ry.UNKNOWN=2]="UNKNOWN",ry[ry.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ry[ry.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ry[ry.NOT_FOUND=5]="NOT_FOUND",ry[ry.ALREADY_EXISTS=6]="ALREADY_EXISTS",ry[ry.PERMISSION_DENIED=7]="PERMISSION_DENIED",ry[ry.UNAUTHENTICATED=16]="UNAUTHENTICATED",ry[ry.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ry[ry.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ry[ry.ABORTED=10]="ABORTED",ry[ry.OUT_OF_RANGE=11]="OUT_OF_RANGE",ry[ry.UNIMPLEMENTED=12]="UNIMPLEMENTED",ry[ry.INTERNAL=13]="INTERNAL",ry[ry.UNAVAILABLE=14]="UNAVAILABLE",ry[ry.DATA_LOSS=15]="DATA_LOSS";const ay=new If([4294967295,4294967295],0);function cy(e){const t=oy().encode(e),n=new Tf;return n.update(t),new Uint8Array(n.digest())}function ly(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new If([n,r],0),new If([i,s],0)]}class uy{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hy(`Invalid padding: ${t}`);if(n<0)throw new hy(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new hy(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new hy(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=If.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(If.fromNumber(n)));return 1===r.compare(ay)&&(r=new If([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=cy(e),[n,r]=ly(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);if(!this.de(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new uy(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=cy(e),[n,r]=ly(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);this.Ae(t)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class dy{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fy.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new dy(up.min(),r,new Em(op),cv(),vv())}}class fy{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fy(n,t,vv(),vv(),vv())}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class py{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class my{constructor(e,t){this.targetId=e,this.me=t}}class gy{constructor(e,t,n=Rm.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class vy{constructor(){this.fe=0,this.ge=by(),this.pe=Rm.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=vv(),t=vv(),n=vv();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zf()}})),new fy(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=by()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Gf(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yy{constructor(e){this.Le=e,this.Be=new Map,this.ke=cv(),this.qe=wy(),this.Qe=new Em(op)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:zf()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Ug(i))if(0===n){const e=new mp(i.path);this.Ue(t,e,hg.newNoDocument(e,up.min()))}else Gf(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Lm(n).toUint8Array()}catch(e){if(e instanceof Dm)return qf("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new uy(s,r,i)}catch(e){return qf(e instanceof hy?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Ug(i.target)){const t=new mp(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,hg.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=vv();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new dy(e,t,this.Qe,this.ke,n);return this.ke=cv(),this.qe=wy(),this.Qe=new Em(op),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vy,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Cm(op),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Uf("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vy),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function wy(){return new Em(mp.comparator)}function by(){return new Em(mp.comparator)}const _y={asc:"ASCENDING",desc:"DESCENDING"},Iy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ty={and:"AND",or:"OR"};class Ey{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sy(e,t){return e.useProto3Json||qp(t)?t:{value:t}}function ky(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cy(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xy(e,t){return ky(e,t.toTimestamp())}function Ay(e){return Gf(!!e),up.fromTimestamp(function(e){const t=Om(e);return new lp(t.seconds,t.nanos)}(e))}function Ny(e,t){return Dy(e,t).canonicalString()}function Dy(e,t){const n=function(e){return new dp(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ry(e){const t=dp.fromString(e);return Gf(ew(t)),t}function Py(e,t){return Ny(e.databaseId,t.path)}function Oy(e,t){const n=Ry(t);if(n.get(1)!==e.databaseId.projectId)throw new Wf(Hf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wf(Hf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new mp(Fy(n))}function $y(e,t){return Ny(e.databaseId,t)}function Ly(e){const t=Ry(e);return 4===t.length?dp.emptyPath():Fy(t)}function My(e){return new dp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fy(e){return Gf(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vy(e,t,n){return{name:Py(e,t),fields:n.value.mapValue.fields}}function Uy(e,t,n){const r=Oy(e,t.name),i=Ay(t.updateTime),s=t.createTime?Ay(t.createTime):up.min(),o=new lg({mapValue:{fields:t.fields}}),a=hg.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function jy(e,t){let n;if(t instanceof Gv)n={update:Vy(e,t.key,t.value)};else if(t instanceof Jv)n={delete:Py(e,t.key)};else if(t instanceof Kv)n={update:Vy(e,t.key,t.data),updateMask:Zy(t.fieldMask)};else{if(!(t instanceof Yv))return zf();n={verify:Py(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Cv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rv)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw zf()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:xy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zf()}(e,t.precondition)),n}function qy(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Mv.updateTime(Ay(e.updateTime)):void 0!==e.exists?Mv.exists(e.exists):Mv.none()}(t.currentDocument):Mv.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Gf("REQUEST_TIME"===t.setToServerValue),n=new Cv;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new xv(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Nv(e)}else"increment"in t?n=new Rv(e,t.increment):zf();const r=pp.fromServerFormat(t.fieldPath);return new $v(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Oy(e,t.update.name),s=new lg({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Nm(t.map((e=>pp.fromServerFormat(e))))}(t.updateMask);return new Kv(i,s,e,n,r)}return new Gv(i,s,n,r)}if(t.delete){const r=Oy(e,t.delete);return new Jv(r,n)}if(t.verify){const r=Oy(e,t.verify);return new Yv(r,n)}return zf()}function By(e,t){return{documents:[$y(e,t.path)]}}function zy(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$y(e,i);const s=function(e){if(0!==e.length)return Xy(wg.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Jy(e.field),direction:Hy(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sy(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Gy(e){let t=Ly(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Gf(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ky(e);return t instanceof wg&&Ig(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new mg(Yy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,qp(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new dg(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new dg(n,t)}(n.endAt)),Gg(t,i,o,s,a,"F",c,l)}function Ky(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yy(e.unaryFilter.field);return yg.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yy(e.unaryFilter.field);return yg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yy(e.unaryFilter.field);return yg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yy(e.unaryFilter.field);return yg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zf()}}(e):void 0!==e.fieldFilter?function(e){return yg.create(Yy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zf()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return wg.create(e.compositeFilter.filters.map((e=>Ky(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zf()}}(e.compositeFilter.op))}(e):zf()}function Hy(e){return _y[e]}function Wy(e){return Iy[e]}function Qy(e){return Ty[e]}function Jy(e){return{fieldPath:e.canonicalString()}}function Yy(e){return pp.fromServerFormat(e.fieldPath)}function Xy(e){return e instanceof yg?function(e){if("=="===e.op){if(tg(e.value))return{unaryFilter:{field:Jy(e.field),op:"IS_NAN"}};if(eg(e.value))return{unaryFilter:{field:Jy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(tg(e.value))return{unaryFilter:{field:Jy(e.field),op:"IS_NOT_NAN"}};if(eg(e.value))return{unaryFilter:{field:Jy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jy(e.field),op:Wy(e.op),value:e.value}}}(e):e instanceof wg?function(e){const t=e.getFilters().map((e=>Xy(e)));return 1===t.length?t[0]:{compositeFilter:{op:Qy(e.op),filters:t}}}(e):zf()}function Zy(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ew(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class tw{constructor(e,t,n,r,i=up.min(),s=up.min(),o=Rm.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new tw(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tw(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class nw{constructor(e){this.ct=e}}function rw(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:iw(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Py(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ky(e,t.version.toTimestamp()),createTime:ky(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sw(t.version)};else{if(!t.isUnknownDocument())return zf();r.unknownDocument={path:n.path.toArray(),version:sw(t.version)}}return r}function iw(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function sw(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ow(e){const t=new lp(e.seconds,e.nanoseconds);return up.fromTimestamp(t)}function aw(e,t){const n=(t.baseMutations||[]).map((t=>qy(e.ct,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>qy(e.ct,t))),i=lp.fromMillis(t.localWriteTimeMs);return new Xv(t.batchId,i,n,r)}function cw(e){const t=ow(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ow(e.lastLimboFreeSnapshotVersion):up.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Gf(1===e.documents.length),Jg(Kg(Ly(e.documents[0])))}(e.query):function(e){return Jg(Gy(e))}(e.query),new tw(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Rm.fromBase64String(e.resumeToken))}function lw(e,t){const n=sw(t.snapshotVersion),r=sw(t.lastLimboFreeSnapshotVersion);let i;i=Ug(t.target)?By(e.ct,t.target):zy(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Fg(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uw(e){const t=Gy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xg(t,t.limit,"L"):t}function hw(e,t){return new ey(t.largestBatchId,qy(e.ct,t.overlayMutation))}function dw(e,t){const n=t.path.lastSegment();return[e,Gp(t.path.popLast()),n]}function fw(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:sw(r.readTime),documentKey:Gp(r.documentKey.path),largestBatchId:r.largestBatchId}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class pw{getBundleMetadata(e,t){return mw(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:ow(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return mw(e).put(function(e){return{bundleId:e.id,createTime:sw(Ay(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return gw(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:uw(e.bundledQuery),readTime:ow(e.readTime)}}(e)}))}saveNamedQuery(e,t){return gw(e).put(function(e){return{name:e.name,readTime:sw(Ay(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function mw(e){return bm(e,"bundles")}function gw(e){return bm(e,"namedQueries")}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class vw{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new vw(e,n)}getOverlay(e,t){return yw(e).get(dw(this.userId,t)).next((e=>e?hw(this.serializer,e):null))}getOverlays(e,t){const n=dv();return xp.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new ey(t,i);r.push(this.ht(e,s))})),xp.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Gp(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(yw(e).j("collectionPathOverlayIndex",r))})),xp.waitFor(i)}getOverlaysForCollection(e,t,n){const r=dv(),i=Gp(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return yw(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=hw(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=dv();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yw(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=hw(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return yw(e).put(function(e,t,n){const[r,i,s]=dw(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:jy(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function yw(e){return bm(e,"documentOverlays")}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ww{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt($m(e.integerValue));else if("doubleValue"in e){const n=$m(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Bp(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=Om(n)),t.At(`${n.seconds||""}`),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Lm(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?ig(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):zf()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const e of Object.keys(n))this.Rt(e,t),this.It(n[e],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const e of n)this.It(e,t)}gt(e,t){this.Et(t,37),mp.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function bw(e){if(0===e)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function _w(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=bw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ww.bt=new ww;class Iw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=_w(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}qt(e){const t=this.Bt(e),n=_w(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Tw{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Ew{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Sw{constructor(){this.Gt=new Iw,this.zt=new Tw(this.Gt),this.jt=new Ew(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class kw{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new kw(this.indexId,this.documentKey,this.arrayValue,n)}}function Cw(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=xw(e.arrayValue,t.arrayValue),0!==n?n:(n=xw(e.directionalValue,t.directionalValue),0!==n?n:mp.comparator(e.documentKey,t.documentKey)))}function xw(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Aw{constructor(e){this.Yt=new Cm(((e,t)=>pp.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Gf(e.collectionGroup===this.collectionId),this.en)return!1;const t=vp(e);if(void 0!==t&&!this.nn(t))return!1;const n=yp(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new Cm(pp.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new wp(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new wp(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new wp(n.field,"asc"===n.dir?0:1)));return new gp(gp.UNKNOWN_ID,this.collectionId,t,bp.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nw(e){var t,n;if(Gf(e instanceof yg||e instanceof wg),e instanceof yg){if(e instanceof Pg){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>yg.create(e.field,"==",t))))||[];return wg.create(r,"or")}return e}const r=e.filters.map((e=>Nw(e)));return wg.create(r,e.op)}function Dw(e){if(0===e.getFilters().length)return[];const t=$w(Nw(e));return Gf(Ow(t)),Rw(t)||Pw(t)?[t]:t.getFilters()}function Rw(e){return e instanceof yg}function Pw(e){return e instanceof wg&&Ig(e)}function Ow(e){return Rw(e)||Pw(e)||function(e){if(e instanceof wg&&_g(e)){for(const t of e.getFilters())if(!Rw(t)&&!Pw(t))return!1;return!0}return!1}(e)}function $w(e){if(Gf(e instanceof yg||e instanceof wg),e instanceof yg)return e;if(1===e.filters.length)return $w(e.filters[0]);const t=e.filters.map((e=>$w(e)));let n=wg.create(t,e.op);return n=Fw(n),Ow(n)?n:(Gf(n instanceof wg),Gf(bg(n)),Gf(n.filters.length>1),n.filters.reduce(((e,t)=>Lw(e,t))))}function Lw(e,t){let n;return Gf(e instanceof yg||e instanceof wg),Gf(t instanceof yg||t instanceof wg),n=e instanceof yg?t instanceof yg?function(e,t){return wg.create([e,t],"and")}(e,t):Mw(e,t):t instanceof yg?Mw(t,e):function(e,t){if(Gf(e.filters.length>0&&t.filters.length>0),bg(e)&&bg(t))return kg(e,t.getFilters());const n=_g(e)?e:t,r=_g(e)?t:e,i=n.filters.map((e=>Lw(e,r)));return wg.create(i,"or")}(e,t),Fw(n)}function Mw(e,t){if(bg(t))return kg(t,e.getFilters());{const n=t.filters.map((t=>Lw(e,t)));return wg.create(n,"or")}}function Fw(e){if(Gf(e instanceof yg||e instanceof wg),e instanceof yg)return e;const t=e.getFilters();if(1===t.length)return Fw(t[0]);if(Tg(e))return e;const n=t.map((e=>Fw(e))),r=[];return n.forEach((t=>{t instanceof yg?r.push(t):t instanceof wg&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:wg.create(r,e.op)
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class Vw{constructor(){this._n=new Uw}addToCollectionParentIndex(e,t){return this._n.add(t),xp.resolve()}getCollectionParents(e,t){return xp.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return xp.resolve()}deleteFieldIndex(e,t){return xp.resolve()}deleteAllFieldIndexes(e){return xp.resolve()}createTargetIndexes(e,t){return xp.resolve()}getDocumentsMatchingTarget(e,t){return xp.resolve(null)}getIndexType(e,t){return xp.resolve(0)}getFieldIndexes(e,t){return xp.resolve([])}getNextCollectionGroupToUpdate(e){return xp.resolve(null)}getMinOffset(e,t){return xp.resolve(Tp.min())}getMinOffsetFromCollectionGroup(e,t){return xp.resolve(Tp.min())}updateCollectionGroup(e,t,n){return xp.resolve()}updateIndexEntries(e,t){return xp.resolve()}}class Uw{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Cm(dp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Cm(dp.comparator)).toArray()}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const jw=new Uint8Array(0);class qw{constructor(e,t){this.databaseId=t,this.an=new Uw,this.un=new ov((e=>Fg(e)),((e,t)=>Vg(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Gp(r)};return Bw(e).put(i)}return xp.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[cp(t),""],!1,!0);return Bw(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Wp(r.parent))}return n}))}addFieldIndex(e,t){const n=Gw(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Kw(e);return i.next((e=>{n.put(fw(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Gw(e),r=Kw(e),i=zw(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Gw(e),n=zw(e),r=Kw(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return xp.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Aw(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=zw(e);let r=!0;const i=new Map;return xp.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=vv();const r=[];return xp.forEach(i,((i,s)=>{Uf("IndexedDbIndexManager",`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${Fg(t)}`);const o=function(e,t){const n=vp(t);if(void 0===n)return null;for(const t of jg(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of yp(t))for(const t of jg(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of yp(t)){const t=0===i.kind?qg(e,i.fieldPath,e.startAt):Bg(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new dg(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of yp(t)){const t=0===i.kind?Bg(e,i.fieldPath,e.endAt):qg(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new dg(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return xp.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=mp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return xp.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Dw(wg.create(e.filters,"and")).map((t=>Mg(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):jw,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new kw(e,mp.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new kw(e,mp.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Aw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return xp.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Cm(pp.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Sw;for(const r of yp(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);ww.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Sw;return ww.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Sw;return ww.bt.Pt(Ym(this.databaseId,t),n.Ht(function(e){const t=yp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Sw);let i=0;for(const s of yp(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Zm(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);ww.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new Sw;r.seed(n.Wt()),ww.bt.Pt(e,r.Ht(t.kind)),i.push(r)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof yg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Gw(e),r=Kw(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return xp.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new bp(t.sequenceNumber,new Tp(ow(t.readTime),new mp(Wp(t.documentKey)),t.largestBatchId)):bp.empty(),r=e.fields.map((([e,t])=>new wp(pp.fromServerFormat(e),t)));return new gp(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:op(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Gw(e),i=Kw(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>xp.forEach(t,(t=>i.put(fw(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return xp.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?xp.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),xp.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?xp.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return zw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return zw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=zw(e);let i=new Cm(Cw);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new kw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Cm(Cw);const r=this.An(t,e);if(null==r)return n;const i=vp(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Zm(s))for(const i of s.arrayValue.values||[])n=n.add(new kw(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new kw(t.indexId,e.key,jw,r));return n}wn(e,t,n,r,i){Uf("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Am(s),c=Am(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Am(o)):t?(i(a),a=Am(s)):(a=Am(s),c=Am(o))}}(r,i,Cw,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),xp.waitFor(s)}gn(e){let t=1;return Kw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Cw(e,t))).filter(((e,t,n)=>!t||0!==Cw(e,n[t-1])));const r=[];r.push(e);for(const i of n){const n=Cw(i,e),s=Cw(i,t);if(0===n)r[0]=e.Jt();else if(n>0&&s<0)r.push(i),r.push(i.Jt());else if(s>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2){if(this.Dn(r[e],r[e+1]))return[];const t=[r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,jw,[]],n=[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,jw,[]];i.push(IDBKeyRange.bound(t,n))}return i}Dn(e,t){return Cw(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Hw)}getMinOffset(e,t){return xp.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||zf())))).next(Hw)}}function Bw(e){return bm(e,"collectionParents")}function zw(e){return bm(e,"indexEntries")}function Gw(e){return bm(e,"indexConfiguration")}function Kw(e){return bm(e,"indexState")}function Hw(e){Gf(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Ep(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Tp(t.readTime,t.documentKey,n)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qw{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qw(e,Qw.DEFAULT_COLLECTION_PERCENTILE,Qw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jw(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Gf(1===a)})));const l=[];for(const e of n.mutations){const r=Yp(t,e.key.path,n.batchId);s.push(i.delete(r)),l.push(e.key)}return xp.waitFor(s).next((()=>l))}function Yw(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zf();t=e.noDocument}return JSON.stringify(t).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Qw.DEFAULT_COLLECTION_PERCENTILE=10,Qw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qw.DEFAULT=new Qw(41943040,Qw.DEFAULT_COLLECTION_PERCENTILE,Qw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qw.DISABLED=new Qw(-1,0,0);class Xw{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Gf(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Xw(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eb(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=tb(e),s=eb(e);return s.add({}).next((o=>{Gf("number"==typeof o);const a=new Xv(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>jy(e.ct,t))),i=n.mutations.map((t=>jy(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new Cm(((e,t)=>op(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Yp(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Xp))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),xp.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return eb(e).get(t).next((e=>e?(Gf(e.userId===this.userId),aw(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?xp.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return eb(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Gf(t.batchId>=n),i=aw(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return eb(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eb(e).U("userMutationsIndex",t).next((e=>e.map((e=>aw(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Jp(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return tb(e).J({range:r},((n,r,s)=>{const[o,a,c]=n,l=Wp(a);if(o===this.userId&&t.path.isEqual(l))return eb(e).get(c).next((e=>{if(!e)throw zf();Gf(e.userId===this.userId),i.push(aw(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cm(op);const r=[];return t.forEach((t=>{const i=Jp(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=tb(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,c=Wp(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),xp.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Jp(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Cm(op);return tb(e).J({range:s},((e,t,i)=>{const[s,a,c]=e,l=Wp(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(eb(e).get(t).next((e=>{if(null===e)throw zf();Gf(e.userId===this.userId),n.push(aw(this.serializer,e))})))})),xp.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Jw(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),xp.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return xp.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return tb(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Wp(e[1]);r.push(t)}else n.done()})).next((()=>{Gf(0===r.length)}))}))}containsKey(e,t){return Zw(e,this.userId,t)}xn(e){return nb(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Zw(e,t,n){const r=Jp(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return tb(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function eb(e){return bm(e,"mutations")}function tb(e){return bm(e,"documentMutations")}function nb(e){return bm(e,"mutationQueues")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class rb{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new rb(0)}static Ln(){return new rb(-1)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ib{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new rb(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>up.fromTimestamp(new lp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>sb(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Gf(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return sb(e).J(((s,o)=>{const a=cw(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>xp.waitFor(i))).next((()=>r))}forEachTarget(e,t){return sb(e).J(((e,n)=>{const r=cw(n);t(r)}))}Bn(e){return ob(e).get("targetGlobalKey").next((e=>(Gf(null!==e),e)))}kn(e,t){return ob(e).put("targetGlobalKey",t)}qn(e,t){return sb(e).put(lw(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Fg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return sb(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=cw(n);Vg(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=ab(e);return t.forEach((t=>{const s=Gp(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),xp.waitFor(r)}removeMatchingKeys(e,t,n){const r=ab(e);return xp.forEach(t,(t=>{const i=Gp(t.path);return xp.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=ab(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ab(e);let i=vv();return r.J({range:n,H:!0},((e,t,n)=>{const r=Wp(e[1]),s=new mp(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Gp(t.path),r=IDBKeyRange.bound([n],[cp(n)],!1,!0);let i=0;return ab(e).J({index:"documentTargetsIndex",H:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}ot(e,t){return sb(e).get(t).next((e=>e?cw(e):null))}}function sb(e){return bm(e,"targets")}function ob(e){return bm(e,"targetGlobal")}function ab(e){return bm(e,"targetDocuments")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cb([e,t],[n,r]){const i=op(e,n);return 0===i?op(t,r):i}class lb{constructor(e){this.Kn=e,this.buffer=new Cm(cb),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();cb(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ub{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Uf("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Op(e)?Uf("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Cp(e)}await this.zn(3e5)}))}}class hb{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return xp.resolve(jp.oe);const n=new lb(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Uf("LruGarbageCollector","Garbage collection skipped; disabled"),xp.resolve(Ww)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Uf("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ww):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Uf("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Vf()<=Jt.DEBUG&&Uf("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-a)+"ms\n"+`Total Duration: ${c-l}ms`),xp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class db{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new hb(e,t)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return fb(e,n)}removeReference(e,t,n){return fb(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return fb(e,t)}er(e,t){return function(e,t){let n=!1;return nb(e).Y((r=>Zw(e,r,t).next((e=>(e&&(n=!0),xp.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,up.min()),ab(e).delete(function(e){return[0,Gp(e.path)]}(s)))))}));r.push(t)}})).next((()=>xp.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return fb(e,t)}Xn(e,t){const n=ab(e);let r,i=jp.oe;return n.J({index:"documentTargetsIndex"},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==jp.oe&&t(new mp(Wp(r)),i),i=o,r=s):i=jp.oe})).next((()=>{i!==jp.oe&&t(new mp(Wp(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fb(e,t){return ab(e).put(function(e,t){return{targetId:0,path:Gp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class pb{constructor(){this.changes=new ov((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hg.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xp.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class mb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return wb(e).put(n)}removeEntry(e,t,n){return wb(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],iw(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=hg.newInvalidDocument(t);return wb(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bb(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:hg.newInvalidDocument(t)};return wb(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bb(t))},((e,r)=>{n={document:this.nr(t,r),size:Yw(r)}})).next((()=>n))}getEntries(e,t){let n=cv();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=cv(),r=new Em(mp.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Yw(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return xp.resolve();let r=new Cm(Ib);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(bb(r.first()),bb(r.last())),s=r.getIterator();let o=s.getNext();return wb(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=mp.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ib(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(bb(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),iw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wb(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=cv();for(const i of e){const e=this.nr(mp.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(nv(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=cv();const s=_b(t,n),o=_b(t,Tp.max());return wb(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(mp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new vb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return yb(e).get("remoteDocumentGlobalKey").next((e=>(Gf(!!e),e)))}tr(e,t){return yb(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Uy(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=mp.fromSegments(t.noDocument.path),r=ow(t.noDocument.readTime);n=hg.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return zf();{const e=mp.fromSegments(t.unknownDocument.path),r=ow(t.unknownDocument.version);n=hg.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new lp(e[0],e[1]);return up.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(up.min()))return e}return hg.newInvalidDocument(e)}}function gb(e){return new mb(e)}class vb extends pb{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ov((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Cm(((e,t)=>op(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=rw(this.ar.serializer,s);r=r.add(i.path.popLast());const c=Yw(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=rw(this.ar.serializer,s.convertToNoDocument(up.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),xp.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((({documents:e,_r:t})=>(t.forEach(((t,n)=>{this.ur.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function yb(e){return bm(e,"remoteDocumentGlobal")}function wb(e){return bm(e,"remoteDocumentsV14")}function bb(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function _b(e,t){const n=t.documentKey.path.toArray();return[e,iw(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ib(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=op(n[e],r[e]),i)return i;return i=op(n.length,r.length),i||(i=op(n[n.length-2],r[r.length-2]),i||op(n[n.length-1],r[r.length-1])
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */)}class Tb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Eb{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&qv(n.mutation,e,Nm.empty(),lp.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,vv()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=vv()){const r=dv();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=uv();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=dv();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,vv())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=cv();const s=pv(),o=pv();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Kv)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),qv(o.mutation,t,o.mutation.getFieldMask(),lp.now())):s.set(t.key,Nm.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Tb(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=pv();let r=new Em(((e,t)=>e-t)),i=vv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Nm.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||vv()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=fv();c.forEach((e=>{if(!i.has(e)){const r=Uv(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return xp.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return mp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):xp.resolve(dv());let o=-1,a=i;return s.next((t=>xp.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?xp.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,vv()))).next((e=>({batchId:o,changes:hv(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new mp(t)).next((e=>{let t=uv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=uv();return this.indexManager.getCollectionParents(e,i).next((o=>xp.forEach(o,(o=>{const a=function(e,t){return new zg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,hg.newInvalidDocument(r)))}));let n=uv();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&qv(s.mutation,r,Nm.empty(),lp.now()),nv(t,r)&&(n=n.insert(e,r))})),n}))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Sb{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return xp.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ay(e.createTime)}}(t)),xp.resolve()}getNamedQuery(e,t){return xp.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:uw(e.bundledQuery),readTime:Ay(e.readTime)}}(t)),xp.resolve()}}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class kb{constructor(){this.overlays=new Em(mp.comparator),this.hr=new Map}getOverlay(e,t){return xp.resolve(this.overlays.get(t))}getOverlays(e,t){const n=dv();return xp.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),xp.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),xp.resolve()}getOverlaysForCollection(e,t,n){const r=dv(),i=t.length+1,s=new mp(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xp.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Em(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=dv(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=dv(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return xp.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ey(t,n));let i=this.hr.get(t);void 0===i&&(i=vv(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Cb{constructor(){this.Pr=new Cm(xb.Ir),this.Tr=new Cm(xb.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new xb(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new xb(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new mp(new dp([])),n=new xb(t,e),r=new xb(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new mp(new dp([])),n=new xb(t,e),r=new xb(t,e+1);let i=vv();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new xb(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class xb{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return mp.comparator(e.key,t.key)||op(e.pr,t.pr)}static Er(e,t){return op(e.pr,t.pr)||mp.comparator(e.key,t.key)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ab{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Cm(xb.Ir)}checkEmpty(e){return xp.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Xv(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.wr=this.wr.add(new xb(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return xp.resolve(s)}lookupMutationBatch(e,t){return xp.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return xp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xp.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return xp.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xb(t,0),r=new xb(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),xp.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cm(op);return t.forEach((e=>{const t=new xb(e,0),r=new xb(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),xp.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;mp.isDocumentKey(i)||(i=i.child(""));const s=new xb(new mp(i),0);let o=new Cm(op);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),xp.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Gf(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return xp.forEach(t.mutations,(r=>{const i=new xb(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new xb(t,0),r=this.wr.firstAfterOrEqual(n);return xp.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xp.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Nb{constructor(e){this.vr=e,this.docs=new Em(mp.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xp.resolve(n?n.document.mutableCopy():hg.newInvalidDocument(t))}getEntries(e,t){let n=cv();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():hg.newInvalidDocument(e))})),xp.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=cv();const s=t.path,o=new mp(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ep(Ip(o),n)<=0||(r.has(o.key)||nv(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return xp.resolve(i)}getAllFromCollectionGroup(e,t,n,r){zf()}Fr(e,t){return xp.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Db(this)}getSize(e){return xp.resolve(this.size)}}class Db extends pb{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),xp.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Rb{constructor(e){this.persistence=e,this.Mr=new ov((e=>Fg(e)),Vg),this.lastRemoteSnapshotVersion=up.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Cb,this.targetCount=0,this.Lr=rb.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),xp.resolve()}getLastRemoteSnapshotVersion(e){return xp.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xp.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),xp.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),xp.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new rb(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,xp.resolve()}updateTargetData(e,t){return this.qn(t),xp.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,xp.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),xp.waitFor(i).next((()=>r))}getTargetCount(e){return xp.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return xp.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),xp.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),xp.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),xp.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return xp.resolve(n)}containsKey(e,t){return xp.resolve(this.Nr.containsKey(t))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Pb{constructor(e,t){this.Br={},this.overlays={},this.kr=new jp(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Rb(this),this.indexManager=new Vw,this.remoteDocumentCache=function(e){return new Nb(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new nw(t),this.$r=new Sb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Ab(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Uf("MemoryPersistence","Starting transaction:",e);const r=new Ob(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return xp.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Ob extends kp{constructor(e){super(),this.currentSequenceNumber=e}}class $b{constructor(e){this.persistence=e,this.zr=new Cb,this.jr=null}static Hr(e){return new $b(e)}get Jr(){if(this.jr)return this.jr;throw zf()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),xp.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),xp.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),xp.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xp.forEach(this.Jr,(n=>{const r=mp.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,up.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return xp.or([()=>xp.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Lb{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Ap("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qp,{unique:!0}),e.createObjectStore("documentMutations")}(e),Mb(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=xp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Mb(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:up.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qp,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return xp.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:um});t.createIndex("collectionPathOverlayIndex",hm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",dm,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Zp});t.createIndex("documentKeyIndex",em),t.createIndex("collectionGroupIndex",tm)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:om}).createIndex("sequenceNumberIndex",am,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:cm}).createIndex("documentKeyIndex",lm,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=Yw(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>xp.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>xp.forEach(n,(n=>{Gf(n.userId===t.userId);const r=aw(this.serializer,n);return Jw(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new dp(n),o=function(e){return[0,Gp(e)]}(s);r.push(t.get(o).next((n=>n?xp.resolve():(n=>t.put({targetId:0,path:Gp(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>xp.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:sm});const n=t.store("collectionParents"),r=new Uw,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Gp(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new dp(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([e,t,n],r)=>{const s=Wp(t);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=cw(n),i=lw(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new mp(dp.fromString(e.document.name).popFirst(5)):e.noDocument?mp.fromSegments(e.noDocument.path):e.unknownDocument?mp.fromSegments(e.unknownDocument.path):zf()}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>xp.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=gb(this.serializer),i=new Pb($b.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:vv();aw(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),xp.forEach(n,((e,n)=>{const s=new Lf(n),o=vw.lt(this.serializer,s),a=i.getIndexManager(s),c=Xw.lt(s,this.serializer,a,i.referenceDelegate);return new Eb(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new wm(t,jp.oe),e).next()}))}))}}function Mb(e){e.createObjectStore("targetDocuments",{keyPath:rm}).createIndex("documentTargetsIndex",im,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nm,{unique:!0}),e.createObjectStore("targetGlobal")}const Fb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vb{constructor(e,t,n,r,i,s,o,a,c,l,u=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Vb.D())throw new Wf(Hf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new db(this,r),this.Ti=t+"main",this.serializer=new nw(a),this.Ei=new Np(this.Ti,this.ui,new Lb(this.serializer)),this.Qr=new ib(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gb(this.serializer),this.$r=new pw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&jf("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Wf(Hf.FAILED_PRECONDITION,Fb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new jp(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>jb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Op(e))return Uf("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Uf("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Ub(e).get("owner").next((e=>xp.resolve(this.Si(e))))}bi(e){return jb(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=bm(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return xp.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?xp.resolve(!0):Ub(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Wf(Hf.FAILED_PRECONDITION,Fb);return!1}}return!(!this.networkEnabled||!this.inForeground)||jb(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Uf("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new wm(e,jp.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>jb(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Xw.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return vw.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Uf("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?ym:15===e?vm:14===e?gm:13===e?mm:12===e?pm:11===e?fm:void zf()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new wm(r,this.kr?this.kr.next():jp.oe),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw jf(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Wf(Hf.FAILED_PRECONDITION,Sp);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Ub(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Wf(Hf.FAILED_PRECONDITION,Fb)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ub(e).put("owner",t)}static D(){return Np.D()}yi(e){const t=Ub(e);return t.get("owner").next((e=>this.Si(e)?(Uf("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):xp.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t||e>n&&(jf(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Nt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Uf("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return jf("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){jf("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ub(e){return bm(e,"owner")}function jb(e){return bm(e,"clientMetadata")}function qb(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class Bb{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=vv(),r=vv();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Bb(e,t.fromCache,n,r)}}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class zb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Gb{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Nt()?8:Dp(Et())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new zb;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Vf()<=Jt.DEBUG&&Uf("QueryEngine","SDK will not create cache indexes for query:",tv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),xp.resolve()):(Vf()<=Jt.DEBUG&&Uf("QueryEngine","Query:",tv(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Vf()<=Jt.DEBUG&&Uf("QueryEngine","The SDK decides to create cache indexes for query:",tv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jg(t))):xp.resolve())}ji(e,t){if(Hg(t))return xp.resolve(null);let n=Jg(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Xg(t,null,"F"),n=Jg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=vv(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Xg(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Hg(t)||r.isEqual(up.min())?xp.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?xp.resolve(null):(Vf()<=Jt.DEBUG&&Uf("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tv(t)),this.es(e,s,t,_p(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Cm(iv(e));return t.forEach(((t,r)=>{nv(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Vf()<=Jt.DEBUG&&Uf("QueryEngine","Using full collection scan to execute query:",tv(t)),this.zi.getDocumentsMatchingQuery(e,t,Tp.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Kb{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Em(op),this.rs=new ov((e=>Fg(e)),Vg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eb(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Hb(e,t,n,r){return new Kb(e,t,n,r)}async function Wb(e,t){const n=Kf(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=vv();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Qb(e){const t=Kf(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Jb(e,t,n){let r=vv(),i=vv();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=cv();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(up.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Uf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Yb(e,t){const n=Kf(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Xb(e,t){const n=Kf(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,xp.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new tw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Zb(e,t,n){const r=Kf(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Op(e))throw e;Uf("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function e_(e,t,n){const r=Kf(e);let i=up.min(),s=vv();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Kf(e),i=r.rs.get(n);return void 0!==i?xp.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Jg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:up.min(),n?s:vv()))).next((e=>(r_(r,rv(t),e),{documents:e,hs:s})))))}function t_(e,t){const n=Kf(e),r=Kf(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function n_(e,t){const n=Kf(e),r=n.ss.get(t)||up.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,_p(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(r_(n,t,e),e)))}function r_(e,t,n){let r=e.ss.get(t)||up.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function i_(e,t,n=vv()){const r=await Xb(e,Jg(uw(t.bundledQuery))),i=Kf(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Ay(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Rm.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function s_(e,t){return`firestore_clients_${e}_${t}`}function o_(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function a_(e,t){return`firestore_targets_${e}_${t}`}class c_{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Wf(r.error.code,r.error.message))),s?new c_(e,t,r.state,i):(jf("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class l_{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Wf(n.error.code,n.error.message))),i?new l_(e,n.state,r):(jf("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class u_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=wv();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=zp(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new u_(e,i):(jf("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class h_{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new h_(t.clientId,t.onlineState):(jf("SharedClientState",`Failed to parse online state: ${e}`),null)}}class d_{constructor(){this.activeTargetIds=wv()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f_{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Em(op),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=s_(this.persistenceKey,this.Vs),this.Ss=function(e){return`firestore_sequence_number_${e}`}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new d_),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Fs=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const t of e){if(t===this.Vs)continue;const e=this.getItem(s_(this.persistenceKey,t));if(e){const n=u_.Es(t,e);n&&(this.ps=this.ps.insert(n.clientId,n))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const e of this.ys)this.gs(e);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(a_(this.persistenceKey,e));if(n){const r=l_.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(a_(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Uf("SharedClientState","READ",e,t),t}setItem(e,t){Uf("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Uf("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Uf("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void jf("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=jp.oe;if(null!=e)try{const n=JSON.parse(e);Gf("number"==typeof n),t=n}catch(e){jf("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==jp.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new c_(this.currentUser,e,t,n),i=o_(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=o_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=a_(this.persistenceKey,e),i=new l_(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return u_.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return c_.Es(new Lf(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return l_.Es(r,t)}xs(e){return h_.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Uf("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=wv();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class p_{constructor(){this.no=new d_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new d_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class m_{io(e){}shutdown(){}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class g_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Uf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Uf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let v_=null;function y_(){return null===v_?v_=268435456+Math.round(2147483648*Math.random()):v_++,"0x"+v_.toString(16)
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}const w_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class b_{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const __="WebChannelConnection";class I_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So=`projects/${n}/databases/${r}`,this.bo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Do(){return!1}Co(e,t,n,r,i){const s=y_(),o=this.vo(e,t.toUriEncodedString());Uf("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(Uf("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw qf("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=w_[e];return`${this.wo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=y_();return new Promise(((s,o)=>{const a=new Sf;a.setWithCredentials(!0),a.listenOnce(xf.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Af.NO_ERROR:const t=a.getResponseJson();Uf(__,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Af.TIMEOUT:Uf(__,`RPC '${e}' ${i} timed out`),o(new Wf(Hf.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:const n=a.getStatus();if(Uf(__,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Hf).indexOf(t)>=0?t:Hf.UNKNOWN}(t.status);o(new Wf(e,t.message))}else o(new Wf(Hf.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Wf(Hf.UNAVAILABLE,"Connection failed."));break;default:zf()}}finally{Uf(__,`RPC '${e}' ${i} completed.`)}}));const c=JSON.stringify(r);Uf(__,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)}))}Oo(e,t,n){const r=y_(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Pf(),o=Rf(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new kf({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Uf(__,`Creating RPC '${e}' stream ${r}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new b_({lo:t=>{d?Uf(__,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Uf(__,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Uf(__,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Cf.EventType.OPEN,(()=>{d||(Uf(__,`RPC '${e}' stream ${r} transport opened.`),f.mo())})),p(u,Cf.EventType.CLOSE,(()=>{d||(d=!0,Uf(__,`RPC '${e}' stream ${r} transport closed`),f.po())})),p(u,Cf.EventType.ERROR,(t=>{d||(d=!0,qf(__,`RPC '${e}' stream ${r} transport errored:`,t),f.po(new Wf(Hf.UNAVAILABLE,"The operation could not be completed")))})),p(u,Cf.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Gf(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Uf(__,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=ny[e];if(void 0!==t)return sy(t)}(t),i=o.message;void 0===n&&(n=Hf.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new Wf(n,i)),u.close()}else Uf(__,`RPC '${e}' stream ${r} received:`,i),f.yo(i)}})),p(o,Df.STAT_EVENT,(t=>{t.stat===Nf.PROXY?Uf(__,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Nf.NOPROXY&&Uf(__,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function T_(){return"undefined"!=typeof window?window:null}function E_(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function S_(e){return new Ey(e,!0)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class k_{constructor(e,t,n=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&Uf("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class C_{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new k_(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Hf.RESOURCE_EXHAUSTED?(jf(t.toString()),jf("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Hf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.jo===t&&this.u_(e,n)}),(t=>{e((()=>{const e=new Wf(Hf.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return Uf("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(Uf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class x_ extends C_{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zf()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Gf(void 0===t||"string"==typeof t),Rm.fromBase64String(t||"")):(Gf(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Rm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Hf.UNKNOWN:sy(e.code);return new Wf(t,e.message||"")}(o);n=new gy(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oy(e,r.document.name),s=Ay(r.document.updateTime),o=r.document.createTime?Ay(r.document.createTime):up.min(),a=new lg({mapValue:{fields:r.document.fields}}),c=hg.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new py(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Oy(e,r.document),s=r.readTime?Ay(r.readTime):up.min(),o=hg.newNoDocument(i,s),a=r.removedTargetIds||[];n=new py([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Oy(e,r.document),s=r.removedTargetIds||[];n=new py([],s,i,null)}else{if(!("filter"in t))return zf();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ty(r,i),o=e.targetId;n=new my(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return up.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?up.min():t.readTime?Ay(t.readTime):up.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=My(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ug(r)?{documents:By(e,r)}:{query:zy(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Cy(e,t.resumeToken);const r=Sy(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(up.min())>0){n.readTime=ky(e,t.snapshotVersion.toTimestamp());const r=Sy(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zf()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=My(this.serializer),t.removeTarget=e,this.i_(t)}}class A_ extends C_{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Gf(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Gf(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ay(e.updateTime):Ay(t);return n.isEqual(up.min())&&(n=Ay(t)),new Lv(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ay(e.commitTime);return this.listener.A_(n,t)}return Gf(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=My(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>jy(this.serializer,e)))};this.i_(t)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class N_ extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Wf(Hf.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Co(e,Dy(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Hf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wf(Hf.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.xo(e,Dy(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Hf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wf(Hf.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class D_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(jf(t),this.y_=!1):Uf("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class R_{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{j_(this)&&(Uf("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Kf(e);t.M_.add(4),await O_(t),t.N_.set("Unknown"),t.M_.delete(4),await P_(t)}(this))}))})),this.N_=new D_(n,r)}}async function P_(e){if(j_(e))for(const t of e.x_)await t(!0)}async function O_(e){for(const t of e.x_)await t(!1)}function $_(e,t){const n=Kf(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),U_(n)?V_(n):oI(n).Xo()&&M_(n,t))}function L_(e,t){const n=Kf(e),r=oI(n);n.F_.delete(t),r.Xo()&&F_(n,t),0===n.F_.size&&(r.Xo()?r.n_():j_(n)&&n.N_.set("Unknown"))}function M_(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(up.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}oI(e).P_(t)}function F_(e,t){e.L_.xe(t),oI(e).I_(t)}function V_(e){e.L_=new yy({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),oI(e).start(),e.N_.w_()}function U_(e){return j_(e)&&!oI(e).Zo()&&e.F_.size>0}function j_(e){return 0===Kf(e).M_.size}function q_(e){e.L_=void 0}async function B_(e){e.N_.set("Online")}async function z_(e){e.F_.forEach(((t,n)=>{M_(e,t)}))}async function G_(e,t){q_(e),U_(e)?(e.N_.D_(t),V_(e)):e.N_.set("Unknown")}async function K_(e,t,n){if(e.N_.set("Online"),t instanceof gy&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Uf("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await H_(e,n)}else if(t instanceof py?e.L_.Ke(t):t instanceof my?e.L_.He(t):e.L_.We(t),!n.isEqual(up.min()))try{const t=await Qb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Rm.EMPTY_BYTE_STRING,r.snapshotVersion)),F_(e,t);const i=new tw(r.target,t,n,r.sequenceNumber);M_(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Uf("RemoteStore","Failed to raise snapshot:",t),await H_(e,t)}}async function H_(e,t,n){if(!Op(t))throw t;e.M_.add(1),await O_(e),e.N_.set("Offline"),n||(n=()=>Qb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Uf("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await P_(e)}))}function W_(e,t){return t().catch((n=>H_(e,n,t)))}async function Q_(e){const t=Kf(e),n=aI(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;J_(t);)try{const e=await Yb(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,Y_(t,e)}catch(e){await H_(t,e)}X_(t)&&Z_(t)}function J_(e){return j_(e)&&e.v_.length<10}function Y_(e,t){e.v_.push(t);const n=aI(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function X_(e){return j_(e)&&!aI(e).Zo()&&e.v_.length>0}function Z_(e){aI(e).start()}async function eI(e){aI(e).V_()}async function tI(e){const t=aI(e);for(const n of e.v_)t.d_(n.mutations)}async function nI(e,t,n){const r=e.v_.shift(),i=Zv.from(r,t,n);await W_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Q_(e)}async function rI(e,t){t&&aI(e).E_&&await async function(e,t){if(function(e){return iy(e)&&e!==Hf.ABORTED}(t.code)){const n=e.v_.shift();aI(e).t_(),await W_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Q_(e)}}(e,t),X_(e)&&Z_(e)}async function iI(e,t){const n=Kf(e);n.asyncQueue.verifyOperationInProgress(),Uf("RemoteStore","RemoteStore received new credentials");const r=j_(n);n.M_.add(3),await O_(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await P_(n)}async function sI(e,t){const n=Kf(e);t?(n.M_.delete(2),await P_(n)):t||(n.M_.add(2),await O_(n),n.N_.set("Unknown"))}function oI(e){return e.B_||(e.B_=function(e,t,n){const r=Kf(e);return r.f_(),new x_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}(e.datastore,e.asyncQueue,{Po:B_.bind(null,e),To:z_.bind(null,e),Ao:G_.bind(null,e),h_:K_.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),U_(e)?V_(e):e.N_.set("Unknown")):(await e.B_.stop(),q_(e))}))),e.B_}function aI(e){return e.k_||(e.k_=function(e,t,n){const r=Kf(e);return r.f_(),new A_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:eI.bind(null,e),Ao:rI.bind(null,e),R_:tI.bind(null,e),A_:nI.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await Q_(e)):(await e.k_.stop(),e.v_.length>0&&(Uf("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class cI{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Qf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new cI(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wf(Hf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lI(e,t){if(jf("AsyncQueue",`${t}: ${e}`),Op(e))return new Wf(Hf.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class uI{constructor(e){this.comparator=e?(t,n)=>e(t,n)||mp.comparator(t.key,n.key):(e,t)=>mp.comparator(e.key,t.key),this.keyedMap=uv(),this.sortedSet=new Em(this.comparator)}static emptySet(e){return new uI(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uI))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new uI;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class hI{constructor(){this.q_=new Em(mp.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):zf():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class dI{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new dI(e,t,uI.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class fI{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class pI{constructor(){this.queries=new ov((e=>ev(e)),Zg),this.onlineState="Unknown",this.z_=new Set}}async function mI(e,t){const n=Kf(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new fI,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=lI(e,`Initialization of query '${tv(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&wI(n)}async function gI(e,t){const n=Kf(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vI(e,t){const n=Kf(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.U_)t.H_(e)&&(r=!0);i.K_=e}}r&&wI(n)}function yI(e,t,n){const r=Kf(e),i=r.queries.get(t);if(i)for(const e of i.U_)e.onError(n);r.queries.delete(t)}function wI(e){e.z_.forEach((e=>{e.next()}))}var bI,_I;(_I=bI||(bI={})).J_="default",_I.Cache="cache";class II{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new dI(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=dI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==bI.Cache}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class TI{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class EI{constructor(e){this.serializer=e}Ps(e){return Oy(this.serializer,e)}Is(e){return e.metadata.exists?Uy(this.serializer,e.document,!1):hg.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ay(e)}}class SI{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kI(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=dp.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new EI(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||vv()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Kf(e);let s=vv(),o=cv();for(const e of n){const n=t.Ps(e.metadata.name);e.document&&(s=s.add(n));const r=t.Is(e);r.setReadTime(t.Ts(e.metadata.readTime)),o=o.insert(n,r)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await Xb(i,function(e){return Jg(Kg(dp.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Jb(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new EI(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const e of this.queries)await i_(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function kI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class CI{constructor(e){this.key=e}}class xI{constructor(e){this.key=e}}class AI{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=vv(),this.mutatedKeys=vv(),this.Ia=iv(e),this.Ta=new uI(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new hI,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=nv(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||c&&this.Ia(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zf()}};return n(e)-n(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,c=a!==this.ha;return this.ha=a,0!==s.length||c?{snapshot:new dI(this.query,e.Ta,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new hI,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=vv(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new xI(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new CI(n))})),t}pa(e){this.la=e.hs,this.Pa=vv();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return dI.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class NI{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class DI{constructor(e){this.key=e,this.wa=!1}}class RI{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new ov((e=>ev(e)),Zg),this.Da=new Map,this.Ca=new Set,this.va=new Em(mp.comparator),this.Fa=new Map,this.Ma=new Cb,this.xa={},this.Oa=new Map,this.Na=rb.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function PI(e,t,n=!0){const r=cT(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await $I(r,t,n,!0),i}async function OI(e,t){const n=cT(e);await $I(n,t,!0,!1)}async function $I(e,t,n,r){const i=await Xb(e.localStore,Jg(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await LI(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&$_(e.remoteStore,i),a}async function LI(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await e_(e.localStore,t.query,!1).then((({documents:e})=>t.view.da(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return WI(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await e_(e.localStore,t,!0),o=new AI(t,s.hs),a=o.da(s.documents),c=fy.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);WI(e,n,l.fa);const u=new NI(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function MI(e,t,n){const r=Kf(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!Zg(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zb(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&L_(r.remoteStore,i.targetId),KI(r,i.targetId)})).catch(Cp)):(KI(r,i.targetId),await Zb(r.localStore,i.targetId,!0))}async function FI(e,t){const n=Kf(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),L_(n.remoteStore,r.targetId))}async function VI(e,t){const n=Kf(e);try{const e=await function(e,t){const n=Kf(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Rm.EMPTY_BYTE_STRING,up.min()).withLastLimboFreeSnapshotVersion(up.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=cv(),c=vv();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Jb(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(up.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return xp.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Gf(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Gf(r.wa):e.removedDocuments.size>0&&(Gf(r.wa),r.wa=!1))})),await YI(n,e,t)}catch(e){await Cp(e)}}function UI(e,t,n){const r=Kf(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Kf(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.U_)e.j_(t)&&(r=!0)})),r&&wI(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function jI(e,t,n){const r=Kf(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new Em(mp.comparator);e=e.insert(s,hg.newNoDocument(s,up.min()));const n=vv().add(s),i=new dy(up.min(),new Map,new Em(op),e,n);await VI(r,i),r.va=r.va.remove(s),r.Fa.delete(t),JI(r)}else await Zb(r.localStore,t,!1).then((()=>KI(r,t,n))).catch(Cp)}async function qI(e,t){const n=Kf(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Kf(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=xp.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Gf(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=vv();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);GI(n,r,null),zI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await YI(n,e)}catch(e){await Cp(e)}}async function BI(e,t,n){const r=Kf(e);try{const e=await function(e,t){const n=Kf(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Gf(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);GI(r,t,n),zI(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await YI(r,e)}catch(n){await Cp(n)}}function zI(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function GI(e,t,n){const r=Kf(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function KI(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||HI(e,t)}))}function HI(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(L_(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),JI(e))}function WI(e,t,n){for(const r of n)r instanceof CI?(e.Ma.addReference(r.key,t),QI(e,r)):r instanceof xI?(Uf("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||HI(e,r.key)):zf()}function QI(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Uf("SyncEngine","New document in limbo: "+n),e.Ca.add(r),JI(e))}function JI(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new mp(dp.fromString(t)),r=e.Na.next();e.Fa.set(r,new DI(n)),e.va=e.va.insert(n,r),$_(e.remoteStore,new tw(Jg(Kg(n.path)),r,"TargetPurposeLimboResolution",jp.oe))}}async function YI(e,t,n){const r=Kf(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){const t=e&&!e.fromCache;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=Bb.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=Kf(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>xp.forEach(t,(t=>xp.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>xp.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Op(e))throw e;Uf("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ns.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(t,i)}}}(r.localStore,s))}async function XI(e,t){const n=Kf(e);if(!n.currentUser.isEqual(t)){Uf("SyncEngine","User change. New user:",t.toKey());const e=await Wb(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Wf(Hf.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await YI(n,e.us)}}function ZI(e,t){const n=Kf(e),r=n.Fa.get(t);if(r&&r.wa)return vv().add(r.key);{let e=vv();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function eT(e,t){const n=Kf(e),r=await e_(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&WI(n,t.targetId,i.fa),i}async function tT(e,t){const n=Kf(e);return n_(n.localStore,t).then((e=>YI(n,e)))}async function nT(e,t,n,r){const i=Kf(e),s=await function(e,t){const n=Kf(e),r=Kf(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):xp.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Q_(i.remoteStore):"acknowledged"===n||"rejected"===n?(GI(i,t,r||null),zI(i,t),function(e,t){Kf(Kf(e).mutationQueue).Mn(t)}(i.localStore,t)):zf(),await YI(i,s)):Uf("SyncEngine","Cannot apply mutation batch with id: "+t)}async function rT(e,t,n){const r=Kf(e),i=[],s=[];for(const e of t){let t;const n=r.Da.get(e);if(n&&0!==n.length){t=await Xb(r.localStore,Jg(n[0]));for(const e of n){const t=r.ba.get(e),n=await eT(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await t_(r.localStore,e);t=await Xb(r.localStore,n),await LI(r,iT(n),e,!1,t.resumeToken)}i.push(t)}return r.Sa.h_(s),i}function iT(e){return Gg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sT(e){return function(e){return Kf(Kf(e).persistence).Bi()}(Kf(e).localStore)}async function oT(e,t,n,r){const i=Kf(e);if(i.La)return void Uf("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await n_(i.localStore,rv(s[0])),r=dy.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Rm.EMPTY_BYTE_STRING);await YI(i,e,r);break}case"rejected":await Zb(i.localStore,t,!0),KI(i,t,r);break;default:zf()}}async function aT(e,t,n){const r=cT(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Uf("SyncEngine","Adding an already active target "+e);continue}const t=await t_(r.localStore,e),n=await Xb(r.localStore,t);await LI(r,iT(t),n.targetId,!1,n.resumeToken),$_(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await Zb(r.localStore,e,!1).then((()=>{L_(r.remoteStore,e),KI(r,e)})).catch(Cp)}}function cT(e){const t=Kf(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=VI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jI.bind(null,t),t.Sa.h_=vI.bind(null,t.eventManager),t.Sa.ka=yI.bind(null,t.eventManager),t}function lT(e){const t=Kf(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=BI.bind(null,t),t}class uT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=S_(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Hb(this.persistence,new Gb,e.initialUser,this.serializer)}createPersistence(e){return new Pb($b.Hr,this.serializer)}createSharedClientState(e){return new p_}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hT extends uT{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await lT(this.Qa.syncEngine),await Q_(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Hb(this.persistence,new Gb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new ub(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Up(t,this.persistence);return new Vp(e.asyncQueue,n)}createPersistence(e){const t=qb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qw.withCacheSize(this.cacheSizeBytes):Qw.DEFAULT;return new Vb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,T_(),E_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new p_}}class dT extends hT{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof f_&&(this.sharedClientState.syncEngine={Zs:nT.bind(null,t),Xs:oT.bind(null,t),eo:aT.bind(null,t),Bi:sT.bind(null,t),Ys:tT.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Kf(e);if(cT(n),lT(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await rT(n,e.toArray());n.La=!0,await sI(n.remoteStore,!0);for(const e of t)$_(n.remoteStore,e)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(KI(n,i),Zb(n.localStore,i,!0)))),L_(n.remoteStore,i)})),await t,await rT(n,e),function(e){const t=Kf(e);t.Fa.forEach(((e,n)=>{L_(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new Em(mp.comparator)}(n),n.La=!1,await sI(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=T_();if(!f_.D(t))throw new Wf(Hf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=qb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new f_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class fT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>UI(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=XI.bind(null,this.syncEngine),await sI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pI}createDatastore(e){const t=S_(e.databaseInfo.databaseId),n=function(e){return new I_(e)}(e.databaseInfo);return function(e,t,n,r){return new N_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new R_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>UI(this.syncEngine,e,0)),g_.D()?new g_:new m_)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new RI(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Kf(e);Uf("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await O_(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pT(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class mT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):jf("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class gT{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Qf,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.ia)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja(`length string (${t}) is not valid number`);const r=await this.Ha(n);return new TI(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class vT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Wf(Hf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Kf(e),r={documents:t.map((e=>Py(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,dp.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Gf(!!t.found),t.found.name,t.found.updateTime;const n=Oy(e,t.found.name),r=Ay(t.found.updateTime),i=t.found.createTime?Ay(t.found.createTime):up.min(),s=new lg({mapValue:{fields:t.found.fields}});return hg.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Gf(!!t.missing),Gf(!!t.readTime);const n=Oy(e,t.missing),r=Ay(t.readTime);return hg.newNoDocument(n,r)}(e,t):zf()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Gf(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=mp.fromPath(t);this.mutations.push(new Yv(n,this.precondition(n)))})),await async function(e,t){const n=Kf(e),r={writes:t.map((e=>jy(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,dp.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zf();t=up.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Wf(Hf.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(up.min())?Mv.exists(!1):Mv.updateTime(t):Mv.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(up.min()))throw new Wf(Hf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mv.updateTime(t)}return Mv.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class yT{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new k_(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new vT(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!qp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!iy(t)}return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class wT{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Lf.UNAUTHENTICATED,this.clientId=sp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Uf("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Uf("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Wf(Hf.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=lI(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function bT(e,t){e.asyncQueue.verifyOperationInProgress(),Uf("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Wb(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function _T(e,t){e.asyncQueue.verifyOperationInProgress();const n=await TT(e);Uf("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>iI(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>iI(t.remoteStore,n))),e._onlineComponents=t}function IT(e){return"FirebaseError"===e.name?e.code===Hf.FAILED_PRECONDITION||e.code===Hf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function TT(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Uf("FirestoreClient","Using user provided OfflineComponentProvider");try{await bT(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!IT(n))throw n;qf("Error using user provided cache. Falling back to memory cache: "+n),await bT(e,new uT)}}else Uf("FirestoreClient","Using default OfflineComponentProvider"),await bT(e,new uT);return e._offlineComponents}async function ET(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Uf("FirestoreClient","Using user provided OnlineComponentProvider"),await _T(e,e._uninitializedComponentsProvider._online)):(Uf("FirestoreClient","Using default OnlineComponentProvider"),await _T(e,new fT))),e._onlineComponents}function ST(e){return TT(e).then((e=>e.persistence))}function kT(e){return TT(e).then((e=>e.localStore))}function CT(e){return ET(e).then((e=>e.remoteStore))}function xT(e){return ET(e).then((e=>e.syncEngine))}async function AT(e){const t=await ET(e),n=t.eventManager;return n.onListen=PI.bind(null,t.syncEngine),n.onUnlisten=MI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=OI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=FI.bind(null,t.syncEngine),n}function NT(e,t,n={}){const r=new Qf;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new mT({next:s=>{t.enqueueAndForget((()=>gI(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Wf(Hf.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Wf(Hf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new II(Kg(n.path),s,{includeMetadataChanges:!0,ra:!0});return mI(e,o)}(await AT(e),e.asyncQueue,t,n,r))),r.promise}function DT(e,t,n={}){const r=new Qf;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new mT({next:n=>{t.enqueueAndForget((()=>gI(e,o))),n.fromCache&&"server"===r.source?i.reject(new Wf(Hf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new II(n,s,{includeMetadataChanges:!0,ra:!0});return mI(e,o)}(await AT(e),e.asyncQueue,t,n,r))),r.promise}function RT(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?oy().encode(e):e,function(e,t){return new gT(e,t)}(function(e,t){if(e instanceof Uint8Array)return pT(e,t);if(e instanceof ArrayBuffer)return pT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,S_(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Kf(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Kf(e),r=Ay(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(kI(r));const i=new SI(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await YI(e,o.ca,void 0),await function(e,t){const n=Kf(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return qf("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */)(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await xT(e),i,r)}))}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function PT(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}const OT=new Map;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $T(e,t,n){if(!n)throw new Wf(Hf.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function LT(e,t,n,r){if(!0===t&&!0===r)throw new Wf(Hf.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function MT(e){if(!mp.isDocumentKey(e))throw new Wf(Hf.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function FT(e){if(mp.isDocumentKey(e))throw new Wf(Hf.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function VT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":zf()}function UT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wf(Hf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=VT(e);throw new Wf(Hf.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function jT(e,t){if(t<=0)throw new Wf(Hf.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class qT{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Wf(Hf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Wf(Hf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PT(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Wf(Hf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Wf(Hf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Wf(Hf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class BT{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Wf(Hf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Wf(Hf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Yf;switch(e.type){case"firstParty":return new tp(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Wf(Hf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=OT.get(e);t&&(Uf("ComponentProvider","Removing Datastore"),OT.delete(e),t.terminate())}(this),Promise.resolve()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let zT=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},GT=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new KT(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},KT=class e extends zT{constructor(e,t,n){super(e,t,Kg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new GT(this.firestore,null,new mp(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function HT(e,t,...n){if(e=zt(e),$T("collection","path",t),e instanceof BT){const r=dp.fromString(t,...n);return FT(r),new KT(e,null,r)}{if(!(e instanceof GT||e instanceof KT))throw new Wf(Hf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(dp.fromString(t,...n));return FT(r),new KT(e.firestore,null,r)}}function WT(e,t,...n){if(e=zt(e),1===arguments.length&&(t=sp.newId()),$T("doc","path",t),e instanceof BT){const r=dp.fromString(t,...n);return MT(r),new GT(e,null,new mp(r))}{if(!(e instanceof GT||e instanceof KT))throw new Wf(Hf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(dp.fromString(t,...n));return MT(r),new GT(e.firestore,e instanceof KT?e.converter:null,new mp(r))}}function QT(e,t){return e=zt(e),t=zt(t),(e instanceof GT||e instanceof KT)&&(t instanceof GT||t instanceof KT)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function JT(e,t){return e=zt(e),t=zt(t),e instanceof zT&&t instanceof zT&&e.firestore===t.firestore&&Zg(e._query,t._query)&&e.converter===t.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class YT{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new k_(this,"async_queue_retry"),this.hu=()=>{const e=E_();e&&Uf("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=E_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=E_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Qf;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Op(e))throw e;Uf("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e);throw jf("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=cI.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&zf()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function XT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of t)if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e,["next","error","complete"])}class ZT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let eE=class extends BT{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new YT,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||nE(this),this._firestoreClient.terminate()}};function tE(e){return e._firestoreClient||nE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function nE(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Um(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,PT(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new wT(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function rE(e,t,n){const r=new Qf;return e.asyncQueue.enqueue((async()=>{try{await bT(e,n),await _T(e,t),r.resolve()}catch(e){const t=e;if(!IT(t))throw t;qf("Error enabling indexeddb cache. Falling back to memory cache: "+t),r.reject(t)}})).then((()=>r.promise))}function iE(e){return function(e){const t=new Qf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Kf(e);j_(n.remoteStore)||Uf("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Kf(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=lI(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await xT(e),t))),t.promise}(tE(e=UT(e,eE)))}function sE(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await ST(e),n=await CT(e);return t.setNetworkEnabled(!0),function(e){const t=Kf(e);return t.M_.delete(0),P_(t)}(n)}))}(tE(e=UT(e,eE)))}function oE(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await ST(e),n=await CT(e);return t.setNetworkEnabled(!1),async function(e){const t=Kf(e);t.M_.add(0),await O_(t),t.N_.set("Offline")}(n)}))}(tE(e=UT(e,eE)))}function aE(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Kf(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await kT(e),t)))}(tE(e=UT(e,eE)),t).then((t=>t?new zT(e,null,t.query):null))}function cE(e){if(e._initialized||e._terminated)throw new Wf(Hf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class lE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lE(Rm.fromBase64String(e))}catch(e){throw new Wf(Hf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new lE(Rm.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let uE=class{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Wf(Hf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pp(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},hE=class{constructor(e){this._methodName=e}};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class dE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wf(Hf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wf(Hf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return op(this._lat,e._lat)||op(this._long,e._long)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const fE=/^__.*__$/;class pE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Kv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gv(e,this.data,t,this.fieldTransforms)}}class mE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Kv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zf()}}class vE{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new vE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ME(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(gE(this.fu)&&fE.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class yE{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||S_(e)}Fu(e,t,n,r=!1){return new vE({fu:e,methodName:t,vu:n,path:pp.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wE(e){const t=e._freezeSettings(),n=S_(e._databaseId);return new yE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bE(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);PE("Data must be an object, but it was:",o,r);const a=DE(r,o);let c,l;if(s.merge)c=new Nm(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=OE(t,r,n);if(!o.contains(i))throw new Wf(Hf.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);FE(e,i)||e.push(i)}c=new Nm(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new pE(new lg(a),c,l)}class _E extends hE{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _E}}function IE(e,t,n){return new vE({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class TE extends hE{_toFieldTransform(e){return new $v(e.path,new Cv)}isEqual(e){return e instanceof TE}}class EE extends hE{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=IE(this,e,!0),n=this.Mu.map((e=>NE(e,t))),r=new xv(n);return new $v(e.path,r)}isEqual(e){return e instanceof EE&&Lt(this.Mu,e.Mu)}}class SE extends hE{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=IE(this,e,!0),n=this.Mu.map((e=>NE(e,t))),r=new Nv(n);return new $v(e.path,r)}isEqual(e){return e instanceof SE&&Lt(this.Mu,e.Mu)}}class kE extends hE{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Rv(e.serializer,Iv(e.serializer,this.xu));return new $v(e.path,t)}isEqual(e){return e instanceof kE&&this.xu===e.xu}}function CE(e,t,n,r){const i=e.Fu(1,t,n);PE("Data must be an object, but it was:",i,r);const s=[],o=lg.empty();Im(r,((e,r)=>{const a=LE(t,e,n);r=zt(r);const c=i.Su(a);if(r instanceof _E)s.push(a);else{const e=NE(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Nm(s);return new mE(o,a,i.fieldTransforms)}function xE(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[OE(t,r,n)],c=[i];if(s.length%2!=0)throw new Wf(Hf.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(OE(t,s[e])),c.push(s[e+1]);const l=[],u=lg.empty();for(let e=a.length-1;e>=0;--e)if(!FE(l,a[e])){const t=a[e];let n=c[e];n=zt(n);const r=o.Su(t);if(n instanceof _E)l.push(t);else{const e=NE(n,r);null!=e&&(l.push(t),u.set(t,e))}}const h=new Nm(l);return new mE(u,h,o.fieldTransforms)}function AE(e,t,n,r=!1){return NE(n,e.Fu(r?4:3,t))}function NE(e,t){if(RE(e=zt(e)))return PE("Unsupported field value:",t,e),DE(e,t);if(e instanceof hE)return function(e,t){if(!gE(t.fu))throw t.Du(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Du(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=NE(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=zt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Iv(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=lp.fromDate(e);return{timestampValue:ky(t.serializer,n)}}if(e instanceof lp){const n=new lp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ky(t.serializer,n)}}if(e instanceof dE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lE)return{bytesValue:Cy(t.serializer,e._byteString)};if(e instanceof GT){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ny(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du(`Unsupported field value: ${VT(e)}`)}(e,t)}function DE(e,t){const n={};return Tm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Im(e,((e,r)=>{const i=NE(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function RE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof lp||e instanceof dE||e instanceof lE||e instanceof GT||e instanceof hE)}function PE(e,t,n){if(!RE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=VT(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function OE(e,t,n){if((t=zt(t))instanceof uE)return t._internalPath;if("string"==typeof t)return LE(e,t);throw ME("Field path arguments must be of type string or ",e,!1,void 0,n)}const $E=new RegExp("[~\\*/\\[\\]]");function LE(e,t,n){if(t.search($E)>=0)throw ME(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new uE(...t.split("."))._internalPath}catch(r){throw ME(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ME(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Wf(Hf.INVALID_ARGUMENT,a+e+c)}function FE(e,t){return e.some((e=>e.isEqual(t)))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class VE{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new GT(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new UE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class UE extends VE{data(){return super.data()}}function jE(e,t){return"string"==typeof t?LE(e,t):t instanceof uE?t._internalPath:t._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Wf(Hf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BE{}class zE extends BE{}function GE(e,t,...n){let r=[];t instanceof BE&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof HE)).length,n=e.filter((e=>e instanceof KE)).length;if(t>1||t>0&&n>0)throw new Wf(Hf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(r);for(const t of r)e=t._apply(e);return e}class KE extends zE{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new KE(e,t,n)}_apply(e){const t=this._parse(e);return tS(e._query,t),new zT(e.firestore,e.converter,Yg(e._query,t))}_parse(e){const t=wE(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Wf(Hf.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){eS(o,s);const t=[];for(const n of o)t.push(ZE(r,e,n));a={arrayValue:{values:t}}}else a=ZE(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||eS(o,s),a=AE(n,t,o,"in"===s||"not-in"===s);return yg.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class HE extends BE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new HE(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:wg.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)tS(n,e),n=Yg(n,e)}(e._query,t),new zT(e.firestore,e.converter,Yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class WE extends zE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new WE(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Wf(Hf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Wf(Hf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mg(t,n)}(e._query,this._field,this._direction);return new zT(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new zg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class QE extends zE{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new QE(e,t,n)}_apply(e){return new zT(e.firestore,e.converter,Xg(e._query,this._limit,this._limitType))}}class JE extends zE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new JE(e,t,n)}_apply(e){const t=XE(e,this.type,this._docOrFields,this._inclusive);return new zT(e.firestore,e.converter,function(e,t){return new zg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class YE extends zE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new YE(e,t,n)}_apply(e){const t=XE(e,this.type,this._docOrFields,this._inclusive);return new zT(e.firestore,e.converter,function(e,t){return new zg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function XE(e,t,n,r){if(n[0]=zt(n[0]),n[0]instanceof VE)return function(e,t,n,r,i){if(!r)throw new Wf(Hf.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of Qg(e))if(n.field.isKeyField())s.push(Ym(t,r.key));else{const e=r.data.field(n.field);if(Mm(e))throw new Wf(Hf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new Wf(Hf.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new dg(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=wE(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Wf(Hf.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Wf(Hf.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof c}`);if(!Wg(e)&&-1!==c.indexOf("/"))throw new Wf(Hf.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${c}' contains a slash.`);const n=e.path.child(dp.fromString(c));if(!mp.isDocumentKey(n))throw new Wf(Hf.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new mp(n);a.push(Ym(t,i))}else{const e=AE(n,r,c);a.push(e)}}return new dg(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function ZE(e,t,n){if("string"==typeof(n=zt(n))){if(""===n)throw new Wf(Hf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wg(t)&&-1!==n.indexOf("/"))throw new Wf(Hf.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(dp.fromString(n));if(!mp.isDocumentKey(r))throw new Wf(Hf.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ym(e,new mp(r))}if(n instanceof GT)return Ym(e,n._key);throw new Wf(Hf.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VT(n)}.`)}function eS(e,t){if(!Array.isArray(e)||0===e.length)throw new Wf(Hf.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function tS(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Wf(Hf.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Wf(Hf.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class nS{convertValue(e,t="none"){switch(zm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $m(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zf()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Im(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new dE($m(e.latitude),$m(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vm(e));default:return null}}convertTimestamp(e){const t=Om(e);return new lp(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=dp.fromString(e);Gf(ew(n));const r=new jm(n.get(1),n.get(3)),i=new mp(n.popFirst(5));return r.isEqual(t)||jf(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rS(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class iS extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new lE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new GT(this.firestore,null,t)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class sS{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let oS=class extends VE{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new aS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(jE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}},aS=class extends oS{data(e={}){return super.data(e)}},cS=class{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new sS(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new aS(this._firestore,this._userDataWriter,n.key,n,new sS(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Wf(Hf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new aS(e._firestore,e._userDataWriter,n.doc.key,n.doc,new sS(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new aS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new sS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:lS(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function lS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zf()}}function uS(e,t){return e instanceof oS&&t instanceof oS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof cS&&t instanceof cS&&e._firestore===t._firestore&&JT(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class hS extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new lE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new GT(this.firestore,null,t)}}function dS(e){e=UT(e,GT);const t=UT(e.firestore,eE),n=tE(t),r=new hS(t);return function(e,t){const n=new Qf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Kf(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Wf(Hf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=lI(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await kT(e),t,n))),n.promise}(n,e._key).then((n=>new oS(t,r,e._key,n,new sS(null!==n&&n.hasLocalMutations,!0),e.converter)))}function fS(e){e=UT(e,zT);const t=UT(e.firestore,eE),n=tE(t),r=new hS(t);return function(e,t){const n=new Qf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await e_(e,t,!0),i=new AI(t,r.hs),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=lI(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await kT(e),t,n))),n.promise}(n,e._query).then((n=>new cS(t,r,e,n)))}function pS(e,t,n){e=UT(e,GT);const r=UT(e.firestore,eE),i=rS(e.converter,t,n);return yS(r,[bE(wE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Mv.none())])}function mS(e,t,n,...r){e=UT(e,GT);const i=UT(e.firestore,eE),s=wE(i);let o;return o="string"==typeof(t=zt(t))||t instanceof uE?xE(s,"updateDoc",e._key,t,n,r):CE(s,"updateDoc",e._key,t),yS(i,[o.toMutation(e._key,Mv.exists(!0))])}function gS(e,...t){var n,r,i;e=zt(e);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||XT(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(XT(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,l,u;if(e instanceof GT)l=UT(e.firestore,eE),u=Kg(e._key.path),c={next:n=>{t[o]&&t[o](wS(l,e,n))},error:t[o+1],complete:t[o+2]};else{const n=UT(e,zT);l=UT(n.firestore,eE),u=n._query;const r=new hS(l);c={next:e=>{t[o]&&t[o](new cS(l,r,n,e))},error:t[o+1],complete:t[o+2]},qE(e._query)}return function(e,t,n,r){const i=new mT(r),s=new II(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>mI(await AT(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>gI(await AT(e),s)))}}(tE(l),u,a,c)}function vS(e,t){return function(e,t){const n=new mT(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Kf(e).z_.add(t),t.next()}(await AT(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Kf(e).z_.delete(t)}(await AT(e),n)))}}(tE(e=UT(e,eE)),XT(t)?t:{next:t})}function yS(e,t){return function(e,t){const n=new Qf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=lT(e);try{const e=await function(e,t){const n=Kf(e),r=lp.now(),i=t.reduce(((e,t)=>e.add(t.key)),vv());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=cv(),c=vv();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Bv(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Kv(e.key,t,ug(t.value.mapValue),Mv.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:hv(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Em(op)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await YI(r,e.changes),await Q_(r.remoteStore)}catch(e){const t=lI(e,"Failed to persist write");n.reject(t)}}(await xT(e),t,n))),n.promise}(tE(e),t)}function wS(e,t,n){const r=n.docs.get(t._key),i=new hS(e);return new oS(e,i,t._key,r,new sS(n.hasPendingWrites,n.fromCache),t.converter)}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const bS={maxAttempts:5};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let _S=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wE(e)}set(e,t,n){this._verifyNotCommitted();const r=IS(e,this._firestore),i=rS(r.converter,t,n),s=bE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Mv.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=IS(e,this._firestore);let s;return s="string"==typeof(t=zt(t))||t instanceof uE?xE(this._dataReader,"WriteBatch.update",i._key,t,n,r):CE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Mv.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=IS(e,this._firestore);return this._mutations=this._mutations.concat(new Jv(t._key,Mv.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wf(Hf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function IS(e,t){if((e=zt(e)).firestore!==t)throw new Wf(Hf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let TS=class extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wE(e)}get(e){const t=IS(e,this._firestore),n=new iS(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return zf();const r=e[0];if(r.isFoundDocument())return new VE(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new VE(this._firestore,n,t._key,null,t.converter);throw zf()}))}set(e,t,n){const r=IS(e,this._firestore),i=rS(r.converter,t,n),s=bE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=IS(e,this._firestore);let s;return s="string"==typeof(t=zt(t))||t instanceof uE?xE(this._dataReader,"Transaction.update",i._key,t,n,r):CE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=IS(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=IS(e,this._firestore),n=new hS(this._firestore);return super.get(e).then((e=>new oS(this._firestore,n,t._key,e._document,new sS(!1,!1),t.converter)))}};function ES(e,t,n){e=UT(e,eE);const r=Object.assign(Object.assign({},bS),n);return function(e){if(e.maxAttempts<1)throw new Wf(Hf.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Qf;return e.asyncQueue.enqueueAndForget((async()=>{const i=await function(e){return ET(e).then((e=>e.datastore))}(e);new yT(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(tE(e),(n=>t(new TS(e,n))),r)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(e,t=!0){!function(e){Mf=e}(lr),nr(new Gt("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new eE(new Zf(e.getProvider("auth-internal")),new rp(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wf(Hf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jm(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),fr($f,"4.6.3",e),fr($f,"4.6.3","esm2017")}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function SS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Wf("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kS(){if("undefined"==typeof Uint8Array)throw new Wf("unimplemented","Uint8Arrays are not available in this environment.")}function CS(){if("undefined"==typeof atob)throw new Wf("unimplemented","Blobs are unavailable in Firestore in this environment.")}let xS=class e{constructor(e){this._delegate=e}static fromBase64String(t){return CS(),new e(lE.fromBase64String(t))}static fromUint8Array(t){return kS(),new e(lE.fromUint8Array(t))}toBase64(){return CS(),this._delegate.toBase64()}toUint8Array(){return kS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function AS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of t)if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e,["next","error","complete"])}class NS{enableIndexedDbPersistence(e,t){return function(e,t){cE(e=UT(e,eE));const n=tE(e);if(n._uninitializedComponentsProvider)throw new Wf(Hf.FAILED_PRECONDITION,"SDK cache is already specified.");qf("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new fT;return rE(n,i,new hT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){cE(e=UT(e,eE));const t=tE(e);if(t._uninitializedComponentsProvider)throw new Wf(Hf.FAILED_PRECONDITION,"SDK cache is already specified.");qf("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new fT;return rE(t,r,new dT(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Wf(Hf.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Qf;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Np.D())return Promise.resolve();const t=e+"main";await Np.delete(t)}(qb(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class DS{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof jm||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||qf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=UT(e,BT))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&qf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Lf.MOCK_USER;else{t=Tt(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Wf(Hf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Lf(s)}e._authCredentials=new Xf(new Jf(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return sE(this._delegate)}disableNetwork(){return oE(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,LT("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iE(this._delegate)}onSnapshotsInSync(e){return vS(this._delegate,e)}get app(){if(!this._appCompat)throw new Wf("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new GS(this,HT(this._delegate,e))}catch(e){throw MS(e,"collection()","Firestore.collection()")}}doc(e){try{return new LS(this,WT(this._delegate,e))}catch(e){throw MS(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qS(this,function(e,t){if(e=UT(e,BT),$T("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Wf(Hf.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zT(e,null,function(e){return new zg(dp.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw MS(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ES(this._delegate,(t=>e(new PS(this,t))))}batch(){return tE(this._delegate),new OS(new _S(this._delegate,(e=>yS(this._delegate,e))))}loadBundle(e){return function(e,t){const n=tE(e=UT(e,eE)),r=new ZT;return RT(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return aE(this._delegate,e).then((e=>e?new qS(this,e):null))}}class RS extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new xS(new lE(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return LS.forKey(t,this.firestore,null)}}class PS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new RS(e)}get(e){const t=KS(e);return this._delegate.get(t).then((e=>new US(this._firestore,new oS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=KS(e);return n?(SS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=KS(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=KS(e);return this._delegate.delete(t),this}}class OS{constructor(e){this._delegate=e}set(e,t,n){const r=KS(e);return n?(SS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=KS(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=KS(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $S{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new aS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jS(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=$S.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new $S(e,new RS(e),t),r.set(t,i)),i}}$S.INSTANCES=new WeakMap;class LS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RS(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Wf("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new LS(t,new GT(t._delegate,n,new mp(e)))}static forKey(e,t,n){return new LS(t,new GT(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new GS(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new GS(this.firestore,HT(this._delegate,e))}catch(e){throw MS(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=zt(e))instanceof GT&&QT(this._delegate,e)}set(e,t){t=SS("DocumentReference.set",t);try{return t?pS(this._delegate,e,t):pS(this._delegate,e)}catch(e){throw MS(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?mS(this._delegate,e):mS(this._delegate,e,t,...n)}catch(e){throw MS(e,"updateDoc()","DocumentReference.update()")}}delete(){return yS(UT((e=this._delegate).firestore,eE),[new Jv(e._key,Mv.none())]);var e}onSnapshot(...e){const t=FS(e),n=VS(e,(e=>new US(this.firestore,new oS(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return gS(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?dS(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=UT(e,GT);const t=UT(e.firestore,eE);return NT(tE(t),e._key,{source:"server"}).then((n=>wS(t,e,n)))}(this._delegate):function(e){e=UT(e,GT);const t=UT(e.firestore,eE);return NT(tE(t),e._key).then((n=>wS(t,e,n)))}(this._delegate),t.then((e=>new US(this.firestore,new oS(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new LS(this.firestore,e?this._delegate.withConverter($S.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function MS(e,t,n){return e.message=e.message.replace(t,n),e}function FS(e){for(const t of e)if("object"==typeof t&&!AS(t))return t;return{}}function VS(e,t){var n,r;let i;return i=AS(e[0])?e[0]:AS(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class US{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new LS(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uS(this._delegate,e._delegate)}}class jS extends US{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||zf(),t}}class qS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RS(e)}where(e,t,n){try{return new qS(this.firestore,GE(this._delegate,function(e,t,n){const r=t,i=jE("where",e);return KE._create(i,r,n)}(e,t,n)))}catch(e){throw MS(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new qS(this.firestore,GE(this._delegate,function(e,t="asc"){const n=t,r=jE("orderBy",e);return WE._create(r,n)}(e,t)))}catch(e){throw MS(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qS(this.firestore,GE(this._delegate,(jT("limit",t=e),QE._create("limit",t,"F"))))}catch(t){throw MS(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new qS(this.firestore,GE(this._delegate,(jT("limitToLast",t=e),QE._create("limitToLast",t,"L"))))}catch(t){throw MS(t,"limitToLast()","Query.limitToLast()")}var t}startAt(...e){try{return new qS(this.firestore,GE(this._delegate,function(...e){return JE._create("startAt",e,!0)}(...e)))}catch(e){throw MS(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qS(this.firestore,GE(this._delegate,function(...e){return JE._create("startAfter",e,!1)}(...e)))}catch(e){throw MS(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qS(this.firestore,GE(this._delegate,function(...e){return YE._create("endBefore",e,!1)}(...e)))}catch(e){throw MS(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qS(this.firestore,GE(this._delegate,function(...e){return YE._create("endAt",e,!0)}(...e)))}catch(e){throw MS(e,"endAt()","Query.endAt()")}}isEqual(e){return JT(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?fS(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=UT(e,zT);const t=UT(e.firestore,eE),n=tE(t),r=new hS(t);return DT(n,e._query,{source:"server"}).then((n=>new cS(t,r,e,n)))}(this._delegate):function(e){e=UT(e,zT);const t=UT(e.firestore,eE),n=tE(t),r=new hS(t);return qE(e._query),DT(n,e._query).then((n=>new cS(t,r,e,n)))}(this._delegate),t.then((e=>new zS(this.firestore,new cS(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=FS(e),n=VS(e,(e=>new zS(this.firestore,new cS(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return gS(this._delegate,t,n)}withConverter(e){return new qS(this.firestore,e?this._delegate.withConverter($S.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class BS{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jS(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new qS(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new jS(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new BS(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new jS(this._firestore,n))}))}isEqual(e){return uS(this._delegate,e._delegate)}}class GS extends qS{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new LS(this.firestore,e):null}doc(e){try{return new LS(this.firestore,void 0===e?WT(this._delegate):WT(this._delegate,e))}catch(e){throw MS(e,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=UT(e.firestore,eE),r=WT(e),i=rS(e.converter,t);return yS(n,[bE(wE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Mv.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new LS(this.firestore,e)))}isEqual(e){return QT(this._delegate,e._delegate)}withConverter(e){return new GS(this.firestore,e?this._delegate.withConverter($S.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function KS(e){return UT(e,GT)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class HS{constructor(...e){this._delegate=new uE(...e)}static documentId(){return new HS(pp.keyField().canonicalString())}isEqual(e){return(e=zt(e))instanceof uE&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class WS{constructor(e){this._delegate=e}static serverTimestamp(){const e=new TE("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new WS(e)}static delete(){const e=new _E("deleteField");return e._methodName="FieldValue.delete",new WS(e)}static arrayUnion(...e){const t=function(...e){return new EE("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new WS(t)}static arrayRemove(...e){const t=function(...e){return new SE("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new WS(t)}static increment(e){const t=new kE("increment",e);return t._methodName="FieldValue.increment",new WS(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const QS={Firestore:DS,GeoPoint:dE,Timestamp:lp,Blob:xS,Transaction:PS,WriteBatch:OS,DocumentReference:LS,DocumentSnapshot:US,Query:qS,QueryDocumentSnapshot:jS,QuerySnapshot:zS,CollectionReference:GS,FieldPath:HS,FieldValue:WS,setLogLevel:function(e){var t;t=e,Ff.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){!function(e,t){e.INTERNAL.registerComponent(new Gt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},QS)))}(e,((e,t)=>new DS(e,t,new NS))),e.registerVersion("@firebase/firestore-compat","0.3.32")}(Pd);const JS=ur({apiKey:"AIzaSyBK09MlRkII37Fg5uHd72qbTHqeCTc9Eok",authDomain:"deportes-triunfo.firebaseapp.com",projectId:"deportes-triunfo",storageBucket:"deportes-triunfo.appspot.com",messagingSenderId:"107215268075",appId:"1:107215268075:web:e3064a82b95b263a89f6ae",measurementId:"G-WNVB88XT2Z"}),YS=function(e,t){const n="string"==typeof e?e:t||"(default)",r=rr("object"==typeof e?e:hr(),"firestore/lite").getImmediate({identifier:n});if(!r._initialized){const e=wt("firestore");e&&function(e,t,n,r={}){var i;const s=(e=Mc(e,Ru))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=nc.MOCK_USER;else{t=Tt(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new vc(fc,"mockUserToken must contain 'sub' or 'user_id' field!");n=new nc(s)}e._authCredentials=new bc(new yc(t,n))}}(r,...e)}return r}(JS),XS=function(e=hr()){const t=rr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=rr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Lt(n.getOptions(),null!=t?t:{}))return e;Br(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ka,persistence:[Uo,To,So]}),r=_t("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Za)return;const r=null==t?void 0:t.token;ec!==r&&(ec=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){zt(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){zt(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=yt("auth");return s&&is(n,`http://${s}`),n}(JS),ZS=function(e=hr(),t){const n=rr(e=zt(e),Sd).getImmediate({identifier:t}),r=wt("storage");return r&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:Tt(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(),ek=async e=>{try{const t=await wh(Lu(YS,e)),n=t.docs.map((e=>e.data())),r=t.docs.map((e=>e.id));return n.map(((e,t)=>({...e,id:r[t]})))}catch(e){return console.error("Error fetching usuarios:",e),[]}},tk=async(e,t)=>{let n;try{const r=Mu(YS,e,t),i=await function(e){const t=Nu((e=Mc(e,Ou)).firestore),n=new yh(e.firestore);return xu(t,[e._key]).then((t=>{uc(1===t.length);const r=t[0];return new sh(e.firestore,n,e._key,r.isFoundDocument()?r:null,e.converter)}))}(r);return i.exists()?n={...i.data(),id:t}:console.log("No such document!"),n}catch(e){return console.error("Error fetching usuarios:",e),[]}},nk=async(e,t)=>{try{const n=await _h(Lu(YS,e),t);console.log("Document written with ID: ",n.id),console.log(t),console.log(`${e} Creado`)}catch(e){console.log("Error: "+e.message)}};async function rk(e,t,n){try{const r=Mu(YS,e,n);await bh(r,t),console.log("Campo actualizado: "+t)}catch(e){console.log("Error: "+e.message)}}async function ik(e,t,n){try{const r=Mu(YS,e,n);await bh(r,t),console.log("Campo(s) actualizado(s): "+t)}catch(e){console.error("Error: "+e.message)}}async function sk(e,t){try{await(n=Mu(YS,e,t),Cu(Nu((n=Mc(n,Ou)).firestore),[new nu(n._key,Xl.none())])),console.log("Campo eliminado: "+t)}catch(e){console.log("Error: "+e.message)}var n}const ok=async e=>{try{const t=await eo(XS,e.correo,e.contrasea),n=t.user.uid,r=t.user.email;return await pk(r,e.contrasea).then((e=>{hk(n,e)})),mo(XS,(e=>{e||console.log("Usuario deslogue o hubo un error de autenticacin")})),!0}catch(e){const t=e.code,n=e.message;return console.error("Error al iniciar sesin:",t,n),!1}},ak=()=>{XS.signOut().then((async()=>{await fk().then((e=>{dk(e)}))})).catch((e=>{e.code,e.message}))},ck=(e,t)=>{(function(e,t,n,r){return vd(e=zt(e),t,n,r)})(Cd(ZS,`productos/${e}`),t,"data_url").then((e=>{console.log("Uploaded a base64 string!")})).catch((e=>console.log(e.message)))},lk=async e=>{console.log("OObtener");let t=[];for(const n of e)await kd(Cd(ZS,`productos/${n.name}`)).then((e=>{t.push(e)})).catch((e=>console.log(e.message)));return t},uk=e=>{const t=/[a-z]/.test(e),n=/[A-Z]/.test(e),r=/\d/.test(e),i=e.length>=6;return t&&n&&r&&i},hk=(e,t)=>{try{"string"!=typeof t&&(t=JSON.stringify(t)),localStorage.setItem(e,t)}catch(e){console.error(`Error al guardar la informacion: ${e}`)}},dk=async e=>{try{localStorage.removeItem(e),console.log("Informacion eliminada con exito")}catch(e){console.error(`Error removing data from local storage: ${e}`)}},fk=async()=>{const e=await new Promise(((e,t)=>{mo(XS,(n=>{n?e(n):t()}))}));if(e)return e.uid},pk=async(e,t)=>{let n={};const r=hh(Lu(YS,"usuarios"),fh("correo","==",e));return(await wh(r)).docs.map((e=>{n=e.data(),n.id=e.id,n.contrasea=t})),n},mk=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<10;n++){t+=e[Math.floor(62*Math.random())]}return t},gk=Qe(!1),vk=Qe(!1),yk=Qe(!1),wk=Qe(!1),bk=Qe(!1),_k=Qe(!1),Ik=Qe(!1),Tk=Qe(!1),Ek=Qe(!1),Sk=Qe(!1),kk=Qe(!1),Ck=Qe(""),xk=Qe(0),Ak=Qe(""),Nk=Qe(""),Dk=Qe(""),Rk=Qe(0),Pk=Qe(""),Ok=Qe([]),$k=Qe([]),Lk=Qe({}),Mk=Qe([]),Fk=Qe([]),Vk=Qe([]),Uk=Qe([]),jk=Qe([]),qk=Qe([]),Bk=Qe([]),zk=Qe({}),Gk=Qe({id:"",receptor:"",contacto_receptor:"",departamento:"",ciudad:"",barrio:"",tipo_de_calle:"",primera_numeracion:"",segunda_numeracion:"",tercera_numeracion:"",apartamento:"",codigo_postal:"",descripcion:""}),Kk=Qe({id:"",cantidad:"",categoria:"",descripcion:"",imagenes:[],nombre:"",precio:"",sub_categoria:""}),Hk=Qe({nombre:"",apellido:"",telefono:"",documento_de_identidad:""}),Wk=Qe({propietario:"",numero_de_tarjeta:"",cvv:"",fecha_de_vencimiento:""}),Qk=Qe({correo:"","contrasea":""}),Jk=Qe([{nombre:"Futbol",valor:"futbol",contenido:[{nombre:"Guayos",valor:"guayos"},{nombre:"Balones",valor:"balon"}]},{nombre:"Natacion",valor:"natacion",contenido:[{nombre:"Gafas",valor:"gafas"},{nombre:"Trajes de bao",valor:"baador"}]}]);function Yk(e){let t,n,r,i,o,a,c,l,u;return{c(){t=D("div"),n=D("input"),r=P(),i=D("label"),o=R(e[2]),a=P(),c=D("p"),c.textContent="Este campo no puede esta vacio",M(n,"type","text"),M(n,"class","form-control error svelte-1zag97"),M(n,"id","floatingPassword"),M(n,"placeholder","Contrasea"),M(i,"for","floatingPassword"),M(i,"class","errorMensaje svelte-1zag97"),M(t,"class","form-floating error svelte-1zag97")},m(s,h){x(s,t,h),S(t,n),V(n,e[3][e[1]]),S(t,r),S(t,i),S(i,o),S(t,a),S(t,c),l||(u=[$(n,"input",e[8]),$(n,"change",e[9])],l=!0)},p(e,t){10&t&&n.value!==e[3][e[1]]&&V(n,e[3][e[1]]),4&t&&F(o,e[2])},d(e){e&&A(t),l=!1,s(u)}}}function Xk(e){let t,n,r,i,o,a,c,l,u;return{c(){t=D("div"),n=D("input"),r=P(),i=D("label"),o=R(e[2]),a=P(),c=D("br"),M(n,"type","text"),M(n,"class","form-control svelte-1zag97"),M(n,"id","floatingPassword"),M(n,"placeholder","Contrasea"),M(i,"for","floatingPassword"),M(i,"class","svelte-1zag97"),M(t,"class","form-floating svelte-1zag97")},m(s,h){x(s,t,h),S(t,n),V(n,e[3][e[1]]),S(t,r),S(t,i),S(i,o),S(t,a),S(t,c),l||(u=[$(n,"input",e[5]),$(n,"change",e[6]),$(n,"blur",e[7])],l=!0)},p(e,t){10&t&&n.value!==e[3][e[1]]&&V(n,e[3][e[1]]),4&t&&F(o,e[2])},d(e){e&&A(t),l=!1,s(u)}}}function Zk(t){let n;function r(e,t){return e[0]?Xk:Yk}let i=r(t),s=i(t);return{c(){s.c(),n=O()},m(e,t){s.m(e,t),x(e,n,t)},p(e,[t]){i===(i=r(e))&&s?s.p(e,t):(s.d(1),s=i(e),s&&(s.c(),s.m(n.parentNode,n)))},i:e,o:e,d(e){s.d(e),e&&A(n)}}}function eC(e,t,n){let r;h(e,Ck,(e=>n(3,r=e)));let{validacion:i=!0}=t,{variable:s=""}=t,{mensaje:o=""}=t,{directorio:a=""}=t;y(Ck,r=a,r);return e.$$set=e=>{"validacion"in e&&n(0,i=e.validacion),"variable"in e&&n(1,s=e.variable),"mensaje"in e&&n(2,o=e.mensaje),"directorio"in e&&n(4,a=e.directorio)},[i,s,o,r,a,function(){r[s]=this.value,Ck.set(r)},e=>{""===e.target.value?n(0,i=!1):n(0,i=!0)},e=>{""===e.target.value?n(0,i=!1):n(0,i=!0)},function(){r[s]=this.value,Ck.set(r)},e=>{""!==e.target.value?n(0,i=!0):n(0,i=!1)}]}class tC extends ke{constructor(e){super(),Se(this,e,eC,Zk,a,{validacion:0,variable:1,mensaje:2,directorio:4})}}function nC(e){let t,n,r,i,o,a,c,l,u;return{c(){t=D("div"),n=D("input"),r=P(),i=D("label"),o=R(e[2]),a=P(),c=D("p"),c.textContent="Este campo no puede quedar vacio",M(n,"type","password"),M(n,"class","form-control error svelte-179onn0"),M(n,"id","floatingPassword"),M(n,"placeholder","Contrasea"),M(i,"for","floatingPassword"),M(i,"class","errorMensaje svelte-179onn0"),M(t,"class","form-floating error svelte-179onn0")},m(s,h){x(s,t,h),S(t,n),V(n,e[3][e[1]]),S(t,r),S(t,i),S(i,o),S(t,a),S(t,c),l||(u=[$(n,"input",e[8]),$(n,"change",e[9])],l=!0)},p(e,t){10&t&&n.value!==e[3][e[1]]&&V(n,e[3][e[1]]),4&t&&F(o,e[2])},d(e){e&&A(t),l=!1,s(u)}}}function rC(e){let t,n,r,i,o,a,c,l,u;return{c(){t=D("div"),n=D("input"),r=P(),i=D("label"),o=R(e[2]),a=P(),c=D("br"),M(n,"type","password"),M(n,"class","form-control svelte-179onn0"),M(n,"id","floatingPassword"),M(n,"placeholder","Contrasea"),M(i,"for","floatingPassword"),M(i,"class","svelte-179onn0"),M(t,"class","form-floating svelte-179onn0")},m(s,h){x(s,t,h),S(t,n),V(n,e[3][e[1]]),S(t,r),S(t,i),S(i,o),S(t,a),S(t,c),l||(u=[$(n,"input",e[5]),$(n,"change",e[6]),$(n,"blur",e[7])],l=!0)},p(e,t){10&t&&n.value!==e[3][e[1]]&&V(n,e[3][e[1]]),4&t&&F(o,e[2])},d(e){e&&A(t),l=!1,s(u)}}}function iC(t){let n;function r(e,t){return e[0]?rC:nC}let i=r(t),s=i(t);return{c(){s.c(),n=O()},m(e,t){s.m(e,t),x(e,n,t)},p(e,[t]){i===(i=r(e))&&s?s.p(e,t):(s.d(1),s=i(e),s&&(s.c(),s.m(n.parentNode,n)))},i:e,o:e,d(e){s.d(e),e&&A(n)}}}function sC(e,t,n){let r;h(e,Ck,(e=>n(3,r=e)));let{validacion:i=!0}=t,{variable:s=""}=t,{mensaje:o=""}=t,{directorio:a=""}=t;y(Ck,r=a,r);return e.$$set=e=>{"validacion"in e&&n(0,i=e.validacion),"variable"in e&&n(1,s=e.variable),"mensaje"in e&&n(2,o=e.mensaje),"directorio"in e&&n(4,a=e.directorio)},[i,s,o,r,a,function(){r[s]=this.value,Ck.set(r)},e=>{""===e.target.value?n(0,i=!1):n(0,i=!0)},e=>{""===e.target.value?n(0,i=!1):n(0,i=!0)},function(){r[s]=this.value,Ck.set(r)},e=>{""!==e.target.value?n(0,i=!0):n(0,i=!1)}]}class oC extends ke{constructor(e){super(),Se(this,e,sC,iC,a,{validacion:0,variable:1,mensaje:2,directorio:4})}}function aC(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T;function E(e,t){return 2===e[0]?lC:e[0]?void 0:cC}let k=E(e),C=k&&k(e);return d=new tC({props:{directorio:e[1],variable:"correo",mensaje:"Correo"}}),p=new oC({props:{directorio:e[1],variable:"contrasea",mensaje:"Contrasea"}}),{c(){t=D("section"),n=D("div"),r=D("div"),i=D("i"),o=P(),a=D("div"),c=D("h1"),c.textContent="Iniciar Sesin",l=P(),C&&C.c(),u=P(),h=D("form"),_e(d.$$.fragment),f=P(),_e(p.$$.fragment),m=P(),g=D("button"),g.textContent="Iniciar sesion",v=P(),y=D("a"),y.innerHTML='<p class="restablecerContrasena">Olvidast tu contrasea?</p>',w=P(),b=D("div"),b.innerHTML='<p class="svelte-14jaryb">An no tienes una cuenta?</p> \n        <a href="/registro" class="svelte-14jaryb">Registrarse</a>',M(i,"class","bi bi-x-lg icon svelte-14jaryb"),M(r,"class","btnCerrar svelte-14jaryb"),U(c,"margin","20px 0"),M(h,"action",""),M(g,"class","btnInformacion svelte-14jaryb"),M(y,"href","/restablecer_contrasena"),M(y,"class","svelte-14jaryb"),M(a,"class","divContainerLogin svelte-14jaryb"),M(b,"class","divContainerSingup svelte-14jaryb"),M(n,"class","contenido svelte-14jaryb"),M(t,"class","containerGeneral svelte-14jaryb")},m(s,E){x(s,t,E),S(t,n),S(n,r),S(r,i),S(n,o),S(n,a),S(a,c),S(a,l),C&&C.m(a,null),S(a,u),S(a,h),Ie(d,h,null),S(h,f),Ie(p,h,null),S(a,m),S(a,g),S(a,v),S(a,y),S(n,w),S(n,b),_=!0,I||(T=[$(i,"keypress",e[3]),$(i,"click",e[3]),$(g,"click",L(e[4]))],I=!0)},p(e,t){k!==(k=E(e))&&(C&&C.d(1),C=k&&k(e),C&&(C.c(),C.m(a,u)));const n={};2&t&&(n.directorio=e[1]),d.$set(n);const r={};2&t&&(r.directorio=e[1]),p.$set(r)},i(e){_||(ge(d.$$.fragment,e),ge(p.$$.fragment,e),_=!0)},o(e){ve(d.$$.fragment,e),ve(p.$$.fragment,e),_=!1},d(e){e&&A(t),C&&C.d(),Te(d),Te(p),I=!1,s(T)}}}function cC(e){let t;return{c(){t=D("div"),t.innerHTML="<p>El correo o la contrasea proporcionados <br/> son incorrectos.</p>",M(t,"class","mensajeError svelte-14jaryb")},m(e,n){x(e,t,n)},d(e){e&&A(t)}}}function lC(e){let t;return{c(){t=D("div"),t.innerHTML="<p>No se ha realizado la autenticacin <br/> de la direccion de correo.</p>",M(t,"class","mensajeError svelte-14jaryb")},m(e,n){x(e,t,n)},d(e){e&&A(t)}}}function uC(e){let t,n,r=e[2]&&aC(e);return{c(){r&&r.c(),t=O()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[2]?r?(r.p(e,n),4&n&&ge(r,1)):(r=aC(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&A(t)}}}function hC(e,t,n){let r,i;h(e,Qk,(e=>n(1,r=e))),h(e,_k,(e=>n(2,i=e)));let s=!0;return[s,r,i,()=>{y(_k,i=!1,i)},async()=>{await ok(r)?(Ze("/"),location.reload(),y(_k,i=!1,i),console.log(await ok(r))):n(0,s=!1)}]}class dC extends ke{constructor(e){super(),Se(this,e,hC,uC,a,{})}}function fC(e){let t,n,r,i;return{c(){t=D("section"),n=D("div"),r=D("p"),i=R(e[0]),M(r,"class","texto svelte-nk7g8i"),M(n,"class","contenedorMensaje svelte-nk7g8i"),M(t,"class","containerGeneral svelte-nk7g8i")},m(e,s){x(e,t,s),S(t,n),S(n,r),S(r,i)},p(e,t){1&t&&F(i,e[0])},d(e){e&&A(t)}}}function pC(t){let n,r=t[1]&&fC(t);return{c(){r&&r.c(),n=O()},m(e,t){r&&r.m(e,t),x(e,n,t)},p(e,[t]){e[1]?r?r.p(e,t):(r=fC(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&A(n)}}}function mC(e,t,n){let r;h(e,Ek,(e=>n(1,r=e)));let{mensaje:i}=t;return e.$$set=e=>{"mensaje"in e&&n(0,i=e.mensaje)},[i,r]}class gC extends ke{constructor(e){super(),Se(this,e,mC,pC,a,{mensaje:0})}}function vC(e){let t;return{c(){t=D("div"),t.innerHTML="<p>Los campos con un asterisco (*) son obligatorios <br/>\n          La contrasea debe tener mnimo 6 caracteres y mximo 32 <br/>\n          La contrasea debe contener una mayuscula, minuscula y un nmero\n          <br/>\n          El correo debe contener @</p>",M(t,"class","mensajeError svelte-1ag8hun")},m(e,n){x(e,t,n)},d(e){e&&A(t)}}}function yC(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,R,O,F,j,q,B,z,G,K,H,W,Q,J,Y,X,Z,ee,te,ne,re,ie,se,oe;t=new gC({props:{mensaje:e[8]}});let ae=!e[7]&&vC();return re=new dC({}),{c(){_e(t.$$.fragment),n=P(),r=D("section"),i=D("div"),o=D("h1"),o.textContent="Registro de usuario",a=P(),ae&&ae.c(),c=P(),l=D("form"),u=D("div"),h=D("input"),d=P(),f=D("label"),f.textContent="Nombre*",p=P(),m=D("div"),g=D("input"),v=P(),y=D("label"),y.textContent="Apellido*",w=P(),b=D("div"),_=D("input"),I=P(),T=D("label"),T.textContent="Correo*",E=P(),k=D("div"),C=D("input"),N=P(),R=D("label"),R.textContent="Contrasea*",O=P(),F=D("div"),j=D("input"),q=P(),B=D("label"),B.textContent="Documento de identidad",z=P(),G=D("div"),K=D("input"),H=P(),W=D("label"),W.textContent="Telfono",Q=P(),J=D("div"),Y=D("input"),X=P(),Z=D("label"),Z.textContent="Fecha de nacimiento",ee=P(),te=D("button"),te.textContent="Crear usuario",ne=P(),_e(re.$$.fragment),U(o,"margin","20px 0"),M(h,"type","text"),M(h,"class","form-control svelte-1ag8hun"),M(h,"id","floatingInput1"),M(h,"placeholder","Correo"),M(f,"for","floatingInput"),M(f,"class","svelte-1ag8hun"),M(u,"class","form-floating mb-3 svelte-1ag8hun"),M(g,"type","text"),M(g,"class","form-control svelte-1ag8hun"),M(g,"id","floatingInput"),M(g,"placeholder","Contrasea"),M(y,"for","floatingPassword"),M(y,"class","svelte-1ag8hun"),M(m,"class","form-floating svelte-1ag8hun"),M(_,"type","email"),M(_,"class","form-control svelte-1ag8hun"),M(_,"id","floatingInput"),M(_,"placeholder","Contrasea"),M(T,"for","floatingPassword"),M(T,"class","svelte-1ag8hun"),M(b,"class","form-floating svelte-1ag8hun"),M(C,"type","password"),M(C,"class","form-control svelte-1ag8hun"),M(C,"id","floatingInput"),M(C,"placeholder","Contrasea"),M(C,"minlength","6"),M(C,"maxlength","32"),M(R,"for","floatingPassword"),M(R,"class","svelte-1ag8hun"),M(k,"class","form-floating svelte-1ag8hun"),M(j,"type","text"),M(j,"class","form-control svelte-1ag8hun"),M(j,"id","floatingInput"),M(j,"placeholder","Contrasea"),M(B,"for","floatingPassword"),M(B,"class","svelte-1ag8hun"),M(F,"class","form-floating svelte-1ag8hun"),M(K,"type","text"),M(K,"class","form-control svelte-1ag8hun"),M(K,"id","floatingPassword"),M(K,"placeholder","Contrasea"),M(W,"for","floatingPassword"),M(W,"class","svelte-1ag8hun"),M(G,"class","form-floating svelte-1ag8hun"),M(Y,"type","date"),M(Y,"class","form-control svelte-1ag8hun"),M(Y,"id","floatingPassword"),M(Y,"placeholder","Contrasea"),M(Z,"for","floatingPassword"),M(Z,"class","svelte-1ag8hun"),M(J,"class","form-floating svelte-1ag8hun"),M(l,"action",""),M(te,"class","buttonLogin svelte-1ag8hun"),M(i,"class","divContainerLogin svelte-1ag8hun"),M(r,"class","sectionLogin svelte-1ag8hun")},m(s,A){Ie(t,s,A),x(s,n,A),x(s,r,A),S(r,i),S(i,o),S(i,a),ae&&ae.m(i,null),S(i,c),S(i,l),S(l,u),S(u,h),V(h,e[0]),S(u,d),S(u,f),S(l,p),S(l,m),S(m,g),V(g,e[1]),S(m,v),S(m,y),S(l,w),S(l,b),S(b,_),V(_,e[3]),S(b,I),S(b,T),S(l,E),S(l,k),S(k,C),V(C,e[4]),S(k,N),S(k,R),S(l,O),S(l,F),S(F,j),V(j,e[5]),S(F,q),S(F,B),S(l,z),S(l,G),S(G,K),V(K,e[6]),S(G,H),S(G,W),S(l,Q),S(l,J),S(J,Y),V(Y,e[2]),S(J,X),S(J,Z),S(i,ee),S(i,te),x(s,ne,A),Ie(re,s,A),ie=!0,se||(oe=[$(h,"input",e[11]),$(h,"blur",e[12]),$(g,"input",e[13]),$(g,"blur",e[14]),$(_,"input",e[15]),$(_,"blur",e[16]),$(C,"input",e[17]),$(C,"blur",e[18]),$(j,"input",e[19]),$(K,"input",e[20]),$(Y,"input",e[21]),$(te,"click",L(e[9]))],se=!0)},p(e,[n]){const r={};256&n&&(r.mensaje=e[8]),t.$set(r),e[7]?ae&&(ae.d(1),ae=null):ae||(ae=vC(),ae.c(),ae.m(i,c)),1&n&&h.value!==e[0]&&V(h,e[0]),2&n&&g.value!==e[1]&&V(g,e[1]),8&n&&_.value!==e[3]&&V(_,e[3]),16&n&&C.value!==e[4]&&V(C,e[4]),32&n&&j.value!==e[5]&&V(j,e[5]),64&n&&K.value!==e[6]&&V(K,e[6]),4&n&&V(Y,e[2])},i(e){ie||(ge(t.$$.fragment,e),ge(re.$$.fragment,e),ie=!0)},o(e){ve(t.$$.fragment,e),ve(re.$$.fragment,e),ie=!1},d(e){Te(t,e),e&&A(n),e&&A(r),ae&&ae.d(),e&&A(ne),Te(re,e),se=!1,s(oe)}}}function wC(e,t,n){let r,i;h(e,Ek,(e=>n(22,r=e))),h(e,Dk,(e=>n(8,i=e)));let s="",o="",a="",c="",l="",u="",d="",f=!0;const p=e=>{""===e.target.value?n(7,f=!1):n(7,f=!0)};return[s,o,a,c,l,u,d,f,i,()=>{""!==s&&""!==o&&""!==c&&""!==l||n(7,f=!1),uk(l)?n(7,f=!0):n(7,f=!1),f&&(async(e,t)=>Zs(XS,t.correo,t.contrasea).then((async n=>(n.user,no(XS.currentUser).then((()=>nk(e,t)))))).catch((e=>{const t=e.code,n=e.message;throw console.log("Error: "+t+" - "+n),new Error("Error durante la autenticacin: "+n)})))("usuarios",{nombre:s,apellido:o,correo:c,"contrasea":l,fecha_de_nacimiento:a,documento_de_identidad:u,telefono:d,direcciones:[],favoritos:[],carrito:[],pedidos:[],metodos_de_pagos:[{estado:!1,modo:"debito"},{estado:!1,modo:"credito"}]}).then((()=>{y(Ek,r=!0,r),y(Dk,i="!!Usuario registrado con exito!! Se te ha enviado un correo para realizar la autenticacin y as poder iniciar sesin, si no aparece el mensaje, revisa la bandeja de spam.",i),setTimeout((()=>{y(Ek,r=!1,r),Ze("/")}),5e3)})).catch((e=>console.error("No se pudo registrar al usuario")))},p,function(){s=this.value,n(0,s)},e=>{p(e)},function(){o=this.value,n(1,o)},e=>{p(e)},function(){c=this.value,n(3,c)},e=>{p(e)},function(){l=this.value,n(4,l)},e=>{p(e)},function(){u=this.value,n(5,u)},function(){d=this.value,n(6,d)},function(){a=this.value,n(2,a)}]}class bC extends ke{constructor(e){super(),Se(this,e,wC,yC,a,{})}}function _C(e){let t,n,r,i=e[2].cantidad+"";return{c(){t=D("p"),n=R(i),r=R(" unds. disponibles"),M(t,"class","disponibles svelte-188v5mi")},m(e,i){x(e,t,i),S(t,n),S(t,r)},p(e,t){4&t&&i!==(i=e[2].cantidad+"")&&F(n,i)},d(e){e&&A(t)}}}function IC(t){let n;return{c(){n=D("p"),n.innerHTML="El nmero solicitado a superado <br/> las cantidades disponibles o permitidas",M(n,"class","mensajeError svelte-188v5mi")},m(e,t){x(e,n,t)},p:e,d(e){e&&A(n)}}}function TC(t){let n,r,i,o,a,c,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,O,L,U,j,q,B,z,G,K,H,W,Q,J,Y,X,Z=t[2].nombre+"",ee=t[2].precio+"";function te(e,t){return e[1]?IC:_C}let ne=te(t),re=ne(t);return{c(){n=D("section"),r=D("div"),i=D("div"),o=D("div"),o.innerHTML='<i class="bi bi-check-circle icon svelte-188v5mi"></i> \n        <p>Lo que llevas en tu carro</p>',a=P(),c=D("div"),u=D("i"),h=P(),d=D("div"),f=D("div"),p=D("img"),v=P(),y=D("div"),w=D("p"),b=R(Z),_=P(),I=D("p"),T=R("$ "),E=R(ee),k=P(),C=D("div"),N=D("div"),O=D("button"),O.textContent="-",L=P(),U=D("input"),j=P(),q=D("button"),q.textContent="+",B=P(),re.c(),z=P(),G=D("br"),K=P(),H=D("div"),W=D("button"),W.textContent="Seguir comprando",Q=P(),J=D("button"),J.textContent="Ir al carro",M(o,"class","parte1 svelte-188v5mi"),M(u,"class","bi bi-x-lg icon svelte-188v5mi"),M(c,"class","parte2 svelte-188v5mi"),M(i,"class","informacionInicial svelte-188v5mi"),l(p.src,m=t[2].imagenes[0])||M(p,"src",m),M(p,"alt",g=t[2].nombre),M(p,"class","svelte-188v5mi"),M(f,"class","containerImg svelte-188v5mi"),M(w,"class","titulo"),M(y,"class","containerInformacion svelte-188v5mi"),M(O,"class","buttonContador svelte-188v5mi"),M(U,"type","text"),M(U,"class","inputCantidad svelte-188v5mi"),M(q,"class","buttonContador svelte-188v5mi"),M(N,"class","cantidadesCompra svelte-188v5mi"),M(C,"class","cantidades svelte-188v5mi"),M(d,"class","contenidoInforProducto svelte-188v5mi"),M(W,"class","btnCerraVentana svelte-188v5mi"),M(J,"class","btnInformacion svelte-188v5mi"),M(J,"href","/carrito"),M(H,"class","btnAcciones svelte-188v5mi"),M(r,"class","contenido svelte-188v5mi"),M(n,"class","containerGeneral svelte-188v5mi")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(i,o),S(i,a),S(i,c),S(c,u),S(r,h),S(r,d),S(d,f),S(f,p),S(d,v),S(d,y),S(y,w),S(w,b),S(y,_),S(y,I),S(I,T),S(I,E),S(d,k),S(d,C),S(C,N),S(N,O),S(N,L),S(N,U),V(U,t[0]),S(N,j),S(N,q),S(C,B),re.m(C,null),S(C,z),S(C,G),S(r,K),S(r,H),S(H,W),S(H,Q),S(H,J),Y||(X=[$(u,"keypress",t[6]),$(u,"click",t[6]),$(O,"click",t[4]),$(U,"input",t[7]),$(U,"blur",t[8]),$(q,"click",t[3]),$(W,"click",t[6]),$(J,"click",t[5])],Y=!0)},p(e,[t]){4&t&&!l(p.src,m=e[2].imagenes[0])&&M(p,"src",m),4&t&&g!==(g=e[2].nombre)&&M(p,"alt",g),4&t&&Z!==(Z=e[2].nombre+"")&&F(b,Z),4&t&&ee!==(ee=e[2].precio+"")&&F(E,ee),1&t&&U.value!==e[0]&&V(U,e[0]),ne===(ne=te(e))&&re?re.p(e,t):(re.d(1),re=ne(e),re&&(re.c(),re.m(C,z)))},i:e,o:e,d(e){e&&A(n),re.d(),Y=!1,s(X)}}}function EC(e,t,n){let r,i,s;h(e,Lk,(e=>n(2,r=e))),h(e,yk,(e=>n(10,i=e))),h(e,xk,(e=>n(11,s=e)));let{cantidadCompra:o=1}=t,a=[],c=!1;const l=async()=>{const e=JSON.parse(localStorage.getItem(a.key));let t=e.carrito.findIndex((e=>e.id===r.id));if(-1===t){e.carrito=[...e.carrito,{...r,cantidadCompra:o}];const t=JSON.stringify(e);y(xk,s=e.carrito.length,s),localStorage.setItem(a.key,t),rk("usuarios",{carrito:e.carrito},e.id)}};Q((async()=>{await fk().then((e=>{a={...JSON.parse(localStorage.getItem(e)),key:e},console.log(a)}))}));return e.$$set=e=>{"cantidadCompra"in e&&n(0,o=e.cantidadCompra)},[o,c,r,()=>{o>20||o>parseInt(r.cantidad)?n(1,c=!0):n(0,o+=1)},()=>{o>=1&&(n(0,o-=1),(o<=20||o<parseInt(r.cantidad))&&n(1,c=!1))},()=>{l().then((()=>{Ze("/carrito"),location.reload()}))},()=>{y(yk,i=!1,i),l(),y(Lk,r={},r)},function(){o=this.value,n(0,o)},()=>{(o>20||o>=parseInt(r.cantidad))&&n(1,c=!0)}]}class SC extends ke{constructor(e){super(),Se(this,e,EC,TC,a,{cantidadCompra:0})}}function kC(t){let n,r,i,s,o,a,c,u,h,d,f,p,m,g,v,y,w,b=t[0].nombre+"",_=t[0].precio+"";return{c(){n=D("div"),r=D("a"),i=D("img"),o=P(),a=D("div"),c=D("h5"),u=R(b),h=P(),d=D("p"),f=R("$ "),p=R(_),g=P(),v=D("button"),v.textContent="Agregar al carrito",l(i.src,s=t[1][0])||M(i,"src",s),M(i,"class","card-img-top svelte-1be2in2"),M(i,"alt","Imagenes del producto "),M(c,"class","card-title svelte-1be2in2"),M(d,"class","card-text"),M(a,"class","card-body svelte-1be2in2"),M(r,"href",m="/producto/"+t[0].id),M(r,"class","svelte-1be2in2"),M(v,"class","buttonLogin svelte-1be2in2"),M(n,"class","card svelte-1be2in2"),U(n,"width","15rem")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(r,o),S(r,a),S(a,c),S(c,u),S(a,h),S(a,d),S(d,f),S(d,p),S(n,g),S(n,v),y||(w=$(v,"click",t[2]),y=!0)},p(e,[t]){2&t&&!l(i.src,s=e[1][0])&&M(i,"src",s),1&t&&b!==(b=e[0].nombre+"")&&F(u,b),1&t&&_!==(_=e[0].precio+"")&&F(p,_),1&t&&m!==(m="/producto/"+e[0].id)&&M(r,"href",m)},i:e,o:e,d(e){e&&A(n),y=!1,w()}}}function CC(e,t,n){let r,i;h(e,Lk,(e=>n(3,r=e))),h(e,yk,(e=>n(4,i=e)));let{productos:s}=t,o=[];return e.$$set=e=>{"productos"in e&&n(0,s=e.productos)},e.$$.update=()=>{1&e.$$.dirty&&n(1,o=s.imagenes)},[s,o,()=>{y(yk,i=!0,i),y(Lk,r=s,r)}]}class xC extends ke{constructor(e){super(),Se(this,e,CC,kC,a,{productos:0})}}function AC(e,t,n){const r=e.slice();return r[7]=t[n],r}function NC(e){let t,n,r,i,s,o,a,c,l=e[0].slice(0,5),u=[];for(let t=0;t<l.length;t+=1)u[t]=DC(AC(e,l,t));const h=e=>ve(u[e],1,1,(()=>{u[e]=null}));return{c(){t=D("div"),n=D("h3"),r=R(e[1]),i=R(" > "),s=R(e[2]),o=P(),a=D("div");for(let e=0;e<u.length;e+=1)u[e].c();M(a,"class","containerCards svelte-dl6fhi"),M(t,"class","container svelte-dl6fhi")},m(e,l){x(e,t,l),S(t,n),S(n,r),S(n,i),S(n,s),S(t,o),S(t,a);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(a,null);c=!0},p(e,t){if((!c||2&t)&&F(r,e[1]),(!c||4&t)&&F(s,e[2]),1&t){let n;for(l=e[0].slice(0,5),n=0;n<l.length;n+=1){const r=AC(e,l,n);u[n]?(u[n].p(r,t),ge(u[n],1)):(u[n]=DC(r),u[n].c(),ge(u[n],1),u[n].m(a,null))}for(pe(),n=l.length;n<u.length;n+=1)h(n);me()}},i(e){if(!c){for(let e=0;e<l.length;e+=1)ge(u[e]);c=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)ve(u[e]);c=!1},d(e){e&&A(t),N(u,e)}}}function DC(e){let t,n;return t=new xC({props:{productos:e[7]}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.productos=e[7]),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function RC(e){let t,n,r=e[3]&&NC(e);return{c(){r&&r.c(),t=O()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[3]?r?(r.p(e,n),8&n&&ge(r,1)):(r=NC(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&A(t)}}}function PC(e,t,n){let r,i,s=[],o=[],{categoria:a}=t,{subCategoria:c}=t;Q((async()=>{s=await(async(e,t,n)=>{let r=[];try{const i=hh(Lu(YS,e),fh(t,"==",n));return(await wh(i)).forEach((e=>{r.push({id:e.id,...e.data()})})),r}catch(e){console.error("Error fetching documents:",e)}})("productos","categoria",a),n(0,o=s.filter((e=>e.sub_categoria==c))),n(1,r=s[0].categoria.replace(/^./,(e=>e.toUpperCase()))),n(2,i=o[0].sub_categoria.replace(/^./,(e=>e.toUpperCase()))),console.log(i)}));let l=!1;return setTimeout((()=>n(3,l=!0)),1500),e.$$set=e=>{"categoria"in e&&n(4,a=e.categoria),"subCategoria"in e&&n(5,c=e.subCategoria)},[o,r,i,l,a,c]}class OC extends ke{constructor(e){super(),Se(this,e,PC,RC,a,{categoria:4,subCategoria:5})}}function $C(e){let t,n;return t=new SC({}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function LC(e){let t,n;return t=new dC({}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function MC(e){let t,n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_;o=new OC({props:{categoria:"futbol",subCategoria:"guayos"}}),u=new OC({props:{categoria:"futbol",subCategoria:"balon"}}),p=new OC({props:{categoria:"natacion",subCategoria:"gafas"}}),y=new OC({props:{categoria:"natacion",subCategoria:"baador"}});let I=e[0]&&$C(),T=e[1]&&LC();return{c(){t=D("section"),n=D("div"),n.innerHTML='<div class="carousel-inner"><div class="carousel-item active"><img src="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/banners%2Fbanner-1-1920-x450-1536x360.jpg?alt=media&amp;token=bad866e0-9181-4051-bb2e-73c3a6fab90c" class="d-block w-100" alt="Banner 1"/></div> \n      <div class="carousel-item"><img src="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/banners%2FBanner-Articulos-gym-1920-x-450.jpg?alt=media&amp;token=146a6f42-79f5-4577-bd74-47e9162de9e0" class="d-block w-100" alt="Banner 2"/></div> \n      <div class="carousel-item"><img src="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/banners%2FBanner-Futbol-1920-x-450-.jpg?alt=media&amp;token=c125537b-1c01-4f9f-ad88-81efba61ed0c" class="d-block w-100" alt="Banner 3"/></div> \n      <div class="carousel-item"><img src="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/banners%2F221-arqueros_Mesa-de-trabajo-1.jpg?alt=media&amp;token=c485722f-d95e-4eb0-a049-899c82d25c59" class="d-block w-100" alt="Banner 4"/></div></div> \n    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span> \n      <span class="visually-hidden">Previous</span></button> \n    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span> \n      <span class="visually-hidden">Next</span></button>',r=P(),i=D("h1"),i.textContent="Nuestros productos",s=P(),_e(o.$$.fragment),a=P(),c=D("br"),l=P(),_e(u.$$.fragment),h=P(),d=D("br"),f=P(),_e(p.$$.fragment),m=P(),g=D("br"),v=P(),_e(y.$$.fragment),w=P(),I&&I.c(),b=P(),T&&T.c(),M(n,"id","carouselExampleFade"),M(n,"class","carousel slide carousel-fade slider svelte-1b98xgb"),M(i,"class","svelte-1b98xgb"),M(t,"class","contenido svelte-1b98xgb")},m(e,E){x(e,t,E),S(t,n),S(t,r),S(t,i),S(t,s),Ie(o,t,null),S(t,a),S(t,c),S(t,l),Ie(u,t,null),S(t,h),S(t,d),S(t,f),Ie(p,t,null),S(t,m),S(t,g),S(t,v),Ie(y,t,null),S(t,w),I&&I.m(t,null),S(t,b),T&&T.m(t,null),_=!0},p(e,[n]){e[0]?I?1&n&&ge(I,1):(I=$C(),I.c(),ge(I,1),I.m(t,b)):I&&(pe(),ve(I,1,1,(()=>{I=null})),me()),e[1]?T?2&n&&ge(T,1):(T=LC(),T.c(),ge(T,1),T.m(t,null)):T&&(pe(),ve(T,1,1,(()=>{T=null})),me())},i(e){_||(ge(o.$$.fragment,e),ge(u.$$.fragment,e),ge(p.$$.fragment,e),ge(y.$$.fragment,e),ge(I),ge(T),_=!0)},o(e){ve(o.$$.fragment,e),ve(u.$$.fragment,e),ve(p.$$.fragment,e),ve(y.$$.fragment,e),ve(I),ve(T),_=!1},d(e){e&&A(t),Te(o),Te(u),Te(p),Te(y),I&&I.d(),T&&T.d()}}}function FC(e,t,n){let r,i;return h(e,yk,(e=>n(0,r=e))),h(e,_k,(e=>n(1,i=e))),[r,i]}class VC extends ke{constructor(e){super(),Se(this,e,FC,MC,a,{})}}function UC(e,t,n){const r=e.slice();return r[14]=t[n],r}function jC(e,t,n){const r=e.slice();return r[17]=t[n],r}function qC(e,t,n){const r=e.slice();return r[17]=t[n],r}function BC(e,t,n){const r=e.slice();return r[20]=t[n],r}function zC(e){let t,n,r,i,s,o,a,c,l,u;function h(e,t){return void 0===e[2]?KC:GC}let d=h(e),f=d(e),p=e[5],m=[];for(let t=0;t<p.length;t+=1)m[t]=JC(UC(e,p,t));const g=e=>ve(m[e],1,1,(()=>{m[e]=null}));let v=e[7]&&YC();return{c(){t=D("section"),n=D("div"),r=D("aside"),f.c(),i=P(),s=D("div"),o=P(),a=D("div"),c=D("div");for(let e=0;e<m.length;e+=1)m[e].c();l=P(),v&&v.c(),M(s,"class","divSubcategorias"),M(r,"class","aside svelte-1bibeem"),M(c,"class","productos svelte-1bibeem"),M(a,"class","contenidoProductos svelte-1bibeem"),M(n,"class","contenido svelte-1bibeem"),M(t,"class","contenedorGeneral svelte-1bibeem")},m(e,h){x(e,t,h),S(t,n),S(n,r),f.m(r,null),S(r,i),S(r,s),S(n,o),S(n,a),S(a,c);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(c,null);S(t,l),v&&v.m(t,null),u=!0},p(e,n){if(d===(d=h(e))&&f?f.p(e,n):(f.d(1),f=d(e),f&&(f.c(),f.m(r,i))),32&n){let t;for(p=e[5],t=0;t<p.length;t+=1){const r=UC(e,p,t);m[t]?(m[t].p(r,n),ge(m[t],1)):(m[t]=JC(r),m[t].c(),ge(m[t],1),m[t].m(c,null))}for(pe(),t=p.length;t<m.length;t+=1)g(t);me()}e[7]?v?128&n&&ge(v,1):(v=YC(),v.c(),ge(v,1),v.m(t,null)):v&&(pe(),ve(v,1,1,(()=>{v=null})),me())},i(e){if(!u){for(let e=0;e<p.length;e+=1)ge(m[e]);ge(v),u=!0}},o(e){m=m.filter(Boolean);for(let e=0;e<m.length;e+=1)ve(m[e]);ve(v),u=!1},d(e){e&&A(t),f.d(),N(m,e),v&&v.d()}}}function GC(e){let t,n,r,i,o,a,c,l=e[1],u=[];for(let t=0;t<l.length;t+=1)u[t]=HC(jC(e,l,t));return{c(){t=D("div"),n=D("h3"),r=R(e[3]),i=P(),o=D("div");for(let e=0;e<u.length;e+=1)u[e].c();M(n,"class","titulo svelte-1bibeem"),M(o,"class","categorias svelte-1bibeem"),M(t,"class","contenidoAside")},m(s,l){x(s,t,l),S(t,n),S(n,r),S(t,i),S(t,o);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(o,null);a||(c=[$(n,"keypress",e[11]),$(n,"click",e[12])],a=!0)},p(e,t){if(8&t&&F(r,e[3]),262&t){let n;for(l=e[1],n=0;n<l.length;n+=1){const r=jC(e,l,n);u[n]?u[n].p(r,t):(u[n]=HC(r),u[n].c(),u[n].m(o,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=l.length}},d(e){e&&A(t),N(u,e),a=!1,s(c)}}}function KC(e){let t,n,r,i,o,a,c=e[6],l=[];for(let t=0;t<c.length;t+=1)l[t]=QC(qC(e,c,t));return{c(){t=D("div"),n=D("h3"),n.textContent="Todas las categorias",r=P(),i=D("div");for(let e=0;e<l.length;e+=1)l[e].c();M(n,"class","titulo svelte-1bibeem"),M(i,"class","categorias svelte-1bibeem"),M(t,"class","contenidoAside")},m(s,c){x(s,t,c),S(t,n),S(t,r),S(t,i);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(i,null);o||(a=[$(n,"keypress",e[9]),$(n,"click",e[10])],o=!0)},p(e,t){if(320&t){let n;for(c=e[6],n=0;n<c.length;n+=1){const r=qC(e,c,n);l[n]?l[n].p(r,t):(l[n]=QC(r),l[n].c(),l[n].m(i,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=c.length}},d(e){e&&A(t),N(l,e),o=!1,s(a)}}}function HC(e){let t,n,r,i,a,c,l=e[17].nombre+"";return{c(){t=D("ul"),n=D("h5"),r=R(l),i=P(),M(n,"class","btnPathname svelte-1bibeem")},m(s,l){x(s,t,l),S(t,n),S(n,r),S(t,i),a||(c=[$(n,"keypress",(function(){o(e[8](e[2],e[17].valor))&&e[8](e[2],e[17].valor).apply(this,arguments)})),$(n,"click",(function(){o(e[8](e[2],e[17].valor))&&e[8](e[2],e[17].valor).apply(this,arguments)}))],a=!0)},p(t,n){e=t,2&n&&l!==(l=e[17].nombre+"")&&F(r,l)},d(e){e&&A(t),a=!1,s(c)}}}function WC(e){let t,n,r,i,a,c=e[20].nombre+"";return{c(){t=D("div"),n=D("p"),r=R(c),M(n,"class","btnSubcategorias svelte-1bibeem"),M(t,"class","subCategoria svelte-1bibeem")},m(s,c){x(s,t,c),S(t,n),S(n,r),i||(a=[$(n,"keypress",(function(){o(e[8](e[17].nombre,e[20].valor))&&e[8](e[17].nombre,e[20].valor).apply(this,arguments)})),$(n,"click",(function(){o(e[8](e[17].nombre,e[20].valor))&&e[8](e[17].nombre,e[20].valor).apply(this,arguments)}))],i=!0)},p(t,n){e=t,64&n&&c!==(c=e[20].nombre+"")&&F(r,c)},d(e){e&&A(t),i=!1,s(a)}}}function QC(e){let t,n,r,i,a,c,l,u=e[17].nombre+"",h=e[17].contenido,d=[];for(let t=0;t<h.length;t+=1)d[t]=WC(BC(e,h,t));return{c(){t=D("ul"),n=D("h5"),r=R(u),i=P();for(let e=0;e<d.length;e+=1)d[e].c();a=P(),M(n,"class","btnCategorias svelte-1bibeem")},m(s,u){x(s,t,u),S(t,n),S(n,r),S(t,i);for(let e=0;e<d.length;e+=1)d[e]&&d[e].m(t,null);S(t,a),c||(l=[$(n,"keypress",(function(){o(e[8](e[17].valor))&&e[8](e[17].valor).apply(this,arguments)})),$(n,"click",(function(){o(e[8](e[17].valor))&&e[8](e[17].valor).apply(this,arguments)}))],c=!0)},p(n,i){if(e=n,64&i&&u!==(u=e[17].nombre+"")&&F(r,u),320&i){let n;for(h=e[17].contenido,n=0;n<h.length;n+=1){const r=BC(e,h,n);d[n]?d[n].p(r,i):(d[n]=WC(r),d[n].c(),d[n].m(t,a))}for(;n<d.length;n+=1)d[n].d(1);d.length=h.length}},d(e){e&&A(t),N(d,e),c=!1,s(l)}}}function JC(e){let t,n;return t=new xC({props:{productos:e[14]}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.productos=e[14]),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function YC(e){let t,n;return t=new SC({}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function XC(e){let t,n,r=e[4]&&zC(e);return{c(){r&&r.c(),t=O()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[4]?r?(r.p(e,n),16&n&&ge(r,1)):(r=zC(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&A(t)}}}function ZC(e,t,n){let r,i,s,o;h(e,Jk,(e=>n(6,i=e))),h(e,qk,(e=>n(0,s=e))),h(e,yk,(e=>n(7,o=e)));let a,c,l=[],u=!1;setTimeout((()=>n(4,u=!0)),1e3),Q((async()=>{n(2,a=window.location.pathname.split("/")[2]),console.log(a),void 0===a?y(qk,s=await ek("productos"),s):(y(qk,s=await(async(e,t,n)=>{let r=[];try{const i=hh(Lu(YS,e),fh(t,"==",n));return(await wh(i)).forEach((e=>{r.push({...e.data(),id:e.id})})),r}catch(e){console.error("No es posible acceder a los documentos")}})("productos","categoria",a),s),n(3,c=a.replace(/^./,(e=>e.toUpperCase()))),n(1,l=i.filter((e=>e.valor===a))),n(1,l=l[0].contenido),console.log(l))}));return e.$$.update=()=>{1&e.$$.dirty&&n(5,r=s)},[s,l,a,c,u,r,i,o,(e,t="")=>{let i=[];""===t?(i=s.filter((t=>t.categoria===e)),n(5,r=i)):(i=s.filter((e=>e.sub_categoria===t)),n(5,r=i),console.log("hola",i))},()=>n(5,r=s),()=>n(5,r=s),()=>n(5,r=s),()=>n(5,r=s)]}class ex extends ke{constructor(e){super(),Se(this,e,ZC,XC,a,{})}}function tx(e){let t;return{c(){t=D("div"),t.innerHTML="<p>El correo o la contrasea proporcionados <br/> son incorrectos</p>",M(t,"class","mensajeError svelte-u1e0wq")},m(e,n){x(e,t,n)},d(e){e&&A(t)}}}function nx(t){let n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N=!t[2]&&tx();return{c(){n=D("section"),r=D("div"),i=D("h1"),i.textContent="Iniciar Sesin",o=P(),N&&N.c(),a=P(),c=D("form"),l=D("div"),u=D("input"),h=P(),d=D("label"),d.textContent="Correo",f=P(),p=D("div"),m=D("input"),g=P(),v=D("label"),v.textContent="Contrasea",y=P(),w=D("button"),w.textContent="Iniciar sesion",b=P(),_=D("a"),_.innerHTML='<p class="restablecerContrasena svelte-u1e0wq">Olvidast tu contrasea?</p>',I=P(),T=D("div"),E=D("button"),E.textContent="Registrarse",U(i,"margin","20px 0"),M(u,"type","email"),M(u,"class","form-control svelte-u1e0wq"),M(u,"id","floatingInput"),M(u,"placeholder","Correo"),M(d,"for","floatingInput"),M(l,"class","form-floating mb-3"),M(m,"type","password"),M(m,"class","form-control svelte-u1e0wq"),M(m,"id","floatingPassword"),M(m,"placeholder","Contrasea"),M(v,"for","floatingPassword"),M(p,"class","form-floating"),M(c,"action",""),M(w,"class","buttonLogin svelte-u1e0wq"),M(_,"href","/"),M(r,"class","divContainerLogin svelte-u1e0wq"),M(E,"class","buttonLogin svelte-u1e0wq"),M(T,"class","divContainerSingup"),M(n,"class","sectionLogin svelte-u1e0wq")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(r,o),N&&N.m(r,null),S(r,a),S(r,c),S(c,l),S(l,u),V(u,t[0]),S(l,h),S(l,d),S(c,f),S(c,p),S(p,m),V(m,t[1]),S(p,g),S(p,v),S(r,y),S(r,w),S(r,b),S(r,_),S(n,I),S(n,T),S(T,E),k||(C=[$(u,"input",t[4]),$(m,"input",t[5]),$(w,"click",L(t[3])),$(E,"click",t[6])],k=!0)},p(e,[t]){e[2]?N&&(N.d(1),N=null):N||(N=tx(),N.c(),N.m(r,a)),1&t&&u.value!==e[0]&&V(u,e[0]),2&t&&m.value!==e[1]&&V(m,e[1])},i:e,o:e,d(e){e&&A(n),N&&N.d(),k=!1,s(C)}}}function rx(e,t,n){let r="",i="",s=!0;return[r,i,s,async()=>{const e={correo:r,"contrasea":i};console.log(e),await ok(e)?Ze("/"):n(2,s=!1)},function(){r=this.value,n(0,r)},function(){i=this.value,n(1,i)},()=>Ze("/registro")]}class ix extends ke{constructor(e){super(),Se(this,e,rx,nx,a,{})}}function sx(e,t,n){const r=e.slice();return r[1]=t[n],r}function ox(e,t,n){const r=e.slice();return r[1]=t[n],r[5]=n,r}function ax(t){let n;return{c(){n=D("button"),M(n,"type","button"),M(n,"data-bs-target","#carouselExampleIndicators"),M(n,"data-bs-slide-to",t[5]+1),M(n,"aria-label","Slide "+(t[5]+2))},m(e,t){x(e,n,t)},p:e,d(e){e&&A(n)}}}function cx(e){let t,n,r,i;return{c(){t=D("div"),n=D("img"),i=P(),l(n.src,r=e[1])||M(n,"src",r),M(n,"class","d-block w-100"),M(n,"alt","Imagen_producto"),M(t,"class","carousel-item")},m(e,r){x(e,t,r),S(t,n),S(t,i)},p(e,t){1&t&&!l(n.src,r=e[1])&&M(n,"src",r)},d(e){e&&A(t)}}}function lx(t){let n,r,i,s,o,a,c,u,h,d,f,p,m,g,v=t[0].slice(1),y=[];for(let e=0;e<v.length;e+=1)y[e]=ax(ox(t,v,e));let w=t[0].slice(1),b=[];for(let e=0;e<w.length;e+=1)b[e]=cx(sx(t,w,e));return{c(){n=D("div"),r=D("div"),i=D("button"),s=P();for(let e=0;e<y.length;e+=1)y[e].c();o=P(),a=D("div"),c=D("div"),u=D("img"),d=P();for(let e=0;e<b.length;e+=1)b[e].c();f=P(),p=D("button"),p.innerHTML='<span class="carousel-control-prev-icon svelte-1257uk5" aria-hidden="true"></span> \n      <span class="visually-hidden">Previous</span>',m=P(),g=D("button"),g.innerHTML='<span class="carousel-control-next-icon svelte-1257uk5" aria-hidden="true"></span> \n      <span class="visually-hidden">Next</span>',M(i,"type","button"),M(i,"data-bs-target","#carouselExampleIndicators"),M(i,"data-bs-slide-to","0"),M(i,"class","active"),M(i,"aria-current","true"),M(i,"aria-label","Slide 1"),M(r,"class","carousel-indicators svelte-1257uk5"),l(u.src,h=t[0][0])||M(u,"src",h),M(u,"class","d-block w-100"),M(u,"alt","Imagen_Producto"),M(c,"class","carousel-item active"),M(a,"class","carousel-inner"),M(p,"class","carousel-control-prev"),M(p,"type","button"),M(p,"data-bs-target","#carouselExampleIndicators"),M(p,"data-bs-slide","prev"),M(g,"class","carousel-control-next"),M(g,"type","button"),M(g,"data-bs-target","#carouselExampleIndicators"),M(g,"data-bs-slide","next"),M(n,"id","carouselExampleIndicators"),M(n,"class","carousel slide")},m(e,t){x(e,n,t),S(n,r),S(r,i),S(r,s);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(r,null);S(n,o),S(n,a),S(a,c),S(c,u),S(a,d);for(let e=0;e<b.length;e+=1)b[e]&&b[e].m(a,null);S(n,f),S(n,p),S(n,m),S(n,g)},p(e,[t]){if(1&t){let n;for(v=e[0].slice(1),n=0;n<v.length;n+=1){const i=ox(e,v,n);y[n]?y[n].p(i,t):(y[n]=ax(i),y[n].c(),y[n].m(r,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=v.length}if(1&t&&!l(u.src,h=e[0][0])&&M(u,"src",h),1&t){let n;for(w=e[0].slice(1),n=0;n<w.length;n+=1){const r=sx(e,w,n);b[n]?b[n].p(r,t):(b[n]=cx(r),b[n].c(),b[n].m(a,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=w.length}},i:e,o:e,d(e){e&&A(n),N(y,e),N(b,e)}}}function ux(e,t,n){let{imagenes:r}=t;return console.log(r),e.$$set=e=>{"imagenes"in e&&n(0,r=e.imagenes)},[r]}class hx extends ke{constructor(e){super(),Se(this,e,ux,lx,a,{imagenes:0})}}function dx(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,O,L,U,j,q,B,z,G,K,H,W,Q,J,Y,X,Z,ee,te,ne,re,ie,se=e[1].nombre+"",oe=e[1].categoria+"",ae=e[1].sub_categoria+"",ce=e[1].precio+"",le=e[1].cantidad+"";function ue(e,t){return e[6]?px:fx}i=new hx({props:{imagenes:e[2]}});let he=ue(e),de=he(e),fe=e[4]&&mx();return{c(){t=D("section"),n=D("div"),r=D("div"),_e(i.$$.fragment),o=P(),a=D("div"),c=D("div"),de.c(),l=P(),u=D("br"),h=P(),d=D("h3"),f=R(se),p=P(),m=D("label"),g=R(oe),v=R(" > "),y=R(ae),w=P(),b=D("br"),_=P(),I=D("p"),T=R("$"),E=R(ce),k=P(),C=D("br"),N=P(),O=D("label"),L=R(le),U=R(" unds. restantes"),j=P(),q=D("br"),B=P(),z=D("div"),G=D("button"),G.textContent="-",K=P(),H=D("input"),W=P(),Q=D("button"),Q.textContent="+",J=P(),fe&&fe.c(),Y=P(),X=D("br"),Z=P(),ee=D("div"),te=D("button"),te.textContent="Agregar al carrito",M(r,"class","containerImgProducto svelte-weunpe"),M(c,"class","btnFavoritos svelte-weunpe"),M(d,"class","titulo svelte-weunpe"),M(m,"for",""),M(I,"class","precio svelte-weunpe"),M(O,"for",""),M(G,"class","buttonContador svelte-weunpe"),M(H,"type","text"),M(H,"class","inputCantidad svelte-weunpe"),M(Q,"class","buttonContador svelte-weunpe"),M(z,"class","cantidadesCompra svelte-weunpe"),M(te,"class","buttonLogin svelte-weunpe"),M(ee,"class","btnAcciones"),M(a,"class","containerInformacionProducto svelte-weunpe"),M(n,"class","containerContenido svelte-weunpe"),M(t,"class","containerPrincipal svelte-weunpe")},m(s,A){x(s,t,A),S(t,n),S(n,r),Ie(i,r,null),S(n,o),S(n,a),S(a,c),de.m(c,null),S(a,l),S(a,u),S(a,h),S(a,d),S(d,f),S(a,p),S(a,m),S(m,g),S(m,v),S(m,y),S(a,w),S(a,b),S(a,_),S(a,I),S(I,T),S(I,E),S(a,k),S(a,C),S(a,N),S(a,O),S(O,L),S(O,U),S(a,j),S(a,q),S(a,B),S(a,z),S(z,G),S(z,K),S(z,H),V(H,e[0]),S(z,W),S(z,Q),S(a,J),fe&&fe.m(a,null),S(a,Y),S(a,X),S(a,Z),S(a,ee),S(ee,te),ne=!0,re||(ie=[$(G,"click",e[9]),$(H,"input",e[15]),$(H,"blur",e[16]),$(Q,"click",e[8]),$(te,"click",e[12])],re=!0)},p(e,t){const n={};4&t&&(n.imagenes=e[2]),i.$set(n),he===(he=ue(e))&&de?de.p(e,t):(de.d(1),de=he(e),de&&(de.c(),de.m(c,null))),(!ne||2&t)&&se!==(se=e[1].nombre+"")&&F(f,se),(!ne||2&t)&&oe!==(oe=e[1].categoria+"")&&F(g,oe),(!ne||2&t)&&ae!==(ae=e[1].sub_categoria+"")&&F(y,ae),(!ne||2&t)&&ce!==(ce=e[1].precio+"")&&F(E,ce),(!ne||2&t)&&le!==(le=e[1].cantidad+"")&&F(L,le),1&t&&H.value!==e[0]&&V(H,e[0]),e[4]?fe||(fe=mx(),fe.c(),fe.m(a,Y)):fe&&(fe.d(1),fe=null)},i(e){ne||(ge(i.$$.fragment,e),ne=!0)},o(e){ve(i.$$.fragment,e),ne=!1},d(e){e&&A(t),Te(i),de.d(),fe&&fe.d(),re=!1,s(ie)}}}function fx(t){let n,r,i;return{c(){n=D("span"),n.textContent="heart_plus",M(n,"class","material-symbols-outlined icon svelte-weunpe")},m(e,s){x(e,n,s),r||(i=[$(n,"click",t[10]),$(n,"keypress",t[10])],r=!0)},p:e,d(e){e&&A(n),r=!1,s(i)}}}function px(t){let n,r,i;return{c(){n=D("span"),n.textContent="heart_minus",M(n,"class","material-symbols-outlined favorito svelte-weunpe")},m(e,s){x(e,n,s),r||(i=[$(n,"click",t[11]),$(n,"keypress",t[11])],r=!0)},p:e,d(e){e&&A(n),r=!1,s(i)}}}function mx(e){let t;return{c(){t=D("p"),t.textContent="El nmero solicitado a superado las cantidades disponibles o\r\n          permitidas",M(t,"class","mensajeError svelte-weunpe")},m(e,n){x(e,t,n)},d(e){e&&A(t)}}}function gx(e){let t,n;return t=new OC({props:{categoria:e[1].categoria,subCategoria:e[1].sub_categoria}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.categoria=e[1].categoria),2&n&&(r.subCategoria=e[1].sub_categoria),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function vx(e){let t,n;return t=new SC({props:{cantidadCompra:e[0]}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.cantidadCompra=e[0]),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function yx(e){let t,n,r,i,s,o=e[5]&&dx(e),a=e[3]&&gx(e),c=e[7]&&vx(e);return{c(){o&&o.c(),t=P(),n=D("div"),a&&a.c(),r=P(),c&&c.c(),i=O(),M(n,"class","containerPrincipal svelte-weunpe")},m(e,l){o&&o.m(e,l),x(e,t,l),x(e,n,l),a&&a.m(n,null),x(e,r,l),c&&c.m(e,l),x(e,i,l),s=!0},p(e,[r]){e[5]?o?(o.p(e,r),32&r&&ge(o,1)):(o=dx(e),o.c(),ge(o,1),o.m(t.parentNode,t)):o&&(pe(),ve(o,1,1,(()=>{o=null})),me()),e[3]?a?(a.p(e,r),8&r&&ge(a,1)):(a=gx(e),a.c(),ge(a,1),a.m(n,null)):a&&(pe(),ve(a,1,1,(()=>{a=null})),me()),e[7]?c?(c.p(e,r),128&r&&ge(c,1)):(c=vx(e),c.c(),ge(c,1),c.m(i.parentNode,i)):c&&(pe(),ve(c,1,1,(()=>{c=null})),me())},i(e){s||(ge(o),ge(a),ge(c),s=!0)},o(e){ve(o),ve(a),ve(c),s=!1},d(e){o&&o.d(e),e&&A(t),e&&A(n),a&&a.d(),e&&A(r),c&&c.d(e),e&&A(i)}}}function wx(e,t,n){let r,i,s,o;h(e,wk,(e=>n(14,i=e))),h(e,Lk,(e=>n(20,s=e))),h(e,yk,(e=>n(7,o=e)));let a,c=1,l={},u=[],d=[],f=!1,p=!1,{params:m}=t;console.log(m);let g=!1;setTimeout((()=>n(5,g=!0)),1500),(async()=>{await fk().then((e=>{d={...JSON.parse(localStorage.getItem(e)),key:e}})),a=window.location.pathname.split("/")[2],n(1,l=await tk("productos",a)),n(2,u=l.imagenes),n(3,f=!0);const e=d.favoritos.findIndex((e=>e.id===l.id));y(wk,i=-1!==e,i),d.favoritos.filter((e=>e.id==l.id)),console.log(e)})();return e.$$set=e=>{"params"in e&&n(13,m=e.params)},e.$$.update=()=>{16384&e.$$.dirty&&n(6,r=i)},[c,l,u,f,p,g,r,o,()=>{c>20||c>=parseInt(l.cantidad)?n(4,p=!0):n(0,c+=1)},()=>{c>=1&&(n(0,c-=1),(c<=20||c<parseInt(l.cantidad))&&n(4,p=!1))},async()=>{if(d.favoritos.length>0){const e=JSON.parse(localStorage.getItem(d.key));e.favoritos=[...e.favoritos,l];const t=JSON.stringify(e);localStorage.setItem(d.key,t),rk("usuarios",{favoritos:e.favoritos},e.id)}else{d.favoritos=[l];const e=JSON.parse(localStorage.getItem(d.key));e.favoritos=[...e.favoritos,l],n(6,r=e.favoritos);const t=JSON.stringify(e);localStorage.setItem(d.key,t),rk("usuarios",{favoritos:e.favoritos},e.id)}y(wk,i=!0,i)},()=>{const e=JSON.parse(localStorage.getItem(d.key));let t=e.favoritos.filter((e=>e.id!==l.id));e.favoritos=t,y(wk,i=!1,i);const n=JSON.stringify(e);localStorage.setItem(d.key,n),rk("usuarios",{favoritos:e.favoritos},e.id)},()=>{y(yk,o=!0,o),y(Lk,s=l,s),(async()=>{if(d.carrito.length>0){const e=JSON.parse(localStorage.getItem(d.key));e.carrito=[...e.carrito,{...l,cantidadCompra:c}];const t=JSON.stringify(e);localStorage.setItem(d.key,t),rk("usuarios",{carrito:e.carrito},e.id)}else{d.carrito=[l];const e=JSON.parse(localStorage.getItem(d.key));e.carrito=[...e.carrito,l];const t=JSON.stringify(e);localStorage.setItem(d.key,t),rk("usuarios",{carrito:e.carrito},e.id)}})()},m,i,function(){c=this.value,n(0,c)},()=>{(c>20||c>=parseInt(l.cantidad))&&n(4,p=!0)}]}class bx extends ke{constructor(e){super(),Se(this,e,wx,yx,a,{params:13})}}function _x(e){let t,n,r,i=e[0].cantidad+"";return{c(){t=D("p"),n=R(i),r=R(" unds. disponibles"),M(t,"class","disponibles svelte-1kmmx6r")},m(e,i){x(e,t,i),S(t,n),S(t,r)},p(e,t){1&t&&i!==(i=e[0].cantidad+"")&&F(n,i)},d(e){e&&A(t)}}}function Ix(t){let n;return{c(){n=D("p"),n.innerHTML="El nmero solicitado a superado <br/> las cantidades disponibles o permitidas",M(n,"class","mensajeError svelte-1kmmx6r")},m(e,t){x(e,n,t)},p:e,d(e){e&&A(n)}}}function Tx(t){let n,r,i,a,c,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,O,L,U,j,q,B,z=t[0].nombre+"",G=t[0].precio+"";function K(e,t){return e[1]?Ix:_x}let H=K(t),W=H(t);return{c(){n=D("div"),r=D("div"),i=D("img"),u=P(),h=D("div"),d=D("p"),f=R(z),p=P(),m=D("p"),g=R("$ "),v=R(G),y=P(),w=D("div"),b=D("div"),_=D("button"),_.textContent="-",I=P(),T=D("input"),E=P(),k=D("button"),k.textContent="+",C=P(),W.c(),N=P(),O=D("br"),L=P(),U=D("div"),j=D("i"),l(i.src,a=t[0].imagenes[0])||M(i,"src",a),M(i,"alt",c=t[0].nombre),M(i,"class","svelte-1kmmx6r"),M(r,"class","containerImg svelte-1kmmx6r"),M(d,"class","titulo"),M(h,"class","containerInformacion svelte-1kmmx6r"),M(_,"class","buttonContador svelte-1kmmx6r"),M(T,"type","text"),M(T,"class","inputCantidad svelte-1kmmx6r"),M(k,"class","buttonContador svelte-1kmmx6r"),M(b,"class","cantidadesCompra svelte-1kmmx6r"),M(w,"class","cantidades svelte-1kmmx6r"),M(j,"class","bi bi-trash3 icon svelte-1kmmx6r"),M(U,"class","btnBorrar svelte-1kmmx6r"),M(n,"class","contenidoInforProducto svelte-1kmmx6r")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(n,u),S(n,h),S(h,d),S(d,f),S(h,p),S(h,m),S(m,g),S(m,v),S(n,y),S(n,w),S(w,b),S(b,_),S(b,I),S(b,T),V(T,t[0].cantidadCompra),S(b,E),S(b,k),S(w,C),W.m(w,null),S(w,N),S(w,O),S(n,L),S(n,U),S(U,j),q||(B=[$(_,"click",t[3]),$(T,"input",t[6]),$(T,"blur",t[7]),$(k,"click",t[2]),$(j,"keypress",(function(){o(t[4](t[0].id))&&t[4](t[0].id).apply(this,arguments)})),$(j,"click",(function(){o(t[4](t[0].id))&&t[4](t[0].id).apply(this,arguments)}))],q=!0)},p(e,[n]){t=e,1&n&&!l(i.src,a=t[0].imagenes[0])&&M(i,"src",a),1&n&&c!==(c=t[0].nombre)&&M(i,"alt",c),1&n&&z!==(z=t[0].nombre+"")&&F(f,z),1&n&&G!==(G=t[0].precio+"")&&F(v,G),1&n&&T.value!==t[0].cantidadCompra&&V(T,t[0].cantidadCompra),H===(H=K(t))&&W?W.p(t,n):(W.d(1),W=H(t),W&&(W.c(),W.m(w,N)))},i:e,o:e,d(e){e&&A(n),W.d(),q=!1,s(B)}}}function Ex(e,t,n){let r,i,s;h(e,Rk,(e=>n(8,r=e))),h(e,xk,(e=>n(9,i=e))),h(e,Uk,(e=>n(10,s=e)));let{producto:o}=t,{usuario:a}=t,c=!1;const l=new Intl.NumberFormat("es-ES");return e.$$set=e=>{"producto"in e&&n(0,o=e.producto),"usuario"in e&&n(5,a=e.usuario)},[o,c,()=>{o.cantidadCompra>20||o.cantidadCompra>=parseInt(o.cantidad)?n(1,c=!0):n(0,o.cantidadCompra+=1,o)},()=>{o.cantidadCompra>=1&&(n(0,o.cantidadCompra-=1,o),(o.cantidadCompra<=20||o.cantidadCompra<parseInt(o.cantidad))&&n(1,c=!1))},async e=>{const t=JSON.parse(localStorage.getItem(a.key)),n=t.carrito.filter((t=>t.id!==e));t.carrito=n,y(Uk,s=t.carrito,s),y(xk,i=t.carrito.length,i);let c=0;console.log(parseFloat(r.replace(/\./g,""))),c=parseFloat(r.replace(/\./g,""))-1e3*parseFloat(o.precio)*o.cantidadCompra,y(Rk,r=l.format(c),r);const u=JSON.stringify(t);localStorage.setItem(a.key,u),rk("usuarios",{carrito:t.carrito},t.id)},a,function(){o.cantidadCompra=this.value,n(0,o)},()=>{(o.cantidadCompra>20||o.cantidadCompra>=parseInt(o.cantidad))&&n(1,c=!0)}]}class Sx extends ke{constructor(e){super(),Se(this,e,Ex,Tx,a,{producto:0,usuario:5})}}function kx(t){let n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k=t[0].receptor+"",C=t[0].primera_numeracion+"",N=t[0].segunda_numeracion+"",O=t[0].tercera_numeracion+"",$=t[0].barrio+"",L=t[0].ciudad+"",V=t[0].departamento+"";return{c(){n=D("div"),r=D("input"),s=P(),o=D("div"),a=D("label"),c=R("Receptor: "),l=R(k),u=P(),h=D("p"),d=R(t[1]),f=P(),p=R(C),m=R(" Nro. "),g=R(N),v=R(" - "),y=R(O),w=R(".\r\n      Barrio: "),b=R($),_=R(" / "),I=R(L),T=R(" - "),E=R(V),M(r,"type","radio"),M(r,"name","opcion"),M(r,"id","miCheckbox"),r.value=i=t[0].id,M(r,"class","svelte-7okiku"),M(a,"for","miCheckbox"),M(n,"class","container svelte-7okiku")},m(e,t){x(e,n,t),S(n,r),S(n,s),S(n,o),S(o,a),S(a,c),S(a,l),S(o,u),S(o,h),S(h,d),S(h,f),S(h,p),S(h,m),S(h,g),S(h,v),S(h,y),S(h,w),S(h,b),S(h,_),S(h,I),S(h,T),S(h,E)},p(e,[t]){1&t&&i!==(i=e[0].id)&&(r.value=i),1&t&&k!==(k=e[0].receptor+"")&&F(l,k),1&t&&C!==(C=e[0].primera_numeracion+"")&&F(p,C),1&t&&N!==(N=e[0].segunda_numeracion+"")&&F(g,N),1&t&&O!==(O=e[0].tercera_numeracion+"")&&F(y,O),1&t&&$!==($=e[0].barrio+"")&&F(b,$),1&t&&L!==(L=e[0].ciudad+"")&&F(I,L),1&t&&V!==(V=e[0].departamento+"")&&F(E,V)},i:e,o:e,d(e){e&&A(n)}}}function Cx(e,t,n){let r;h(e,Ok,(e=>n(2,r=e)));let{direccion:i}=t,s=i.tipo_de_calle.replace(/^./,(e=>e.toUpperCase()));return addEventListener("change",(()=>{const e=document.querySelectorAll("#miCheckbox");for(const t of e)t.checked&&y(Ok,r=t.value,r)})),e.$$set=e=>{"direccion"in e&&n(0,i=e.direccion)},[i,s]}class xx extends ke{constructor(e){super(),Se(this,e,Cx,kx,a,{direccion:0})}}function Ax(t){let n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,O,L,j,q,B,z,G,K,H,W,Q,J,Y,X,Z,ee,te,ne,re,ie,se,oe,ae,ce,le,ue,he,de,fe;return{c(){n=D("button"),r=R("Agregar tarjeta de "),i=R(t[0]),o=P(),a=D("div"),c=D("div"),l=D("h5"),u=R("Agregar tarjeta de "),h=R(t[4]),d=P(),f=D("button"),p=P(),m=D("div"),g=D("div"),v=D("div"),y=D("input"),w=P(),b=D("label"),b.textContent="Titular de la tarjeta",_=P(),I=D("p"),I.textContent="*Nombre del titular que aparece en la tarjeta",T=P(),E=D("div"),k=D("input"),C=P(),N=D("label"),N.textContent="Nmero de tarjeta",O=P(),L=D("p"),L.textContent="*Nmero que aparece en la parte frontal de la tarjeta",j=P(),q=D("div"),B=D("div"),z=D("input"),G=P(),K=D("label"),K.textContent="CVV",H=P(),W=D("p"),W.textContent="*Cdigo de seguridad",Q=P(),J=D("div"),Y=D("div"),X=D("div"),Z=D("input"),ee=P(),te=D("label"),te.textContent="Mes",ne=P(),re=D("div"),ie=D("input"),se=P(),oe=D("label"),oe.textContent="Ao",ae=P(),ce=D("p"),ce.textContent="*Fecha de vencimiento",le=P(),ue=D("div"),he=D("button"),he.textContent="Guardar tarjeta",M(n,"class","btnAgregarTarjeta svelte-1d4zjad"),M(n,"type","button"),M(n,"data-bs-toggle","offcanvas"),M(n,"data-bs-target","#offcanvasWithBothOptions"),M(n,"aria-controls","offcanvasWithBothOptions"),M(l,"class","offcanvas-title"),M(l,"id","offcanvasWithBothOptionsLabel"),M(f,"type","button"),M(f,"class","btn-close"),M(f,"data-bs-dismiss","offcanvas"),M(f,"aria-label","Close"),M(c,"class","offcanvas-header"),U(c,"padding","15px"),M(y,"type","text"),M(y,"class","form-control svelte-1d4zjad"),M(y,"id","floatingPassword"),M(y,"placeholder","Contrasea"),M(b,"for","floatingPassword"),M(I,"class","texto svelte-1d4zjad"),M(v,"class","form-floating"),M(k,"type","text"),M(k,"class","form-control svelte-1d4zjad"),M(k,"id","floatingPassword"),M(k,"placeholder","Contrasea"),M(k,"minlength","16"),M(k,"maxlength","16"),M(N,"for","floatingPassword"),M(L,"class","texto svelte-1d4zjad"),M(E,"class","form-floating"),M(z,"type","text"),M(z,"class","form-control svelte-1d4zjad"),M(z,"id","number"),M(z,"placeholder","Contrasea"),M(z,"maxlength","3"),M(K,"for","floatingPassword"),M(W,"class","texto svelte-1d4zjad"),M(B,"class","form-floating"),M(Z,"type","text"),M(Z,"class","form-control svelte-1d4zjad"),M(Z,"id","number"),M(Z,"placeholder","Contrasea"),M(Z,"maxlength","2"),M(te,"for","floatingPassword"),M(X,"class","form-floating"),M(ie,"type","text"),M(ie,"class","form-control svelte-1d4zjad"),M(ie,"id","number"),M(ie,"placeholder","Contrasea"),M(ie,"maxlength","2"),M(oe,"for","floatingPassword"),M(re,"class","form-floating"),M(Y,"class","svelte-1d4zjad"),M(ce,"class","texto svelte-1d4zjad"),M(J,"class","ContainerFechaVencimiento svelte-1d4zjad"),M(q,"class","fechaVencimiento svelte-1d4zjad"),M(he,"class","btnInformacion svelte-1d4zjad"),M(he,"data-bs-dismiss","offcanvas"),M(he,"aria-label","Close"),M(ue,"class","btnAgregar"),M(g,"class","containerBody svelte-1d4zjad"),M(m,"class","offcanvas-body svelte-1d4zjad"),M(a,"class","offcanvas offcanvas-start"),M(a,"data-bs-scroll","true"),M(a,"tabindex","-1"),M(a,"id","offcanvasWithBothOptions"),M(a,"aria-labelledby","offcanvasWithBothOptionsLabel")},m(e,s){x(e,n,s),S(n,r),S(n,i),x(e,o,s),x(e,a,s),S(a,c),S(c,l),S(l,u),S(l,h),S(c,d),S(c,f),S(a,p),S(a,m),S(m,g),S(g,v),S(v,y),V(y,t[3].propietario),S(v,w),S(v,b),S(v,_),S(v,I),S(g,T),S(g,E),S(E,k),V(k,t[3].numero_de_tarjeta),S(E,C),S(E,N),S(E,O),S(E,L),S(g,j),S(g,q),S(q,B),S(B,z),V(z,t[3].cvv),S(B,G),S(B,K),S(B,H),S(B,W),S(q,Q),S(q,J),S(J,Y),S(Y,X),S(X,Z),V(Z,t[1]),S(X,ee),S(X,te),S(Y,ne),S(Y,re),S(re,ie),V(ie,t[2]),S(re,se),S(re,oe),S(J,ae),S(J,ce),S(g,le),S(g,ue),S(ue,he),de||(fe=[$(n,"click",t[7]),$(y,"input",t[8]),$(k,"input",t[9]),$(z,"input",t[10]),$(Z,"input",t[11]),$(ie,"input",t[12]),$(he,"click",t[5])],de=!0)},p(e,[t]){1&t&&F(i,e[0]),16&t&&F(h,e[4]),8&t&&y.value!==e[3].propietario&&V(y,e[3].propietario),8&t&&k.value!==e[3].numero_de_tarjeta&&V(k,e[3].numero_de_tarjeta),8&t&&z.value!==e[3].cvv&&V(z,e[3].cvv),2&t&&Z.value!==e[1]&&V(Z,e[1]),4&t&&ie.value!==e[2]&&V(ie,e[2])},i:e,o:e,d(e){e&&A(n),e&&A(o),e&&A(a),de=!1,s(fe)}}}function Nx(e,t,n){let r,i;h(e,Wk,(e=>n(3,r=e))),h(e,Nk,(e=>n(4,i=e)));let{nombre_tarjeta:s}=t,{propietario:o}=t,a="",c="";s.replace(/^./,(e=>e.toUpperCase()));const l=()=>{y(Wk,r.propietario="",r),y(Wk,r.numero_de_tarjeta="",r),y(Wk,r.fecha_de_vencimiento="",r),y(Wk,r.cvv="",r)};return e.$$set=e=>{"nombre_tarjeta"in e&&n(0,s=e.nombre_tarjeta),"propietario"in e&&n(6,o=e.propietario)},[s,a,c,r,i,()=>{let e={estado:!0,propietario:r.propietario,numero_de_tarjeta:r.numero_de_tarjeta,cvv:r.cvv,fecha_de_vencimiento:a+"/"+c,modo:i};const t=JSON.parse(localStorage.getItem(o.key));let n=o.metodos_de_pago.findIndex((e=>e.modo===i));o.metodos_de_pago[n].estado||(t.metodos_de_pago[n]=e),console.log(t.metodos_de_pago);const s=JSON.stringify(t);localStorage.setItem(o.key,s),rk("usuarios",{metodos_de_pago:t.metodos_de_pago},o.id).then((()=>{console.log("Guardado exitoso")})),l()},o,()=>y(Nk,i=s,i),function(){r.propietario=this.value,Wk.set(r)},function(){r.numero_de_tarjeta=this.value,Wk.set(r)},function(){r.cvv=this.value,Wk.set(r)},function(){a=this.value,n(1,a)},function(){c=this.value,n(2,c)}]}class Dx extends ke{constructor(e){super(),Se(this,e,Nx,Ax,a,{nombre_tarjeta:0,propietario:6})}}function Rx(t){let n,r,i,s,o,a,c,u,h,d,f,p,m,g,v,y,w=t[0].propietario+"",b=t[0].numero_de_tarjeta.slice(-4)+"";return{c(){n=D("div"),r=D("input"),s=P(),o=D("div"),a=D("img"),h=P(),d=D("label"),f=R("Propietario: "),p=R(w),m=P(),g=D("p"),v=R("Nmero. xxxx - xxxx - xxxx - "),y=R(b),M(r,"type","radio"),M(r,"name","metodo"),M(r,"id","miCheckbox2"),r.value=i=t[0].id,M(r,"class","svelte-b498ys"),l(a.src,c=t[1])||M(a,"src",c),M(a,"alt",u="Tarjeta "+t[0].modo),M(a,"class","svelte-b498ys"),M(d,"for","miCheckbox"),M(n,"class","container svelte-b498ys")},m(e,t){x(e,n,t),S(n,r),S(n,s),S(n,o),S(o,a),S(o,h),S(o,d),S(d,f),S(d,p),S(o,m),S(o,g),S(g,v),S(g,y)},p(e,[t]){1&t&&i!==(i=e[0].id)&&(r.value=i),2&t&&!l(a.src,c=e[1])&&M(a,"src",c),1&t&&u!==(u="Tarjeta "+e[0].modo)&&M(a,"alt",u),1&t&&w!==(w=e[0].propietario+"")&&F(p,w),1&t&&b!==(b=e[0].numero_de_tarjeta.slice(-4)+"")&&F(y,b)},i:e,o:e,d(e){e&&A(n)}}}function Px(e,t,n){let{tarjeta:r}=t,{imagen:i}=t;return e.$$set=e=>{"tarjeta"in e&&n(0,r=e.tarjeta),"imagen"in e&&n(1,i=e.imagen)},[r,i]}class Ox extends ke{constructor(e){super(),Se(this,e,Px,Rx,a,{tarjeta:0,imagen:1})}}function $x(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Lx(e,t,n){const r=e.slice();return r[13]=t[n],r}function Mx(e){let t,n;return t=new xx({props:{direccion:e[13]}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.direccion=e[13]),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function Fx(e){let t,n,r,i,s,o,a;return o=new Dx({props:{nombre_tarjeta:e[10].modo,propietario:e[0]}}),{c(){t=D("div"),n=D("img"),s=P(),_e(o.$$.fragment),l(n.src,r=e[2][e[12]])||M(n,"src",r),M(n,"alt",i="Tarjeta "+e[10].modo),M(n,"class","svelte-1m36lp8"),M(t,"class","btnAgregarTarjeta svelte-1m36lp8")},m(e,r){x(e,t,r),S(t,n),S(t,s),Ie(o,t,null),a=!0},p(e,t){(!a||1&t&&i!==(i="Tarjeta "+e[10].modo))&&M(n,"alt",i);const r={};1&t&&(r.nombre_tarjeta=e[10].modo),1&t&&(r.propietario=e[0]),o.$set(r)},i(e){a||(ge(o.$$.fragment,e),a=!0)},o(e){ve(o.$$.fragment,e),a=!1},d(e){e&&A(t),Te(o)}}}function Vx(e){let t,n;return t=new Ox({props:{tarjeta:e[10],imagen:e[2][e[12]]}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.tarjeta=e[10]),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function Ux(e){let t,n,r,i,s;const o=[Vx,Fx],a=[];function c(e,t){return e[10].estado?0:1}return n=c(e),r=a[n]=o[n](e),{c(){t=D("div"),r.c(),i=P(),M(t,"class","containerMetodo tarjetas svelte-1m36lp8")},m(e,r){x(e,t,r),a[n].m(t,null),S(t,i),s=!0},p(e,s){let l=n;n=c(e),n===l?a[n].p(e,s):(pe(),ve(a[l],1,1,(()=>{a[l]=null})),me(),r=a[n],r?r.p(e,s):(r=a[n]=o[n](e),r.c()),ge(r,1),r.m(t,i))},i(e){s||(ge(r),s=!0)},o(e){ve(r),s=!1},d(e){e&&A(t),a[n].d()}}}function jx(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,R,O,L,F,V,U,j,q,B,z,G,K,H,W,Q,J,Y,X,Z;g=new tC({props:{variable:"nombre",mensaje:"Nombre",directorio:e[1]}}),y=new tC({props:{variable:"apellido",mensaje:"Apellido",directorio:e[1]}}),b=new tC({props:{variable:"documento_de_identidad",mensaje:"Doc. identidad",directorio:e[1]}}),I=new tC({props:{variable:"telefono",mensaje:"Telefno",directorio:e[1]}});let ee=e[0].direcciones,te=[];for(let t=0;t<ee.length;t+=1)te[t]=Mx(Lx(e,ee,t));const ne=e=>ve(te[e],1,1,(()=>{te[e]=null}));let re=e[0].metodos_de_pago,ie=[];for(let t=0;t<re.length;t+=1)ie[t]=Ux($x(e,re,t));const se=e=>ve(ie[e],1,1,(()=>{ie[e]=null}));return{c(){t=D("section"),n=D("div"),r=D("div"),i=D("i"),o=P(),a=D("div"),a.textContent="Pasos finales",c=P(),l=D("div"),u=D("div"),h=D("div"),d=D("h2"),d.innerHTML='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">1. Datos personales</button>',f=P(),p=D("div"),m=D("div"),_e(g.$$.fragment),v=P(),_e(y.$$.fragment),w=P(),_e(b.$$.fragment),_=P(),_e(I.$$.fragment),T=P(),E=D("div"),k=D("h2"),k.innerHTML='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">2. Direccin de envio</button>',C=P(),R=D("div"),O=D("div"),L=D("form");for(let e=0;e<te.length;e+=1)te[e].c();F=P(),V=D("div"),U=D("h2"),U.innerHTML='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">3. Mtodo de pago</button>',j=P(),q=D("div"),B=D("div");for(let e=0;e<ie.length;e+=1)ie[e].c();z=P(),G=D("div"),G.innerHTML='<input type="radio" name="metodo"/> \n                <img src="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/banners%2F3.png?alt=media&amp;token=cbe3d6c1-6d74-43d8-8e20-a4d7dcfeba3f" alt="Efecty" class="svelte-1m36lp8"/> \n                <p class="svelte-1m36lp8">Efecty</p>',K=P(),H=D("div"),H.innerHTML='<input type="radio" name="metodo"/> \n                <img src="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/banners%2F4.png?alt=media&amp;token=996f1da0-e506-4222-9051-7b2afd3b37e9" alt="PSE" class="svelte-1m36lp8"/> \n                <p class="svelte-1m36lp8">PSE</p>',W=P(),Q=D("div"),J=D("button"),J.textContent="Finalizar compra",M(i,"class","bi bi-x-lg icon svelte-1m36lp8"),M(r,"class","btnClose svelte-1m36lp8"),M(a,"class","titulo svelte-1m36lp8"),M(d,"class","accordion-header"),M(m,"class","accordion-body inputPerfil svelte-1m36lp8"),M(p,"id","panelsStayOpen-collapseOne"),M(p,"class","accordion-collapse collapse show"),M(h,"class","accordion-item"),M(k,"class","accordion-header"),M(L,"id","miFormulario"),M(L,"class","svelte-1m36lp8"),M(O,"class","accordion-body svelte-1m36lp8"),M(R,"id","panelsStayOpen-collapseTwo"),M(R,"class","accordion-collapse collapse"),M(E,"class","accordion-item"),M(U,"class","accordion-header"),M(G,"class","containerMetodo svelte-1m36lp8"),M(H,"class","containerMetodo svelte-1m36lp8"),M(B,"class","accordion-body metodos svelte-1m36lp8"),M(q,"id","panelsStayOpen-collapseThree"),M(q,"class","accordion-collapse collapse"),M(V,"class","accordion-item"),M(u,"class","accordion"),M(u,"id","accordionPanelsStayOpenExample"),M(l,"class","pasosFinales"),M(J,"class","btnInformacion svelte-1m36lp8"),M(Q,"class","contenedorBtnComprar svelte-1m36lp8"),M(n,"class","contenido_pasarela svelte-1m36lp8"),M(t,"class","contenedor svelte-1m36lp8")},m(s,A){x(s,t,A),S(t,n),S(n,r),S(r,i),S(n,o),S(n,a),S(n,c),S(n,l),S(l,u),S(u,h),S(h,d),S(h,f),S(h,p),S(p,m),Ie(g,m,null),S(m,v),Ie(y,m,null),S(m,w),Ie(b,m,null),S(m,_),Ie(I,m,null),S(u,T),S(u,E),S(E,k),S(E,C),S(E,R),S(R,O),S(O,L);for(let e=0;e<te.length;e+=1)te[e]&&te[e].m(L,null);S(u,F),S(u,V),S(V,U),S(V,j),S(V,q),S(q,B);for(let e=0;e<ie.length;e+=1)ie[e]&&ie[e].m(B,null);S(B,z),S(B,G),S(B,K),S(B,H),S(n,W),S(n,Q),S(Q,J),Y=!0,X||(Z=[$(i,"keypress",e[3]),$(i,"click",e[3]),$(J,"click",e[4])],X=!0)},p(e,[t]){const n={};2&t&&(n.directorio=e[1]),g.$set(n);const r={};2&t&&(r.directorio=e[1]),y.$set(r);const i={};2&t&&(i.directorio=e[1]),b.$set(i);const s={};if(2&t&&(s.directorio=e[1]),I.$set(s),1&t){let n;for(ee=e[0].direcciones,n=0;n<ee.length;n+=1){const r=Lx(e,ee,n);te[n]?(te[n].p(r,t),ge(te[n],1)):(te[n]=Mx(r),te[n].c(),ge(te[n],1),te[n].m(L,null))}for(pe(),n=ee.length;n<te.length;n+=1)ne(n);me()}if(5&t){let n;for(re=e[0].metodos_de_pago,n=0;n<re.length;n+=1){const r=$x(e,re,n);ie[n]?(ie[n].p(r,t),ge(ie[n],1)):(ie[n]=Ux(r),ie[n].c(),ge(ie[n],1),ie[n].m(B,z))}for(pe(),n=re.length;n<ie.length;n+=1)se(n);me()}},i(e){if(!Y){ge(g.$$.fragment,e),ge(y.$$.fragment,e),ge(b.$$.fragment,e),ge(I.$$.fragment,e);for(let e=0;e<ee.length;e+=1)ge(te[e]);for(let e=0;e<re.length;e+=1)ge(ie[e]);Y=!0}},o(e){ve(g.$$.fragment,e),ve(y.$$.fragment,e),ve(b.$$.fragment,e),ve(I.$$.fragment,e),te=te.filter(Boolean);for(let e=0;e<te.length;e+=1)ve(te[e]);ie=ie.filter(Boolean);for(let e=0;e<ie.length;e+=1)ve(ie[e]);Y=!1},d(e){e&&A(t),Te(g),Te(y),Te(b),Te(I),N(te,e),N(ie,e),X=!1,s(Z)}}}function qx(e,t,n){let r,i,s,o,a,c;h(e,xk,(e=>n(5,r=e))),h(e,Tk,(e=>n(6,i=e))),h(e,Uk,(e=>n(7,s=e))),h(e,Rk,(e=>n(8,o=e))),h(e,Ok,(e=>n(9,a=e))),h(e,Hk,(e=>n(1,c=e)));let{usuario:l}=t;y(Hk,c.nombre=l.nombre,c),y(Hk,c.apellido=l.apellido,c),y(Hk,c.telefono=l.telefono,c),y(Hk,c.documento_de_identidad=l.documento_de_identidad,c),l.carrito=s;return e.$$set=e=>{"usuario"in e&&n(0,l=e.usuario)},e.$$.update=()=>{e.$$.dirty},[l,c,["https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/banners%2F1.png?alt=media&token=be1b778b-0e1e-4afc-af54-05ba4e4c9e98","https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/banners%2F2.png?alt=media&token=4a087dd4-7370-4b55-adb0-19e93b40b55b"],()=>{y(Tk,i=!1,i)},async()=>{const e=mk();let t=l.direcciones.filter((e=>e.id===a));console.log(t);let n=s.map((e=>({nombre:e.nombre,imagen:e.imagenes[0],cantidad:e.cantidadCompra,precio:e.precio}))),c={carrito:n,referencia_pedido:e,fecha_compra:new Date,total:o},u={carrito:n,referencia_pedido:e,nombre_cliente:l.nombre+" "+l.apellido,documento_cliente:l.documento_de_identidad,telefono_cliente:l.telefono,direccion_de_envio:t==[]?l.direccion[0]:t,fecha_compra:new Date,total:o};const h=JSON.parse(localStorage.getItem(l.key));h.pedidos=[...h.pedidos,c],h.carrito=[],y(Uk,s=[],s);const d=JSON.stringify(h);localStorage.setItem(l.key,d),await nk("pedidos",u).then((()=>{rk("usuarios",{pedidos:h.pedidos},l.id),rk("usuarios",{carrito:h.carrito},l.id),y(Tk,i=!1,i),y(xk,r=0,r),Ze("/perfil_usuario/pedidos")}))}]}class Bx extends ke{constructor(e){super(),Se(this,e,qx,jx,a,{usuario:0})}}function zx(e,t,n){const r=e.slice();return r[14]=t[n],r}function Gx(e,t,n){const r=e.slice();return r[17]=t[n],r}function Kx(t){let n,r,i,s,o,a,c,l,u,h,d,f,p;return h=new dC({}),{c(){n=D("div"),r=D("div"),i=D("div"),i.innerHTML='<div class="contenedorImg svelte-10sffkg"><img src="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/Empty-cart.svg?alt=media&amp;token=cc01bf5a-f161-452e-9698-a871def742e7" alt="Imagen" class="svelte-10sffkg"/></div> \n        <div class="texto svelte-10sffkg"><h5 class="svelte-10sffkg">Tu Carro est vaco</h5> \n          <p>Inicia sesin para ver los productos que <br/> habias guardado en tu\n            carro</p></div>',s=P(),o=D("div"),a=D("button"),a.textContent="Iniciar sesin",c=P(),l=D("div"),l.innerHTML='<p class="svelte-10sffkg">No tienes una cuenta?</p> \n        <a href="/registro" class="svelte-10sffkg">Regstrate</a>',u=P(),_e(h.$$.fragment),M(i,"class","mensaje svelte-10sffkg"),M(a,"class","btnInformacion svelte-10sffkg"),M(o,"class","btnInicioSesion svelte-10sffkg"),M(l,"class","registro svelte-10sffkg"),M(r,"class","contenido2 svelte-10sffkg"),M(n,"class","contenedor svelte-10sffkg")},m(e,m){x(e,n,m),S(n,r),S(r,i),S(r,s),S(r,o),S(o,a),S(r,c),S(r,l),x(e,u,m),Ie(h,e,m),d=!0,f||(p=$(a,"click",t[10]),f=!0)},p:e,i(e){d||(ge(h.$$.fragment,e),d=!0)},o(e){ve(h.$$.fragment,e),d=!1},d(e){e&&A(n),e&&A(u),Te(h,e),f=!1,p()}}}function Hx(e){let t,n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,L,V,U,j,q,B,z,G=e[1].length+"";function K(e,t){return e[1].length>0?Qx:Wx}let H=K(e),W=H(e);const Q=[Yx,Jx],J=[];function Y(e,t){return e[1].length>0?0:1}i=Y(e),s=J[i]=Q[i](e);let X=e[1],Z=[];for(let t=0;t<X.length;t+=1)Z[t]=Zx(zx(e,X,t));let ee=e[4]&&eA(e);return{c(){t=D("div"),n=D("div"),W.c(),r=P(),s.c(),o=P(),a=D("div"),c=D("div"),c.innerHTML='<h1 class="titulo svelte-10sffkg">Resumen de la orden</h1>',l=P(),u=D("div"),h=D("p"),d=R("Productos ("),f=R(G),p=R(")"),m=P(),g=D("p"),v=R("$"),y=R(e[2]),w=P(),b=D("div"),_=D("div"),I=D("h2"),I.innerHTML='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">Descripcin de los productos</button>',T=P(),E=D("div"),k=D("div");for(let e=0;e<Z.length;e+=1)Z[e].c();C=P(),L=D("div"),V=D("button"),V.textContent="Continuar compra",U=P(),ee&&ee.c(),j=O(),M(n,"class","contenido svelte-10sffkg"),M(u,"class","contenidoFactura svelte-10sffkg"),M(I,"class","accordion-header"),M(k,"class","accordion-body"),M(E,"id","flush-collapseOne"),M(E,"class","accordion-collapse collapse"),M(E,"data-bs-parent","#accordionFlushExample"),M(_,"class","accordion-item"),M(b,"class","accordion accordion-flush"),M(b,"id","accordionFlushExample"),M(V,"class","btnInformacion svelte-10sffkg"),M(L,"class","acciones svelte-10sffkg"),M(a,"class","informacionPago svelte-10sffkg"),M(t,"class","contenedorGeneral svelte-10sffkg")},m(s,A){x(s,t,A),S(t,n),W.m(n,null),S(n,r),J[i].m(n,null),S(t,o),S(t,a),S(a,c),S(a,l),S(a,u),S(u,h),S(h,d),S(h,f),S(h,p),S(u,m),S(u,g),S(g,v),S(g,y),S(a,w),S(a,b),S(b,_),S(_,I),S(_,T),S(_,E),S(E,k);for(let e=0;e<Z.length;e+=1)Z[e]&&Z[e].m(k,null);S(a,C),S(a,L),S(L,V),x(s,U,A),ee&&ee.m(s,A),x(s,j,A),q=!0,B||(z=$(V,"click",e[9]),B=!0)},p(e,t){H===(H=K(e))&&W?W.p(e,t):(W.d(1),W=H(e),W&&(W.c(),W.m(n,r)));let o=i;if(i=Y(e),i===o?J[i].p(e,t):(pe(),ve(J[o],1,1,(()=>{J[o]=null})),me(),s=J[i],s?s.p(e,t):(s=J[i]=Q[i](e),s.c()),ge(s,1),s.m(n,null)),(!q||2&t)&&G!==(G=e[1].length+"")&&F(f,G),(!q||4&t)&&F(y,e[2]),66&t){let n;for(X=e[1],n=0;n<X.length;n+=1){const r=zx(e,X,n);Z[n]?Z[n].p(r,t):(Z[n]=Zx(r),Z[n].c(),Z[n].m(k,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=X.length}e[4]?ee?(ee.p(e,t),16&t&&ge(ee,1)):(ee=eA(e),ee.c(),ge(ee,1),ee.m(j.parentNode,j)):ee&&(pe(),ve(ee,1,1,(()=>{ee=null})),me())},i(e){q||(ge(s),ge(ee),q=!0)},o(e){ve(s),ve(ee),q=!1},d(e){e&&A(t),W.d(),J[i].d(),N(Z,e),e&&A(U),ee&&ee.d(e),e&&A(j),B=!1,z()}}}function Wx(t){let n;return{c(){n=D("h1"),n.textContent="Carro",M(n,"class","titulo svelte-10sffkg")},m(e,t){x(e,n,t)},p:e,d(e){e&&A(n)}}}function Qx(e){let t,n,r,i,s=e[1].length+"";return{c(){t=D("h1"),n=R("Carro ("),r=R(s),i=R(" productos)"),M(t,"class","titulo svelte-10sffkg")},m(e,s){x(e,t,s),S(t,n),S(t,r),S(t,i)},p(e,t){2&t&&s!==(s=e[1].length+"")&&F(r,s)},d(e){e&&A(t)}}}function Jx(t){let n;return{c(){n=D("div"),n.innerHTML='<div class="contenedorImg svelte-10sffkg"><img src="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/ilustraciones%2FShopping.svg?alt=media&amp;token=602dc686-e400-4573-a818-7a6856117ceb" alt="Imagen" class="svelte-10sffkg"/></div> \n          <div class="texto svelte-10sffkg"><h5 class="svelte-10sffkg">No has agregado ningn producto al carrito</h5></div>',M(n,"class","mensaje svelte-10sffkg")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&A(n)}}}function Yx(e){let t,n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=Xx(Gx(e,r,t));const s=e=>ve(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=O()},m(e,r){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,r);x(e,t,r),n=!0},p(e,n){if(3&n){let o;for(r=e[1],o=0;o<r.length;o+=1){const s=Gx(e,r,o);i[o]?(i[o].p(s,n),ge(i[o],1)):(i[o]=Xx(s),i[o].c(),ge(i[o],1),i[o].m(t.parentNode,t))}for(pe(),o=r.length;o<i.length;o+=1)s(o);me()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)ge(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ve(i[e]);n=!1},d(e){N(i,e),e&&A(t)}}}function Xx(e){let t,n,r,i;return n=new Sx({props:{producto:e[17],usuario:e[0]}}),{c(){t=D("div"),_e(n.$$.fragment),r=P(),M(t,"class","intento svelte-10sffkg")},m(e,s){x(e,t,s),Ie(n,t,null),S(t,r),i=!0},p(e,t){const r={};2&t&&(r.producto=e[17]),1&t&&(r.usuario=e[0]),n.$set(r)},i(e){i||(ge(n.$$.fragment,e),i=!0)},o(e){ve(n.$$.fragment,e),i=!1},d(e){e&&A(t),Te(n)}}}function Zx(e){let t,n,r,i,s,o,a,c,l=e[14].nombre+"",u=e[6](e[14].precio,e[14].cantidadCompra)+"";return{c(){t=D("div"),n=D("p"),r=R(l),i=P(),s=D("p"),o=R("$ "),a=R(u),c=P(),M(n,"id","nombreProducto"),M(n,"class","svelte-10sffkg"),M(s,"id","precioProducto"),M(t,"class","contenidoDescripcion svelte-10sffkg")},m(e,l){x(e,t,l),S(t,n),S(n,r),S(t,i),S(t,s),S(s,o),S(s,a),S(t,c)},p(e,t){2&t&&l!==(l=e[14].nombre+"")&&F(r,l),2&t&&u!==(u=e[6](e[14].precio,e[14].cantidadCompra)+"")&&F(a,u)},d(e){e&&A(t)}}}function eA(e){let t,n;return t=new Bx({props:{usuario:e[0]}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.usuario=e[0]),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function tA(e){let t,n,r,i;const s=[Hx,Kx],o=[];function a(e,t){return e[3]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function nA(e,t,n){let r,i,s,o,a,c,l;h(e,bk,(e=>n(3,s=e))),h(e,Rk,(e=>n(7,o=e))),h(e,Uk,(e=>n(8,a=e))),h(e,Tk,(e=>n(4,c=e))),h(e,_k,(e=>n(5,l=e)));let u=[],d=0;const f=new Intl.NumberFormat("es-ES");Q((async()=>{await fk().then((e=>{n(0,u={...JSON.parse(localStorage.getItem(e)),key:e}),y(Uk,a=u.carrito,a);for(let e=0;e<a.length;e++){let t=a[e].precio.replace(".","");d=parseFloat(t)*a[e].cantidadCompra+d,y(Rk,o=d,o),console.log(d)}u.cantidadCompra,y(Rk,o=f.format(o),o),y(bk,s=!0,s)})).catch((e=>{y(bk,s=!1,s)}))}));return e.$$.update=()=>{128&e.$$.dirty&&n(2,r=o),256&e.$$.dirty&&n(1,i=a)},[u,i,r,s,c,l,(e,t)=>{let n=1e3*parseFloat(e)*t;return f.format(n)},o,a,()=>y(Tk,c=!0,c),()=>y(_k,l=!0,l)]}class rA extends ke{constructor(e){super(),Se(this,e,nA,tA,a,{})}}function iA(t){let n,r,i,s,o,a,c,u,h,d;return{c(){n=D("section"),r=D("div"),i=D("img"),o=P(),a=D("p"),a.textContent="Lo sentimos, no hemos encontrado la pagina que buscas.",c=P(),u=D("button"),u.textContent="Volver al inicio",l(i.src,s="https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/ilustraciones%2F404.svg?alt=media&token=203f9b81-4287-4f00-ae4a-4f6520816807")||M(i,"src","https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/ilustraciones%2F404.svg?alt=media&token=203f9b81-4287-4f00-ae4a-4f6520816807"),M(i,"alt","Error 404"),M(i,"class","svelte-1guh5bz"),M(a,"class","svelte-1guh5bz"),M(u,"class","btnInformacion svelte-1guh5bz"),M(r,"class","contenido svelte-1guh5bz"),M(n,"class","containerGeneral svelte-1guh5bz")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(r,o),S(r,a),S(r,c),S(r,u),h||(d=$(u,"click",t[0]),h=!0)},p:e,i:e,o:e,d(e){e&&A(n),h=!1,d()}}}function sA(e){return[()=>Ze("/")]}class oA extends ke{constructor(e){super(),Se(this,e,sA,iA,a,{})}}function aA(e){let t,n,r;return{c(){t=D("a"),n=R("Hola, "),r=R(e[3]),M(t,"class","nav-link dropdown-toggle saludo svelte-19n7xrw"),M(t,"href","a"),M(t,"role","button"),M(t,"data-bs-toggle","dropdown"),M(t,"aria-expanded","false")},m(e,i){x(e,t,i),S(t,n),S(t,r)},p(e,t){8&t&&F(r,e[3])},d(e){e&&A(t)}}}function cA(t){let n;return{c(){n=D("a"),n.innerHTML="Hola, <br/> Inicia Sesin",M(n,"class","nav-link dropdown-toggle saludo svelte-19n7xrw"),M(n,"href","a"),M(n,"role","button"),M(n,"data-bs-toggle","dropdown"),M(n,"aria-expanded","false")},m(e,t){x(e,n,t)},p:e,d(e){e&&A(n)}}}function lA(t){let n,r,i,s,o,a,c,l;return{c(){n=D("li"),n.innerHTML='<a class="dropdown-item svelte-19n7xrw" href="/perfil_usuario/informacion_personal">Perfil personal</a> \n            <a class="dropdown-item svelte-19n7xrw" href="/perfil_usuario/lista_de_deseos">Lista de deseos</a> \n            <a class="dropdown-item svelte-19n7xrw" href="/perfil_usuario/pedidos">Mis Pedidos</a>',r=P(),i=D("li"),i.innerHTML='<hr class="dropdown-divider"/>',s=P(),o=D("li"),a=D("a"),a.textContent="Cerrar Sesion",M(a,"class","dropdown-item svelte-19n7xrw"),M(a,"href","/")},m(e,t){x(e,n,t),x(e,r,t),x(e,i,t),x(e,s,t),x(e,o,t),S(o,a),c||(l=$(a,"click",ak),c=!0)},p:e,d(e){e&&A(n),e&&A(r),e&&A(i),e&&A(s),e&&A(o),c=!1,l()}}}function uA(t){let n,r,i,s,o,a,c,l;return{c(){n=D("li"),n.innerHTML='<a class="dropdown-item svelte-19n7xrw" href="/perfil_usuario/informacion_personal">Perfil personal</a> \n            <a class="dropdown-item svelte-19n7xrw" href="/perfil_usuario/administrar_productos">Administrar productos</a> \n            <a class="dropdown-item svelte-19n7xrw" href="/central_pedidos">Central de pedidos</a>',r=P(),i=D("li"),i.innerHTML='<hr class="dropdown-divider"/>',s=P(),o=D("li"),a=D("a"),a.textContent="Cerrar Sesion",M(a,"class","dropdown-item svelte-19n7xrw"),M(a,"href","/")},m(e,t){x(e,n,t),x(e,r,t),x(e,i,t),x(e,s,t),x(e,o,t),S(o,a),c||(l=$(a,"click",ak),c=!0)},p:e,d(e){e&&A(n),e&&A(r),e&&A(i),e&&A(s),e&&A(o),c=!1,l()}}}function hA(t){let n,r,i,o,a,c;return{c(){n=D("li"),r=D("p"),r.textContent="Iniciar Sesion",i=P(),o=D("a"),o.textContent="Registrarse",M(r,"class","dropdown-item inicioSesion svelte-19n7xrw"),M(o,"class","dropdown-item svelte-19n7xrw"),M(o,"href","/registro")},m(e,s){x(e,n,s),S(n,r),S(n,i),S(n,o),a||(c=[$(r,"keypress",t[7]),$(r,"click",t[8])],a=!0)},p:e,d(e){e&&A(n),a=!1,s(c)}}}function dA(t){let n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I;function T(e,t){return e[1]?cA:aA}let E=T(t),k=E(t);function C(e,t){return e[1]?hA:"admin"===e[2]?uA:lA}let N=C(t),O=N(t);return{c(){n=D("div"),r=D("div"),r.innerHTML='<a href="/" class="svelte-19n7xrw"><img src="/Logo.svg" alt="Logo de la marca" class="svelte-19n7xrw"/></a>',i=P(),s=D("div"),s.innerHTML='<li class="nav-item dropdown"><a class="nav-link dropdown-toggle svelte-19n7xrw" href="a" role="button" data-bs-toggle="dropdown" aria-expanded="false">Menu</a> \n      <ul class="dropdown-menu svelte-19n7xrw"><li><a class="dropdown-item svelte-19n7xrw" href="/catalogo/futbol">Futbol</a></li> \n        <li><a class="dropdown-item svelte-19n7xrw" href="/catalogo/natacion">Natacion</a></li> \n        <li><hr class="dropdown-divider"/></li> \n        <li><a class="dropdown-item svelte-19n7xrw" href="/catalogo">Todas las categorias</a></li></ul></li>',o=P(),a=D("div"),a.innerHTML='<div class="barra svelte-19n7xrw"><input type="text" name="" placeholder="Qu deseas comprar?" class="texto svelte-19n7xrw"/> \n      <i class="bi bi-search iconSearch svelte-19n7xrw"></i></div>',c=P(),l=D("div"),u=D("li"),k.c(),h=P(),d=D("ul"),O.c(),f=P(),p=D("div"),m=D("a"),g=D("button"),v=D("i"),y=P(),w=D("span"),b=R(t[0]),_=P(),I=D("span"),I.textContent="unread messages",M(r,"class","logo svelte-19n7xrw"),M(s,"class","menu svelte-19n7xrw"),M(a,"class","buscador svelte-19n7xrw"),M(d,"class","dropdown-menu svelte-19n7xrw"),M(u,"class","nav-item dropdown"),M(l,"class","menuUsuario svelte-19n7xrw"),M(v,"class","bi bi-basket icon svelte-19n7xrw"),M(I,"class","visually-hidden"),M(w,"class","position-absolute start-55 translate-middle badge rounded-pill bg-danger"),U(w,"top","25px"),M(g,"type","button"),M(g,"class","btn position-relative"),M(m,"href","/carrito"),M(m,"class","svelte-19n7xrw"),M(p,"class","carrito svelte-19n7xrw"),M(n,"class","divContainer svelte-19n7xrw")},m(e,t){x(e,n,t),S(n,r),S(n,i),S(n,s),S(n,o),S(n,a),S(n,c),S(n,l),S(l,u),k.m(u,null),S(u,h),S(u,d),O.m(d,null),S(n,f),S(n,p),S(p,m),S(m,g),S(g,v),S(g,y),S(g,w),S(w,b),S(w,_),S(w,I)},p(e,[t]){E===(E=T(e))&&k?k.p(e,t):(k.d(1),k=E(e),k&&(k.c(),k.m(u,h))),N===(N=C(e))&&O?O.p(e,t):(O.d(1),O=N(e),O&&(O.c(),O.m(d,null))),1&t&&F(b,e[0])},i:e,o:e,d(e){e&&A(n),k.d(),O.d()}}}function fA(e,t,n){let r,i,s,o,a,c,l;h(e,Ak,(e=>n(5,s=e))),h(e,xk,(e=>n(0,o=e))),h(e,Uk,(e=>n(11,a=e))),h(e,Pk,(e=>n(6,c=e))),h(e,_k,(e=>n(4,l=e)));let u=[],d=!0;Q((async()=>{await fk().then((e=>{u={...JSON.parse(localStorage.getItem(e)),key:e},y(Pk,c=u.telefono,c),y(Uk,a=u.carrito,a),y(xk,o=u.carrito.length,o),y(Ak,s=u.nombre,s),""!==u.correo&&""!==u.nombre&&n(1,d=!1)})).catch((e=>{n(1,d=!0)}))}));return e.$$.update=()=>{e.$$.dirty,32&e.$$.dirty&&n(3,r=s),64&e.$$.dirty&&n(2,i=c)},[o,d,i,r,l,s,c,()=>{y(_k,l=!0,l)},()=>{y(_k,l=!0,l)}]}class pA extends ke{constructor(e){super(),Se(this,e,fA,dA,a,{})}}function mA(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E;return t=new gC({props:{mensaje:e[1]}}),_=new dC({}),{c(){_e(t.$$.fragment),n=P(),r=D("section"),i=D("div"),o=D("div"),o.innerHTML='<span class="material-symbols-outlined icon svelte-bqqcdf">lock</span> \n      <h2 class="svelte-bqqcdf">Restablecer contrasea</h2>',a=P(),c=D("div"),l=D("p"),l.textContent="Ingresa tu correo electrnico y te enviaremos las instrucciones para una\r\n        nueva contrasea",u=P(),h=D("div"),d=D("input"),f=P(),p=D("label"),p.textContent="Correo electrnico",m=P(),g=D("br"),v=P(),y=D("div"),w=D("button"),w.textContent="Continuar",b=P(),_e(_.$$.fragment),M(o,"class","titulo svelte-bqqcdf"),M(l,"class","svelte-bqqcdf"),M(d,"type","text"),M(d,"class","form-control"),M(d,"id","floatingPassword"),M(d,"placeholder","Contrasea"),M(p,"for","floatingPassword"),M(h,"class","form-floating"),M(c,"class","cuerpo svelte-bqqcdf"),M(w,"class","btnInformacion svelte-bqqcdf"),M(y,"class","button svelte-bqqcdf"),M(i,"class","contenido svelte-bqqcdf"),M(r,"class","containerPrincipal svelte-bqqcdf")},m(s,k){Ie(t,s,k),x(s,n,k),x(s,r,k),S(r,i),S(i,o),S(i,a),S(i,c),S(c,l),S(c,u),S(c,h),S(h,d),V(d,e[0]),S(h,f),S(h,p),S(h,m),S(h,g),S(i,v),S(i,y),S(y,w),x(s,b,k),Ie(_,s,k),I=!0,T||(E=[$(d,"input",e[3]),$(w,"click",e[2])],T=!0)},p(e,[n]){const r={};2&n&&(r.mensaje=e[1]),t.$set(r),1&n&&d.value!==e[0]&&V(d,e[0])},i(e){I||(ge(t.$$.fragment,e),ge(_.$$.fragment,e),I=!0)},o(e){ve(t.$$.fragment,e),ve(_.$$.fragment,e),I=!1},d(e){Te(t,e),e&&A(n),e&&A(r),e&&A(b),Te(_,e),T=!1,s(E)}}}function gA(e,t,n){let r,i;h(e,Ek,(e=>n(4,r=e))),h(e,Dk,(e=>n(1,i=e)));let s="";y(Dk,i="Se ha enviado un mensaje a tu correo registrado con los pasos a seguir",i);return[s,i,()=>{(e=>{Js(XS,e).then((()=>{})).catch((e=>{e.code,e.message}))})(s),y(Ek,r=!0,r),setTimeout((function(){y(Ek,r=!1,r)}),3e3)},function(){s=this.value,n(0,s)}]}class vA extends ke{constructor(e){super(),Se(this,e,gA,mA,a,{})}}function yA(t){let n;return{c(){n=D("section"),n.innerHTML='<div class="contenido svelte-2py95k"><div class="redes"><i class="bi bi-facebook icon svelte-2py95k"></i> \n            <i class="bi bi-instagram icon svelte-2py95k"></i></div> \n        <div class="titulos svelte-2py95k"><p class="svelte-2py95k">Trminos y condiciones</p> \n            <p class="svelte-2py95k">Poltica de cookies</p> \n            <p class="svelte-2py95k">Poltica de privacidad</p></div></div> \n    <div class="contenido2 svelte-2py95k"><p class="svelte-2py95k"> Deporter triunfo</p> \n        <p class="svelte-2py95k">Todos los derechos reservados</p></div>',M(n,"class","containerGeneral svelte-2py95k")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&A(n)}}}class wA extends ke{constructor(e){super(),Se(this,e,null,yA,a,{})}}function bA(e){let t,n,r,i,s,o,a;return{c(){t=D("a"),t.innerHTML='<div class="containerEnlaces svelte-lgajcg"><span class="material-symbols-outlined icon svelte-lgajcg">package</span> \n          <div class="enlaces svelte-lgajcg"><p>Mis pedidos</p> \n            <p>&gt;</p></div></div>',n=P(),r=D("a"),r.innerHTML='<div class="containerEnlaces svelte-lgajcg"><span class="material-symbols-outlined icon svelte-lgajcg">account_balance_wallet</span> \n          <div class="enlaces svelte-lgajcg"><p>Mtodos de pago</p> \n            <p>&gt;</p></div></div>',i=P(),s=D("a"),s.innerHTML='<div class="containerEnlaces svelte-lgajcg"><span class="material-symbols-outlined icon svelte-lgajcg">library_Books</span> \n          <div class="enlaces svelte-lgajcg"><p>Mis direcciones</p> \n            <p>&gt;</p></div></div>',o=P(),a=D("a"),a.innerHTML='<div class="containerEnlaces svelte-lgajcg"><span class="material-symbols-outlined icon svelte-lgajcg">bookmark_heart</span> \n          <div class="enlaces svelte-lgajcg"><p>Lista de deseos</p> \n            <p>&gt;</p></div></div>',M(t,"href","/perfil_usuario/pedidos"),M(t,"class","svelte-lgajcg"),M(r,"href","/perfil_usuario/metodos_de_pago"),M(r,"class","svelte-lgajcg"),M(s,"href","/perfil_usuario/direcciones"),M(s,"class","svelte-lgajcg"),M(a,"href","/perfil_usuario/lista_de_deseos"),M(a,"id","lista_de_deseos"),M(a,"class","svelte-lgajcg")},m(e,c){x(e,t,c),x(e,n,c),x(e,r,c),x(e,i,c),x(e,s,c),x(e,o,c),x(e,a,c)},d(e){e&&A(t),e&&A(n),e&&A(r),e&&A(i),e&&A(s),e&&A(o),e&&A(a)}}}function _A(e){let t,n,r;return{c(){t=D("a"),t.innerHTML='<div class="containerEnlaces svelte-lgajcg"><span class="material-symbols-outlined icon svelte-lgajcg">admin_panel_settings</span> \n          <div class="enlaces svelte-lgajcg"><p>Administrar productos</p> \n            <p>&gt;</p></div></div>',n=P(),r=D("a"),r.innerHTML='<div class="containerEnlaces svelte-lgajcg"><span class="material-symbols-outlined icon svelte-lgajcg">local_shipping</span> \n          <div class="enlaces svelte-lgajcg"><p>Administrar pedidos</p> \n            <p>&gt;</p></div></div>',M(t,"href","/perfil_usuario/administrar_productos"),M(t,"class","svelte-lgajcg"),M(r,"href","/central_pedidos"),M(r,"class","svelte-lgajcg")},m(e,i){x(e,t,i),x(e,n,i),x(e,r,i)},d(e){e&&A(t),e&&A(n),e&&A(r)}}}function IA(t){let n,r,i,s,o,a,c,l,u,h;function d(e,t){return"admin"===e[0]?_A:bA}let f=d(t),p=f(t);return{c(){n=D("div"),r=D("ul"),i=D("a"),i.innerHTML='<div class="containerEnlaces svelte-lgajcg"><span class="material-symbols-outlined icon svelte-lgajcg">person</span> \n        <div class="enlaces svelte-lgajcg"><p>Datos personales</p> \n          <p>&gt;</p></div></div>',s=P(),o=D("a"),o.innerHTML='<div class="containerEnlaces svelte-lgajcg"><span class="material-symbols-outlined icon svelte-lgajcg">lock</span> \n        <div class="enlaces svelte-lgajcg"><p>Configuracin de cuenta</p> \n          <p>&gt;</p></div></div>',a=P(),p.c(),c=P(),l=D("a"),l.innerHTML='<div class="containerEnlaces svelte-lgajcg"><i class="bi bi-power icon svelte-lgajcg"></i> \n        <div class="enlaces svelte-lgajcg"><p>Cerrar Sesion</p> \n          <p>&gt;</p></div></div>',M(i,"href","/perfil_usuario/informacion_personal"),M(i,"class","svelte-lgajcg"),M(o,"href","/perfil_usuario/configuracion"),M(o,"class","svelte-lgajcg"),M(l,"href","/"),M(l,"class","svelte-lgajcg"),M(r,"class","svelte-lgajcg"),M(n,"class","containerMenu svelte-lgajcg")},m(e,t){x(e,n,t),S(n,r),S(r,i),S(r,s),S(r,o),S(r,a),p.m(r,null),S(r,c),S(r,l),u||(h=$(l,"click",ak),u=!0)},p(e,[t]){f!==(f=d(e))&&(p.d(1),p=f(e),p&&(p.c(),p.m(r,c)))},i:e,o:e,d(e){e&&A(n),p.d(),u=!1,h()}}}function TA(e,t,n){let r,i;h(e,Pk,(e=>n(2,i=e)));let{usuario:s}=t;return y(Pk,i=s.telefono,i),e.$$set=e=>{"usuario"in e&&n(1,s=e.usuario)},e.$$.update=()=>{4&e.$$.dirty&&n(0,r=i)},[r,s,i]}class EA extends ke{constructor(e){super(),Se(this,e,TA,IA,a,{usuario:1})}}function SA(t){let n,r,i,s,o,a,c;return s=new dC({}),{c(){n=D("div"),r=D("button"),r.textContent="Iniciar Sesin",i=P(),_e(s.$$.fragment),M(r,"class","btnLogin svelte-udalvt"),M(n,"class","contenidoUnlogin svelte-udalvt")},m(e,l){x(e,n,l),S(n,r),x(e,i,l),Ie(s,e,l),o=!0,a||(c=$(r,"click",t[14]),a=!0)},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),e&&A(i),Te(s,e),a=!1,c()}}}function kA(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,R,O,L,F,U,j,q,B,z,G,K,H,W,Q;return n=new EA({props:{usuario:e[5]}}),{c(){t=D("div"),_e(n.$$.fragment),r=P(),i=D("div"),o=D("h1"),o.textContent="Datos personales",a=P(),c=D("div"),l=D("div"),u=D("div"),h=D("input"),d=P(),f=D("label"),f.textContent="Nombres",p=P(),m=D("div"),g=D("input"),v=P(),y=D("label"),y.textContent="Apellidos",w=P(),b=D("div"),_=D("input"),I=P(),T=D("label"),T.textContent="Doc. de identidad",E=P(),k=D("div"),C=D("div"),N=D("div"),R=D("input"),O=P(),L=D("label"),L.textContent="Telfono",F=P(),U=D("div"),j=D("input"),q=P(),B=D("label"),B.textContent="Fecha de nacimiento",z=P(),G=D("div"),K=D("button"),K.textContent="Guardar",M(h,"type","text"),M(h,"class","form-control"),M(h,"id","floatingPassword"),M(h,"placeholder","Contrasea"),M(f,"for","floatingPassword"),M(u,"class","form-floating inputInformacion svelte-udalvt"),M(g,"type","text"),M(g,"class","form-control"),M(g,"id","floatingPassword"),M(g,"placeholder","Contrasea"),M(y,"for","floatingPassword"),M(m,"class","form-floating inputInformacion svelte-udalvt"),M(_,"type","text"),M(_,"class","form-control"),M(_,"id","floatingPassword"),M(_,"placeholder","Contrasea"),M(T,"for","floatingPassword"),M(b,"class","form-floating inputInformacion svelte-udalvt"),M(l,"class","containerInputs svelte-udalvt"),M(R,"type","text"),M(R,"class","form-control"),M(R,"id","floatingPassword"),M(R,"placeholder","Contrasea"),M(L,"for","floatingPassword"),M(N,"class","form-floating inputInformacion svelte-udalvt"),M(j,"type","date"),M(j,"class","form-control"),M(j,"id","floatingPassword"),M(j,"placeholder","Contrasea"),M(B,"for","floatingPassword"),M(U,"class","form-floating inputInformacion svelte-udalvt"),M(C,"class","containerInputs svelte-udalvt"),M(K,"class","btnInformacion svelte-udalvt"),M(G,"class","containerBtnInformacion svelte-udalvt"),M(i,"class","containerComponent svelte-udalvt"),M(t,"class","containerPerfil svelte-udalvt")},m(s,A){x(s,t,A),Ie(n,t,null),S(t,r),S(t,i),S(i,o),S(i,a),S(i,c),S(c,l),S(l,u),S(u,h),V(h,e[0]),S(u,d),S(u,f),S(l,p),S(l,m),S(m,g),V(g,e[1]),S(m,v),S(m,y),S(l,w),S(l,b),S(b,_),V(_,e[3]),S(b,I),S(b,T),S(c,E),S(c,k),S(k,C),S(C,N),S(N,R),V(R,e[2]),S(N,O),S(N,L),S(C,F),S(C,U),S(U,j),V(j,e[4]),S(U,q),S(U,B),S(k,z),S(k,G),S(G,K),H=!0,W||(Q=[$(h,"input",e[9]),$(g,"input",e[10]),$(_,"input",e[11]),$(R,"input",e[12]),$(j,"input",e[13]),$(K,"click",e[8])],W=!0)},p(e,t){const r={};32&t&&(r.usuario=e[5]),n.$set(r),1&t&&h.value!==e[0]&&V(h,e[0]),2&t&&g.value!==e[1]&&V(g,e[1]),8&t&&_.value!==e[3]&&V(_,e[3]),4&t&&R.value!==e[2]&&V(R,e[2]),16&t&&V(j,e[4])},i(e){H||(ge(n.$$.fragment,e),H=!0)},o(e){ve(n.$$.fragment,e),H=!1},d(e){e&&A(t),Te(n),W=!1,s(Q)}}}function CA(e){let t,n,r,i;const s=[kA,SA],o=[];function a(e,t){return e[6]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function xA(e,t,n){let r,i,s,o;h(e,bk,(e=>n(6,r=e))),h(e,Ak,(e=>n(15,i=e))),h(e,Pk,(e=>n(16,s=e))),h(e,_k,(e=>n(7,o=e)));let a="",c="",l="",u="",d="",f=[];Q((async()=>{await fk().then((e=>{n(5,f={...JSON.parse(localStorage.getItem(e)),key:e}),n(0,a=f.nombre),n(1,c=f.apellido),n(2,l=f.telefono),n(3,u=f.documento_de_identidad),n(4,d=f.fecha_de_nacimiento),y(bk,r=!0,r)})).catch((()=>{y(bk,r=!1,r)}))}));return[a,c,l,u,d,f,r,o,async()=>{ik("usuarios",{nombre:a,apellido:c,telefono:l,documento_de_identidad:u,fecha_de_nacimiento:d},f.id);const e=JSON.parse(localStorage.getItem(f.key));e.nombre=a,e.apellido=c,e.telefono=l,e.documento_de_identidad=u,e.fecha_de_nacimiento=d,y(Pk,s=l,s);const t=JSON.stringify(e);y(Ak,i=e.nombre,i),localStorage.setItem(f.key,t)},function(){a=this.value,n(0,a)},function(){c=this.value,n(1,c)},function(){u=this.value,n(3,u)},function(){l=this.value,n(2,l)},function(){d=this.value,n(4,d)},()=>y(_k,o=!0,o)]}class AA extends ke{constructor(e){super(),Se(this,e,xA,CA,a,{})}}function NA(t){let n,r,i,s,o,a,c;return s=new dC({}),{c(){n=D("div"),r=D("button"),r.textContent="Iniciar Sesin",i=P(),_e(s.$$.fragment),M(r,"class","btnLogin svelte-1a7syft"),M(n,"class","contenidoUnlogin svelte-1a7syft")},m(e,l){x(e,n,l),S(n,r),x(e,i,l),Ie(s,e,l),o=!0,a||(c=$(r,"click",t[17]),a=!0)},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),e&&A(i),Te(s,e),a=!1,c()}}}function DA(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,R,O,L,F,U,j,q,B,z,G;t=new gC({props:{mensaje:e[7]}}),i=new EA({props:{usuario:e[5]}});let K=e[4]>0&&RA(e);return{c(){_e(t.$$.fragment),n=P(),r=D("div"),_e(i.$$.fragment),o=P(),a=D("div"),c=D("h1"),c.textContent="Configuracion de cuenta",l=P(),u=D("div"),K&&K.c(),h=P(),d=D("div"),f=D("input"),p=P(),m=D("label"),m.textContent="Contrasea actual",g=P(),v=D("br"),y=P(),w=D("div"),b=D("input"),_=P(),I=D("label"),I.textContent="Contrasea nueva",T=P(),E=D("br"),k=P(),C=D("div"),N=D("input"),R=P(),O=D("label"),O.textContent="Confirmacion de contrasea",L=P(),F=D("br"),U=P(),j=D("div"),q=D("button"),q.textContent="Cambiar contrasea",M(f,"type","password"),M(f,"class","form-control"),M(f,"id","floatingPassword"),M(f,"placeholder","contrasena"),M(m,"for","floatingPassword"),M(d,"class","form-floating inputInformacion svelte-1a7syft"),M(b,"type","password"),M(b,"class","form-control"),M(b,"id","floatingPassword"),M(b,"placeholder","contrasena"),M(I,"for","floatingPassword"),M(w,"class","form-floating inputInformacion svelte-1a7syft"),M(N,"type","password"),M(N,"class","form-control"),M(N,"id","floatingPassword"),M(N,"placeholder","contrasena"),M(O,"for","floatingPassword"),M(C,"class","form-floating inputInformacion svelte-1a7syft"),M(u,"class","containerInputs svelte-1a7syft"),M(q,"class","btnInformacion svelte-1a7syft"),M(j,"class","containerBtnInformacion svelte-1a7syft"),M(a,"class","containerComponent svelte-1a7syft"),M(r,"class","containerPerfil svelte-1a7syft")},m(s,A){Ie(t,s,A),x(s,n,A),x(s,r,A),Ie(i,r,null),S(r,o),S(r,a),S(a,c),S(a,l),S(a,u),K&&K.m(u,null),S(u,h),S(u,d),S(d,f),V(f,e[1]),S(d,p),S(d,m),S(u,g),S(u,v),S(u,y),S(u,w),S(w,b),V(b,e[0]),S(w,_),S(w,I),S(u,T),S(u,E),S(u,k),S(u,C),S(C,N),V(N,e[2]),S(C,R),S(C,O),S(u,L),S(u,F),S(a,U),S(a,j),S(j,q),B=!0,z||(G=[$(f,"input",e[11]),$(f,"blur",e[12]),$(b,"input",e[13]),$(b,"blur",e[14]),$(N,"input",e[15]),$(N,"blur",e[16]),$(q,"click",e[10])],z=!0)},p(e,n){const r={};128&n&&(r.mensaje=e[7]),t.$set(r);const s={};32&n&&(s.usuario=e[5]),i.$set(s),e[4]>0?K?K.p(e,n):(K=RA(e),K.c(),K.m(u,h)):K&&(K.d(1),K=null),2&n&&f.value!==e[1]&&V(f,e[1]),1&n&&b.value!==e[0]&&V(b,e[0]),4&n&&N.value!==e[2]&&V(N,e[2])},i(e){B||(ge(t.$$.fragment,e),ge(i.$$.fragment,e),B=!0)},o(e){ve(t.$$.fragment,e),ve(i.$$.fragment,e),B=!1},d(e){Te(t,e),e&&A(n),e&&A(r),Te(i),K&&K.d(),z=!1,s(G)}}}function RA(e){let t,n,r,i=e[9][e[4]-1]+"";return{c(){t=D("div"),n=D("p"),r=R(i),M(t,"class","mensajeError svelte-1a7syft")},m(e,i){x(e,t,i),S(t,n),S(n,r)},p(e,t){16&t&&i!==(i=e[9][e[4]-1]+"")&&F(r,i)},d(e){e&&A(t)}}}function PA(e){let t,n,r,i;const s=[DA,NA],o=[];function a(e,t){return e[6]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function OA(e,t,n){let r,i,s,o;h(e,bk,(e=>n(6,r=e))),h(e,Ek,(e=>n(18,i=e))),h(e,Dk,(e=>n(7,s=e))),h(e,_k,(e=>n(8,o=e)));let a="",c="",l="",u="",d=0,f=[];Q((async()=>{await fk().then((e=>{n(5,f={...JSON.parse(localStorage.getItem(e)),key:e}),console.log(f),n(3,u=f.contrasea),y(bk,r=!0,r)})).catch((e=>{y(bk,r=!1,r)}))}));return[a,c,l,u,d,f,r,s,o,["La contrasea antigua no concuerda con la registrada en la base de datos, por favor, verifica si esta bien","La contrasea nueva y la confirmacion no coincide, verifica que se encuentran correctamente escritas","La contrasea nueva no cuenta con los requisitos minimos de una mayuscula, una minuscila, un nmero o mnimo de 6 caracteres"],()=>{let e={"contrasea":a};if(uk(a)){n(4,d=0);const r=JSON.parse(localStorage.getItem(f.key));r.contrasea=a;const o=JSON.stringify(r);localStorage.setItem(f.key,o),t=a,so(XS.currentUser,t).then().catch((e=>{console.error(e)})),ik("usuarios",e,f.id).then((()=>{y(Dk,s="La contrasea ha sido cambiada exitosamente",s),y(Ek,i=!0,i),n(1,c=""),n(0,a=""),n(2,l=""),setTimeout((function(){y(Ek,i=!1,i)}),3e3)}))}else n(4,d=3);var t},function(){c=this.value,n(1,c)},()=>{n(4,d=c!==u?1:0)},function(){a=this.value,n(0,a)},()=>{n(4,d=a!==l?2:0)},function(){l=this.value,n(2,l)},()=>{n(4,d=a!==l?2:0)},()=>y(_k,o=!0,o)]}class $A extends ke{constructor(e){super(),Se(this,e,OA,PA,a,{})}}function LA(t){let n,r,i,s,o,a,c,u,h;return{c(){n=D("div"),r=D("div"),i=D("div"),s=D("img"),a=P(),c=D("div"),u=D("h5"),h=R(t[1]),l(s.src,o=t[0])||M(s,"src",o),M(s,"alt","Imagen"),M(s,"class","svelte-13f2w28"),M(i,"class","contenedorImg svelte-13f2w28"),M(u,"class","svelte-13f2w28"),M(c,"class","texto svelte-13f2w28"),M(r,"class","mensaje svelte-13f2w28"),M(n,"class","contenido2 svelte-13f2w28")},m(e,t){x(e,n,t),S(n,r),S(r,i),S(i,s),S(r,a),S(r,c),S(c,u),S(u,h)},p(e,[t]){1&t&&!l(s.src,o=e[0])&&M(s,"src",o),2&t&&F(h,e[1])},i:e,o:e,d(e){e&&A(n)}}}function MA(e,t,n){let{imagen:r}=t,{mensaje:i}=t;return e.$$set=e=>{"imagen"in e&&n(0,r=e.imagen),"mensaje"in e&&n(1,i=e.mensaje)},[r,i]}class FA extends ke{constructor(e){super(),Se(this,e,MA,LA,a,{imagen:0,mensaje:1})}}function VA(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,R,O,L,F,U,j,q,B,z,G,K,H,W,Q,J,Y,X,Z,ee,te,ne,re,ie;return{c(){t=D("section"),n=D("div"),r=D("div"),i=D("h3"),i.textContent="Agregar tarjeta",o=P(),a=D("i"),c=P(),l=D("div"),u=D("div"),h=D("div"),d=D("input"),f=P(),p=D("label"),p.textContent="Titular de la tarjeta",m=P(),g=D("p"),g.textContent="*Nombre del titular que aparece en la tarjeta",v=P(),y=D("div"),w=D("input"),b=P(),_=D("label"),_.textContent="Nmero de tarjeta",I=P(),T=D("p"),T.textContent="*Nmero que aparece en la parte frontal de la tarjeta",E=P(),k=D("div"),C=D("div"),N=D("input"),R=P(),O=D("label"),O.textContent="CVV",L=P(),F=D("p"),F.textContent="*Cdigo de seguridad",U=P(),j=D("div"),q=D("div"),B=D("div"),z=D("input"),G=P(),K=D("label"),K.textContent="Mes",H=P(),W=D("div"),Q=D("input"),J=P(),Y=D("label"),Y.textContent="Ao",X=P(),Z=D("p"),Z.textContent="*Fecha de vencimiento",ee=P(),te=D("div"),ne=D("button"),ne.textContent="Guardar tarjeta",M(a,"class","bi bi-x-lg icon svelte-1h5etlw"),M(r,"class","titulo svelte-1h5etlw"),M(d,"type","text"),M(d,"class","form-control svelte-1h5etlw"),M(d,"id","floatingPassword"),M(d,"placeholder","Contrasea"),M(p,"for","floatingPassword"),M(g,"class","texto svelte-1h5etlw"),M(h,"class","form-floating"),M(w,"type","text"),M(w,"class","form-control svelte-1h5etlw"),M(w,"id","floatingPassword"),M(w,"placeholder","Contrasea"),M(w,"minlength","16"),M(w,"maxlength","16"),M(_,"for","floatingPassword"),M(T,"class","texto svelte-1h5etlw"),M(y,"class","form-floating"),M(N,"type","text"),M(N,"class","form-control svelte-1h5etlw"),M(N,"id","number"),M(N,"placeholder","Contrasea"),M(N,"maxlength","3"),M(O,"for","floatingPassword"),M(F,"class","texto svelte-1h5etlw"),M(C,"class","form-floating"),M(z,"type","text"),M(z,"class","form-control svelte-1h5etlw"),M(z,"id","number"),M(z,"placeholder","Contrasea"),M(z,"maxlength","2"),M(K,"for","floatingPassword"),M(B,"class","form-floating"),M(Q,"type","text"),M(Q,"class","form-control svelte-1h5etlw"),M(Q,"id","number"),M(Q,"placeholder","Contrasea"),M(Q,"maxlength","2"),M(Y,"for","floatingPassword"),M(W,"class","form-floating"),M(q,"class","svelte-1h5etlw"),M(Z,"class","texto svelte-1h5etlw"),M(j,"class","ContainerFechaVencimiento svelte-1h5etlw"),M(k,"class","fechaVencimiento svelte-1h5etlw"),M(ne,"class","btnInformacion svelte-1h5etlw"),M(ne,"data-bs-dismiss","offcanvas"),M(ne,"aria-label","Close"),M(te,"class","btnAgregar"),M(u,"class","containerBody svelte-1h5etlw"),M(l,"class","cuerpo"),M(n,"class","contenido svelte-1h5etlw"),M(t,"class","containerGeneral svelte-1h5etlw")},m(s,A){x(s,t,A),S(t,n),S(n,r),S(r,i),S(r,o),S(r,a),S(n,c),S(n,l),S(l,u),S(u,h),S(h,d),V(d,e[2].propietario),S(h,f),S(h,p),S(h,m),S(h,g),S(u,v),S(u,y),S(y,w),V(w,e[2].numero_de_tarjeta),S(y,b),S(y,_),S(y,I),S(y,T),S(u,E),S(u,k),S(k,C),S(C,N),V(N,e[2].cvv),S(C,R),S(C,O),S(C,L),S(C,F),S(k,U),S(k,j),S(j,q),S(q,B),S(B,z),V(z,e[0]),S(B,G),S(B,K),S(q,H),S(q,W),S(W,Q),V(Q,e[1]),S(W,J),S(W,Y),S(j,X),S(j,Z),S(u,ee),S(u,te),S(te,ne),re||(ie=[$(a,"keypress",e[4]),$(a,"click",e[4]),$(d,"input",e[7]),$(w,"input",e[8]),$(N,"input",e[9]),$(z,"input",e[10]),$(Q,"input",e[11]),$(ne,"click",e[5])],re=!0)},p(e,t){4&t&&d.value!==e[2].propietario&&V(d,e[2].propietario),4&t&&w.value!==e[2].numero_de_tarjeta&&V(w,e[2].numero_de_tarjeta),4&t&&N.value!==e[2].cvv&&V(N,e[2].cvv),1&t&&z.value!==e[0]&&V(z,e[0]),2&t&&Q.value!==e[1]&&V(Q,e[1])},d(e){e&&A(t),re=!1,s(ie)}}}function UA(t){let n,r=t[3]&&VA(t);return{c(){r&&r.c(),n=O()},m(e,t){r&&r.m(e,t),x(e,n,t)},p(e,[t]){e[3]?r?r.p(e,t):(r=VA(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&A(n)}}}function jA(e,t,n){let r,i,s;h(e,Wk,(e=>n(2,r=e))),h(e,Sk,(e=>n(3,i=e))),h(e,Nk,(e=>n(12,s=e)));let{usuario:o}=t,a="",c="";const l=()=>{y(Wk,r.propietario="",r),y(Wk,r.numero_de_tarjeta="",r),y(Wk,r.fecha_de_vencimiento="",r),y(Wk,r.cvv="",r)};return e.$$set=e=>{"usuario"in e&&n(6,o=e.usuario)},[a,c,r,i,()=>{y(Sk,i=!1,i),console.log("hola")},()=>{let e={estado:!0,propietario:r.propietario,numero_de_tarjeta:r.numero_de_tarjeta,cvv:r.cvv,fecha_de_vencimiento:a+"/"+c,modo:s},t=o.metodos_de_pago.findIndex((e=>e.modo===s));o.metodos_de_pago[t].estado||n(6,o.metodos_de_pago[t]=e,o);const u=JSON.stringify(o);localStorage.setItem(o.key,u),rk("usuarios",{metodos_de_pago:o.metodos_de_pago},o.id).then((()=>{console.log("Guardado exitoso"),y(Sk,i=!1,i),location.reload()})),l()},o,function(){r.propietario=this.value,Wk.set(r)},function(){r.numero_de_tarjeta=this.value,Wk.set(r)},function(){r.cvv=this.value,Wk.set(r)},function(){a=this.value,n(0,a)},function(){c=this.value,n(1,c)}]}class qA extends ke{constructor(e){super(),Se(this,e,jA,UA,a,{usuario:6})}}function BA(t){let n,r,i,s,o,a,c;return s=new dC({}),{c(){n=D("div"),r=D("button"),r.textContent="Iniciar Sesin",i=P(),_e(s.$$.fragment),M(r,"class","btnLogin svelte-17phqg0"),M(n,"class","contenidoUnlogin svelte-17phqg0")},m(e,l){x(e,n,l),S(n,r),x(e,i,l),Ie(s,e,l),o=!0,a||(c=$(r,"click",t[22]),a=!0)},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),e&&A(i),Te(s,e),a=!1,c()}}}function zA(e){let t,n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E;t=new qA({props:{usuario:e[0]}}),i=new EA({props:{usuario:e[0]}});let k=e[6]&&GA(e);const C=[HA,KA],N=[];function R(e,t){return!0===e[6]?0:1}p=R(e),m=N[p]=C[p](e);let O=e[5]&&WA(e);const $=[JA,QA],L=[];function F(e,t){return!0===e[5]?0:1}return I=F(e),T=L[I]=$[I](e),{c(){_e(t.$$.fragment),n=P(),r=D("div"),_e(i.$$.fragment),s=P(),o=D("div"),a=D("h1"),a.textContent="Mtodos de pago",c=P(),l=D("div"),u=D("div"),h=D("h5"),h.textContent="Tarjeta de Credito",d=P(),k&&k.c(),f=P(),m.c(),g=P(),v=D("div"),y=D("div"),w=D("h5"),w.textContent="Tarjeta de Debito",b=P(),O&&O.c(),_=P(),T.c(),M(a,"class","svelte-17phqg0"),M(h,"class","svelte-17phqg0"),M(u,"class","titulo svelte-17phqg0"),M(l,"class","pagosContainer svelte-17phqg0"),M(w,"class","svelte-17phqg0"),M(y,"class","titulo svelte-17phqg0"),M(v,"class","pagosContainer svelte-17phqg0"),M(o,"class","containerComponent svelte-17phqg0"),M(r,"class","containerPerfil svelte-17phqg0")},m(e,m){Ie(t,e,m),x(e,n,m),x(e,r,m),Ie(i,r,null),S(r,s),S(r,o),S(o,a),S(o,c),S(o,l),S(l,u),S(u,h),S(u,d),k&&k.m(u,null),S(l,f),N[p].m(l,null),S(o,g),S(o,v),S(v,y),S(y,w),S(y,b),O&&O.m(y,null),S(v,_),L[I].m(v,null),E=!0},p(e,n){const r={};1&n&&(r.usuario=e[0]),t.$set(r);const s={};1&n&&(s.usuario=e[0]),i.$set(s),e[6]?k?k.p(e,n):(k=GA(e),k.c(),k.m(u,null)):k&&(k.d(1),k=null);let o=p;p=R(e),p===o?N[p].p(e,n):(pe(),ve(N[o],1,1,(()=>{N[o]=null})),me(),m=N[p],m?m.p(e,n):(m=N[p]=C[p](e),m.c()),ge(m,1),m.m(l,null)),e[5]?O?O.p(e,n):(O=WA(e),O.c(),O.m(y,null)):O&&(O.d(1),O=null);let a=I;I=F(e),I===a?L[I].p(e,n):(pe(),ve(L[a],1,1,(()=>{L[a]=null})),me(),T=L[I],T?T.p(e,n):(T=L[I]=$[I](e),T.c()),ge(T,1),T.m(v,null))},i(e){E||(ge(t.$$.fragment,e),ge(i.$$.fragment,e),ge(m),ge(T),E=!0)},o(e){ve(t.$$.fragment,e),ve(i.$$.fragment,e),ve(m),ve(T),E=!1},d(e){Te(t,e),e&&A(n),e&&A(r),Te(i),k&&k.d(),N[p].d(),O&&O.d(),L[I].d()}}}function GA(t){let n,r,i;return{c(){n=D("i"),M(n,"class","bi bi-x-lg svelte-17phqg0")},m(e,s){x(e,n,s),r||(i=[$(n,"keypress",t[11]),$(n,"click",t[12])],r=!0)},p:e,d(e){e&&A(n),r=!1,s(i)}}}function KA(t){let n,r,i,s,o,a;return n=new FA({props:{imagen:"https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/ilustraciones%2FEmpty-wallet.svg?alt=media&token=a7380681-5eaa-4598-8c5f-dd5c752d7bfe",mensaje:"No tienes registrada una tarjeta de credito"}}),{c(){_e(n.$$.fragment),r=P(),i=D("button"),i.textContent="Agregar mtodo",M(i,"class","btnMetodo svelte-17phqg0")},m(e,c){Ie(n,e,c),x(e,r,c),x(e,i,c),s=!0,o||(a=$(i,"click",t[15]),o=!0)},p:e,i(e){s||(ge(n.$$.fragment,e),s=!0)},o(e){ve(n.$$.fragment,e),s=!1},d(e){Te(n,e),e&&A(r),e&&A(i),o=!1,a()}}}function HA(t){let n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T;return{c(){n=D("div"),r=D("div"),i=D("div"),o=D("input"),a=P(),c=D("label"),c.textContent="Propietario Tarjeta",l=P(),u=D("div"),h=D("input"),d=P(),f=D("label"),f.textContent="Nmero de tarjeta",p=P(),m=D("div"),g=D("div"),v=D("input"),y=P(),w=D("label"),w.textContent="Fecha de vencimiento",b=P(),_=D("div"),_.innerHTML='<input type="email" class="form-control" id="floatingInputDisabled" placeholder="name@example.com" disabled="" value="xxx" style="width: 100%;"/> \n            <label for="floatingInputDisabled">Cvv</label>',M(o,"type","email"),M(o,"class","form-control"),M(o,"id","floatingInputDisabled"),M(o,"placeholder","name@example.com"),o.disabled=!0,U(o,"width","100%"),M(c,"for","floatingInputDisabled"),M(i,"class","form-floating mb-3"),M(h,"type","email"),M(h,"class","form-control"),M(h,"id","floatingInputDisabled"),M(h,"placeholder","name@example.com"),h.disabled=!0,h.value=t[4],U(h,"width","100%"),M(f,"for","floatingInputDisabled"),M(u,"class","form-floating mb-3"),M(r,"class","parte1 svelte-17phqg0"),M(v,"type","email"),M(v,"class","form-control"),M(v,"id","floatingInputDisabled"),M(v,"placeholder","name@example.com"),v.disabled=!0,U(v,"width","100%"),M(w,"for","floatingInputDisabled"),M(g,"class","form-floating mb-3"),M(_,"class","form-floating mb-3"),M(m,"class","parte2 svelte-17phqg0"),M(n,"class","contenidoTarjeta svelte-17phqg0")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(i,o),V(o,t[2][0].propietario),S(i,a),S(i,c),S(r,l),S(r,u),S(u,h),S(u,d),S(u,f),S(n,p),S(n,m),S(m,g),S(g,v),V(v,t[2][0].fecha_de_vencimiento),S(g,y),S(g,w),S(m,b),S(m,_),I||(T=[$(o,"input",t[13]),$(v,"input",t[14])],I=!0)},p(e,t){4&t&&o.value!==e[2][0].propietario&&V(o,e[2][0].propietario),16&t&&h.value!==e[4]&&(h.value=e[4]),4&t&&v.value!==e[2][0].fecha_de_vencimiento&&V(v,e[2][0].fecha_de_vencimiento)},i:e,o:e,d(e){e&&A(n),I=!1,s(T)}}}function WA(t){let n,r,i;return{c(){n=D("i"),M(n,"class","bi bi-x-lg svelte-17phqg0")},m(e,s){x(e,n,s),r||(i=[$(n,"keypress",t[16]),$(n,"click",t[17])],r=!0)},p:e,d(e){e&&A(n),r=!1,s(i)}}}function QA(t){let n,r,i,s,o,a;return n=new FA({props:{imagen:"https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/ilustraciones%2FEmpty-wallet.svg?alt=media&token=a7380681-5eaa-4598-8c5f-dd5c752d7bfe",mensaje:"No tienes registrada una tarjeta de debito"}}),{c(){_e(n.$$.fragment),r=P(),i=D("button"),i.textContent="Agregar mtodo",M(i,"class","btnMetodo svelte-17phqg0")},m(e,c){Ie(n,e,c),x(e,r,c),x(e,i,c),s=!0,o||(a=$(i,"click",t[21]),o=!0)},p:e,i(e){s||(ge(n.$$.fragment,e),s=!0)},o(e){ve(n.$$.fragment,e),s=!1},d(e){Te(n,e),e&&A(r),e&&A(i),o=!1,a()}}}function JA(t){let n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T;return{c(){n=D("div"),r=D("div"),i=D("div"),o=D("input"),a=P(),c=D("label"),c.textContent="Propietario Tarjeta",l=P(),u=D("div"),h=D("input"),d=P(),f=D("label"),f.textContent="Nmero de tarjeta",p=P(),m=D("div"),g=D("div"),v=D("input"),y=P(),w=D("label"),w.textContent="Fecha de vencimiento",b=P(),_=D("div"),_.innerHTML='<input type="email" class="form-control" id="floatingInputDisabled" placeholder="name@example.com" disabled="" value="xxx" style="width: 100%;"/> \n            <label for="floatingInputDisabled">Cvv</label>',M(o,"type","email"),M(o,"class","form-control"),M(o,"id","floatingInputDisabled"),M(o,"placeholder","name@example.com"),o.disabled=!0,U(o,"width","100%"),M(c,"for","floatingInputDisabled"),M(i,"class","form-floating mb-3"),M(h,"type","email"),M(h,"class","form-control"),M(h,"id","floatingInputDisabled"),M(h,"placeholder","name@example.com"),h.disabled=!0,U(h,"width","100%"),M(f,"for","floatingInputDisabled"),M(u,"class","form-floating mb-3"),M(r,"class","parte1 svelte-17phqg0"),M(v,"type","email"),M(v,"class","form-control"),M(v,"id","floatingInputDisabled"),M(v,"placeholder","name@example.com"),v.disabled=!0,U(v,"width","100%"),M(w,"for","floatingInputDisabled"),M(g,"class","form-floating mb-3"),M(_,"class","form-floating mb-3"),M(m,"class","parte2 svelte-17phqg0"),M(n,"class","contenidoTarjeta svelte-17phqg0")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(i,o),V(o,t[1][0].propietario),S(i,a),S(i,c),S(r,l),S(r,u),S(u,h),V(h,t[3]),S(u,d),S(u,f),S(n,p),S(n,m),S(m,g),S(g,v),V(v,t[1][0].fecha_de_vencimiento),S(g,y),S(g,w),S(m,b),S(m,_),I||(T=[$(o,"input",t[18]),$(h,"input",t[19]),$(v,"input",t[20])],I=!0)},p(e,t){2&t&&o.value!==e[1][0].propietario&&V(o,e[1][0].propietario),8&t&&h.value!==e[3]&&V(h,e[3]),2&t&&v.value!==e[1][0].fecha_de_vencimiento&&V(v,e[1][0].fecha_de_vencimiento)},i:e,o:e,d(e){e&&A(n),I=!1,s(T)}}}function YA(e){let t,n,r,i;const s=[zA,BA],o=[];function a(e,t){return e[7]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function XA(e,t,n){let r,i,s,o,a,c;h(e,bk,(e=>n(7,s=e))),h(e,Nk,(e=>n(23,o=e))),h(e,Sk,(e=>n(24,a=e))),h(e,_k,(e=>n(8,c=e)));let l,u,d=[],f=0,p=0;const m=e=>{let t=confirm("Esta seguro de querer eliminar este mtodo de pago?"),s=d.metodos_de_pago.filter((t=>t.modo!==e));if(t){console.log(d),n(0,d.metodos_de_pago=[...s,{estado:!1,modo:e}],d),console.log(d),"debito"===e?n(5,r=!1):n(6,i=!1);const t=JSON.stringify(d);localStorage.setItem(d.key,t),rk("usuarios",{metodos_de_pago:d.metodos_de_pago},d.id)}},g=e=>{y(Sk,a=!0,a),y(Nk,o=e,o)};(async()=>{await fk().then((e=>{n(0,d={...JSON.parse(localStorage.getItem(e)),key:e}),y(bk,s=!0,s),n(1,l=d.metodos_de_pago.filter((e=>"debito"===e.modo))),n(2,u=d.metodos_de_pago.filter((e=>"credito"===e.modo))),0==l[0].estado?n(3,f=0):n(3,f="xxxx-xxxx-xxxx-"+l[0].numero_de_tarjeta.slice(-4)),0==u[0].estado?n(4,p=0):n(4,p="xxxx-xxxx-xxxx-"+u[0].numero_de_tarjeta.slice(-4)),n(6,i=u[0].estado),n(5,r=l[0].estado)})).catch((()=>{y(bk,s=!1,s)}))})();return n(5,r="hola debito"),n(6,i="adios credito"),[d,l,u,f,p,r,i,s,c,m,g,()=>{m("credito")},()=>{m("credito")},function(){u[0].propietario=this.value,n(2,u)},function(){u[0].fecha_de_vencimiento=this.value,n(2,u)},()=>g("credito"),()=>{m("debito")},()=>{m("debito")},function(){l[0].propietario=this.value,n(1,l)},function(){f=this.value,n(3,f)},function(){l[0].fecha_de_vencimiento=this.value,n(1,l)},()=>g("debito"),()=>y(_k,c=!0,c)]}class ZA extends ke{constructor(e){super(),Se(this,e,XA,YA,a,{})}}function eN(t){let n,r,i,s,o,a,c;return s=new dC({}),{c(){n=D("div"),r=D("button"),r.textContent="Iniciar Sesin",i=P(),_e(s.$$.fragment),M(r,"class","btnLogin svelte-huj498"),M(n,"class","contenidoUnlogin svelte-huj498")},m(e,l){x(e,n,l),S(n,r),x(e,i,l),Ie(s,e,l),o=!0,a||(c=$(r,"click",t[5]),a=!0)},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),e&&A(i),Te(s,e),a=!1,c()}}}function tN(e){let t,n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y;return n=new EA({props:{usuario:rN}}),{c(){t=D("div"),_e(n.$$.fragment),r=P(),i=D("div"),s=D("h1"),s.textContent="Devoluciones",o=P(),a=D("p"),c=R("contador: "),l=R(e[0]),u=P(),h=D("p"),d=R("contador * 2: "),f=R(e[1]),p=P(),m=D("button"),m.textContent="sumar",M(i,"class","containerComponent svelte-huj498"),M(t,"class","containerPerfil svelte-huj498")},m(w,b){x(w,t,b),Ie(n,t,null),S(t,r),S(t,i),S(i,s),S(i,o),S(i,a),S(a,c),S(a,l),S(i,u),S(i,h),S(h,d),S(h,f),S(i,p),S(i,m),g=!0,v||(y=$(m,"click",e[4]),v=!0)},p(e,t){(!g||1&t)&&F(l,e[0]),(!g||2&t)&&F(f,e[1])},i(e){g||(ge(n.$$.fragment,e),g=!0)},o(e){ve(n.$$.fragment,e),g=!1},d(e){e&&A(t),Te(n),v=!1,y()}}}function nN(e){let t,n,r,i;const s=[tN,eN],o=[];function a(e,t){return e[2]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}let rN="hola";function iN(e,t,n){let r,i,s;h(e,bk,(e=>n(2,i=e))),h(e,_k,(e=>n(3,s=e)));let o=0;return e.$$.update=()=>{1&e.$$.dirty&&n(1,r=2*o)},[o,r,i,s,()=>n(0,o+=1),()=>y(_k,s=!0,s)]}class sN extends ke{constructor(e){super(),Se(this,e,iN,nN,a,{})}}function oN(t){let n,r,i,s,o,a,c;return{c(){n=D("div"),r=D("input"),i=P(),s=D("label"),o=R(t[1]),M(r,"type","text"),M(r,"class","form-control svelte-fybgs4"),M(r,"id","floatingPassword"),M(r,"placeholder","Contrasea"),M(s,"for","floatingPassword"),M(s,"class","svelte-fybgs4"),M(n,"class","form-floating svelte-fybgs4")},m(e,l){x(e,n,l),S(n,r),V(r,t[2][t[0]]),S(n,i),S(n,s),S(s,o),a||(c=$(r,"input",t[4]),a=!0)},p(e,[t]){5&t&&r.value!==e[2][e[0]]&&V(r,e[2][e[0]]),2&t&&F(o,e[1])},i:e,o:e,d(e){e&&A(n),a=!1,c()}}}function aN(e,t,n){let r;h(e,Ck,(e=>n(2,r=e)));let{variable:i=""}=t,{mensaje:s=""}=t,{directorio:o=""}=t;return y(Ck,r=o,r),e.$$set=e=>{"variable"in e&&n(0,i=e.variable),"mensaje"in e&&n(1,s=e.mensaje),"directorio"in e&&n(3,o=e.directorio)},[i,s,r,o,function(){r[i]=this.value,Ck.set(r)}]}class cN extends ke{constructor(e){super(),Se(this,e,aN,oN,a,{variable:0,mensaje:1,directorio:3})}}function lN(t){let n,r,i,s,o,a,c;return{c(){n=D("div"),r=D("textarea"),i=P(),s=D("label"),o=R(t[1]),M(r,"class","form-control svelte-l3kw64"),M(r,"placeholder","Leave a comment here"),M(r,"id","floatingTextarea2"),U(r,"height","100px"),M(s,"for","floatingTextarea2"),M(s,"class","svelte-l3kw64"),M(n,"class","form-floating svelte-l3kw64")},m(e,l){x(e,n,l),S(n,r),V(r,t[2][t[0]]),S(n,i),S(n,s),S(s,o),a||(c=$(r,"input",t[4]),a=!0)},p(e,[t]){5&t&&V(r,e[2][e[0]]),2&t&&F(o,e[1])},i:e,o:e,d(e){e&&A(n),a=!1,c()}}}function uN(e,t,n){let r;h(e,Ck,(e=>n(2,r=e)));let{variable:i=""}=t,{mensaje:s=""}=t,{directorio:o=""}=t;return y(Ck,r=o,r),e.$$set=e=>{"variable"in e&&n(0,i=e.variable),"mensaje"in e&&n(1,s=e.mensaje),"directorio"in e&&n(3,o=e.directorio)},[i,s,r,o,function(){r[i]=this.value,Ck.set(r)}]}class hN extends ke{constructor(e){super(),Se(this,e,uN,lN,a,{variable:0,mensaje:1,directorio:3})}}function dN(e){let t,n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,R,O,L,F,V,j,q,B,z,G,K,H,W,Q,J,Y,X,Z,ee,te;function ne(e,t){return e[2]?fN:pN}c=new tC({props:{variable:"receptor",mensaje:"Quin recibe?",directorio:e[0]}}),u=new cN({props:{variable:"contacto_receptor",mensaje:"Nmero de la persona (opcional)",directorio:e[0]}}),g=new tC({props:{variable:"departamento",mensaje:"Departamento",directorio:e[0]}}),y=new tC({props:{variable:"ciudad",mensaje:"Ciudad",directorio:e[0]}}),b=new tC({props:{variable:"barrio",mensaje:"Barrio",directorio:e[0]}}),I=new tC({props:{variable:"tipo_de_calle",mensaje:"Tipo de calle (Cll, Cra, Av.)",directorio:e[0]}}),E=new tC({props:{variable:"primera_numeracion",mensaje:"Nmero",directorio:e[0]}}),C=new tC({props:{variable:"segunda_numeracion",mensaje:"#",directorio:e[0]}}),R=new tC({props:{variable:"tercera_numeracion",mensaje:"-",directorio:e[0]}}),B=new cN({props:{variable:"apartamento",mensaje:"Piso / Apartamento (opcional)",directorio:e[0]}}),G=new cN({props:{variable:"codigo_postal",mensaje:"Cdigo postal (opcional)",directorio:e[0]}}),H=new hN({props:{variable:"descripcion",mensaje:"Describe la informacin adicional.",directorio:e[0]}});let re=ne(e),ie=re(e);return{c(){t=D("div"),n=D("div"),n.innerHTML='<div class="titulo svelte-c6x9nq"><span class="material-symbols-outlined icon svelte-c6x9nq">location_on</span> \n        <h2>Agregar direccion</h2></div>',r=P(),i=D("div"),s=D("p"),s.textContent="Datos de la persona que recibe",o=P(),a=D("div"),_e(c.$$.fragment),l=P(),_e(u.$$.fragment),h=P(),d=D("div"),f=D("p"),f.textContent="Nueva direccin",p=P(),m=D("div"),_e(g.$$.fragment),v=P(),_e(y.$$.fragment),w=P(),_e(b.$$.fragment),_=P(),_e(I.$$.fragment),T=P(),_e(E.$$.fragment),k=P(),_e(C.$$.fragment),N=P(),_e(R.$$.fragment),O=P(),L=D("div"),F=D("p"),F.textContent="Informacin extra",V=P(),j=D("div"),q=D("div"),_e(B.$$.fragment),z=P(),_e(G.$$.fragment),K=P(),_e(H.$$.fragment),W=P(),Q=D("div"),J=D("div"),Y=D("button"),Y.textContent="Cancelar",X=P(),ie.c(),M(n,"class","seccion1 svelte-c6x9nq"),M(a,"class","informacionInputs svelte-c6x9nq"),M(i,"class","seccion1 svelte-c6x9nq"),M(m,"class","informacionInputs1 svelte-c6x9nq"),M(d,"class","seccion1 svelte-c6x9nq"),U(q,"display","flex"),M(j,"class","informacionInputs3 svelte-c6x9nq"),M(L,"class","seccion1 svelte-c6x9nq"),M(Y,"class","btnInformacion svelte-c6x9nq"),M(J,"class","seccionBtn svelte-c6x9nq"),M(Q,"class","seccion1 svelte-c6x9nq"),M(t,"class","containerForm svelte-c6x9nq")},m(A,D){x(A,t,D),S(t,n),S(t,r),S(t,i),S(i,s),S(i,o),S(i,a),Ie(c,a,null),S(a,l),Ie(u,a,null),S(t,h),S(t,d),S(d,f),S(d,p),S(d,m),Ie(g,m,null),S(m,v),Ie(y,m,null),S(m,w),Ie(b,m,null),S(m,_),Ie(I,m,null),S(m,T),Ie(E,m,null),S(m,k),Ie(C,m,null),S(m,N),Ie(R,m,null),S(t,O),S(t,L),S(L,F),S(L,V),S(L,j),S(j,q),Ie(B,q,null),S(q,z),Ie(G,q,null),S(j,K),Ie(H,j,null),S(t,W),S(t,Q),S(Q,J),S(J,Y),S(J,X),ie.m(J,null),Z=!0,ee||(te=$(Y,"click",e[3]),ee=!0)},p(e,t){const n={};1&t&&(n.directorio=e[0]),c.$set(n);const r={};1&t&&(r.directorio=e[0]),u.$set(r);const i={};1&t&&(i.directorio=e[0]),g.$set(i);const s={};1&t&&(s.directorio=e[0]),y.$set(s);const o={};1&t&&(o.directorio=e[0]),b.$set(o);const a={};1&t&&(a.directorio=e[0]),I.$set(a);const l={};1&t&&(l.directorio=e[0]),E.$set(l);const h={};1&t&&(h.directorio=e[0]),C.$set(h);const d={};1&t&&(d.directorio=e[0]),R.$set(d);const f={};1&t&&(f.directorio=e[0]),B.$set(f);const p={};1&t&&(p.directorio=e[0]),G.$set(p);const m={};1&t&&(m.directorio=e[0]),H.$set(m),re===(re=ne(e))&&ie?ie.p(e,t):(ie.d(1),ie=re(e),ie&&(ie.c(),ie.m(J,null)))},i(e){Z||(ge(c.$$.fragment,e),ge(u.$$.fragment,e),ge(g.$$.fragment,e),ge(y.$$.fragment,e),ge(b.$$.fragment,e),ge(I.$$.fragment,e),ge(E.$$.fragment,e),ge(C.$$.fragment,e),ge(R.$$.fragment,e),ge(B.$$.fragment,e),ge(G.$$.fragment,e),ge(H.$$.fragment,e),Z=!0)},o(e){ve(c.$$.fragment,e),ve(u.$$.fragment,e),ve(g.$$.fragment,e),ve(y.$$.fragment,e),ve(b.$$.fragment,e),ve(I.$$.fragment,e),ve(E.$$.fragment,e),ve(C.$$.fragment,e),ve(R.$$.fragment,e),ve(B.$$.fragment,e),ve(G.$$.fragment,e),ve(H.$$.fragment,e),Z=!1},d(e){e&&A(t),Te(c),Te(u),Te(g),Te(y),Te(b),Te(I),Te(E),Te(C),Te(R),Te(B),Te(G),Te(H),ie.d(),ee=!1,te()}}}function fN(e){let t,n,r;return{c(){t=D("button"),t.textContent="Actualizar",M(t,"class","btnInformacion svelte-c6x9nq")},m(i,s){x(i,t,s),n||(r=$(t,"click",(function(){o(e[5](e[0].id))&&e[5](e[0].id).apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&A(t),n=!1,r()}}}function pN(t){let n,r,i;return{c(){n=D("button"),n.textContent="Agregar direccin",M(n,"class","btnInformacion svelte-c6x9nq")},m(e,s){x(e,n,s),r||(i=$(n,"click",t[4]),r=!0)},p:e,d(e){e&&A(n),r=!1,i()}}}function mN(e){let t,n,r=e[1]&&dN(e);return{c(){r&&r.c(),t=O()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[1]?r?(r.p(e,n),2&n&&ge(r,1)):(r=dN(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&A(t)}}}function gN(e,t,n){let r,i,s,o;h(e,Gk,(e=>n(0,r=e))),h(e,gk,(e=>n(1,i=e))),h(e,Fk,(e=>n(7,s=e))),h(e,vk,(e=>n(2,o=e)));let a=[];const c=()=>{y(Gk,r.id="",r),y(Gk,r.receptor="",r),y(Gk,r.contacto_receptor="",r),y(Gk,r.departamento="",r),y(Gk,r.ciudad="",r),y(Gk,r.barrio="",r),y(Gk,r.tipo_de_calle="",r),y(Gk,r.primera_numeracion="",r),y(Gk,r.segunda_numeracion="",r),y(Gk,r.tercera_numeracion="",r),y(Gk,r.apartamento="",r),y(Gk,r.codigo_postal="",r),y(Gk,r.descripcion="",r)};return Q((async()=>{await fk().then((e=>{a={...JSON.parse(localStorage.getItem(e)),key:e}})),console.log(a)})),[r,i,o,()=>{y(gk,i=!1,i),c()},()=>{let e={id:mk(),receptor:r.receptor,contacto_receptor:r.contacto_receptor,departamento:r.departamento,ciudad:r.ciudad,barrio:r.barrio,tipo_de_calle:r.tipo_de_calle,primera_numeracion:r.primera_numeracion,segunda_numeracion:r.segunda_numeracion,tercera_numeracion:r.tercera_numeracion,apartamento:r.apartamento,codigo_postal:r.codigo_postal,descripcion:r.descripcion};console.log(e);const t=JSON.parse(localStorage.getItem(a.key));t.direcciones=[...t.direcciones,e],y(Fk,s=t.direcciones,s);const n=JSON.stringify(t);localStorage.setItem(a.key,n),rk("usuarios",{direcciones:t.direcciones},t.id),y(gk,i=!1,i),c()},async e=>{let t={id:r.id,receptor:r.receptor,contacto_receptor:r.contacto_receptor,departamento:r.departamento,ciudad:r.ciudad,barrio:r.barrio,tipo_de_calle:r.tipo_de_calle,primera_numeracion:r.primera_numeracion,segunda_numeracion:r.segunda_numeracion,tercera_numeracion:r.tercera_numeracion,apartamento:r.apartamento,codigo_postal:r.codigo_postal,descripcion:r.descripcion};const n=a.direcciones.findIndex((t=>t.id===e));if(-1!==n){const e=JSON.parse(localStorage.getItem(a.key));e.direcciones[n]=t,console.log(t.id);const r=JSON.stringify(e);localStorage.setItem(a.key,r),y(Fk,s=e.direcciones,s),rk("usuarios",{direcciones:e.direcciones},a.id).then((()=>{console.log("actualizacion exitosa")}))}y(gk,i=!1,i),c()}]}class vN extends ke{constructor(e){super(),Se(this,e,gN,mN,a,{})}}function yN(e){let t,n,r=e[0].codigo_postal+"";return{c(){t=R("/ "),n=R(r)},m(e,r){x(e,t,r),x(e,n,r)},p(e,t){1&t&&r!==(r=e[0].codigo_postal+"")&&F(n,r)},d(e){e&&A(t),e&&A(n)}}}function wN(e){let t,n,r,i=e[0].apartamento+"";return{c(){t=R("/ "),n=R(i),r=R(" /")},m(e,i){x(e,t,i),x(e,n,i),x(e,r,i)},p(e,t){1&t&&i!==(i=e[0].apartamento+"")&&F(n,i)},d(e){e&&A(t),e&&A(n),e&&A(r)}}}function bN(t){let n,r,i,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,O,L,V,U,j,q,B,z=t[0].receptor+"",G=t[0].tipo_de_calle+"",K=t[0].primera_numeracion+"",H=t[0].segunda_numeracion+"",W=t[0].tercera_numeracion+"",Q=t[0].barrio+"",J=t[0].departamento+"",Y=t[0].ciudad+"",X=t[0].codigo_postal&&yN(t),Z=t[0].apartamento&&wN(t);return{c(){n=D("div"),r=D("div"),i=D("div"),a=D("h5"),c=R(z),l=P(),u=D("div"),h=D("p"),d=R(G),f=P(),p=R(K),m=R(" # "),g=R(H),v=R(" - "),y=R(W),w=R(",\r\n        Barrio "),b=R(Q),_=P(),X&&X.c(),I=P(),Z&&Z.c(),T=P(),E=D("br"),k=R(J),C=R(" / "),N=R(Y),O=P(),L=D("div"),V=D("span"),V.textContent="edit",U=P(),j=D("span"),j.textContent="delete",M(u,"class","containerInformacion svelte-ynkzvg"),M(r,"class","informacion svelte-ynkzvg"),M(V,"class","material-symbols-outlined icon svelte-ynkzvg"),M(j,"class","material-symbols-outlined icon svelte-ynkzvg"),M(L,"class","btnAcciones svelte-ynkzvg"),M(n,"class","containerDireccion svelte-ynkzvg")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(i,a),S(a,c),S(r,l),S(r,u),S(u,h),S(h,d),S(h,f),S(h,p),S(h,m),S(h,g),S(h,v),S(h,y),S(h,w),S(h,b),S(h,_),X&&X.m(h,null),S(h,I),Z&&Z.m(h,null),S(h,T),S(h,E),S(h,k),S(h,C),S(h,N),S(n,O),S(n,L),S(L,V),S(L,U),S(L,j),q||(B=[$(V,"keypress",t[1]),$(V,"click",t[1]),$(j,"keypress",(function(){o(t[2](t[0].id))&&t[2](t[0].id).apply(this,arguments)})),$(j,"click",(function(){o(t[2](t[0].id))&&t[2](t[0].id).apply(this,arguments)}))],q=!0)},p(e,[n]){t=e,1&n&&z!==(z=t[0].receptor+"")&&F(c,z),1&n&&G!==(G=t[0].tipo_de_calle+"")&&F(d,G),1&n&&K!==(K=t[0].primera_numeracion+"")&&F(p,K),1&n&&H!==(H=t[0].segunda_numeracion+"")&&F(g,H),1&n&&W!==(W=t[0].tercera_numeracion+"")&&F(y,W),1&n&&Q!==(Q=t[0].barrio+"")&&F(b,Q),t[0].codigo_postal?X?X.p(t,n):(X=yN(t),X.c(),X.m(h,I)):X&&(X.d(1),X=null),t[0].apartamento?Z?Z.p(t,n):(Z=wN(t),Z.c(),Z.m(h,T)):Z&&(Z.d(1),Z=null),1&n&&J!==(J=t[0].departamento+"")&&F(k,J),1&n&&Y!==(Y=t[0].ciudad+"")&&F(N,Y)},i:e,o:e,d(e){e&&A(n),X&&X.d(),Z&&Z.d(),q=!1,s(B)}}}function _N(e,t,n){let r,i,s,o;h(e,Fk,(e=>n(4,r=e))),h(e,vk,(e=>n(5,i=e))),h(e,Gk,(e=>n(6,s=e))),h(e,gk,(e=>n(7,o=e)));let{direccion:a}=t,{usuario:c}=t;return e.$$set=e=>{"direccion"in e&&n(0,a=e.direccion),"usuario"in e&&n(3,c=e.usuario)},[a,()=>{y(gk,o=!0,o),y(Gk,s.id=a.id,s),y(Gk,s.receptor=a.receptor,s),y(Gk,s.contacto_receptor=a.contacto_receptor,s),y(Gk,s.departamento=a.departamento,s),y(Gk,s.ciudad=a.ciudad,s),y(Gk,s.barrio=a.barrio,s),y(Gk,s.tipo_de_calle=a.tipo_de_calle,s),y(Gk,s.primera_numeracion=a.primera_numeracion,s),y(Gk,s.segunda_numeracion=a.segunda_numeracion,s),y(Gk,s.tercera_numeracion=a.tercera_numeracion,s),y(Gk,s.apartamento=a.apartamento,s),y(Gk,s.codigo_postal=a.codigo_postal,s),y(Gk,s.descripcion=a.descripcion,s),y(vk,i=!0,i)},async e=>{const t=JSON.parse(localStorage.getItem(c.key)),n=t.direcciones.filter((t=>t.id!==e));t.direcciones=n,y(Fk,r=t.direcciones,r);const i=JSON.stringify(t);localStorage.setItem(c.key,i),rk("usuarios",{direcciones:t.direcciones},t.id),console.log(n)},c]}class IN extends ke{constructor(e){super(),Se(this,e,_N,bN,a,{direccion:0,usuario:3})}}function TN(e,t,n){const r=e.slice();return r[9]=t[n],r}function EN(t){let n,r,i,s,o,a,c;return s=new dC({}),{c(){n=D("div"),r=D("button"),r.textContent="Iniciar Sesin",i=P(),_e(s.$$.fragment),M(r,"class","btnLogin svelte-11y6yw3"),M(n,"class","contenidoUnlogin svelte-11y6yw3")},m(e,l){x(e,n,l),S(n,r),x(e,i,l),Ie(s,e,l),o=!0,a||(c=$(r,"click",t[6]),a=!0)},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),e&&A(i),Te(s,e),a=!1,c()}}}function SN(e){let t,n,r,i,s,o,a,c,l,u,h,d,f,p,m,g;n=new EA({props:{usuario:e[0]}});const v=[CN,kN],y=[];function w(e,t){return e[1].length<1?0:1}return a=w(e),c=y[a]=v[a](e),f=new vN({}),{c(){t=D("div"),_e(n.$$.fragment),r=P(),i=D("div"),s=D("h1"),s.textContent="Mis direcciones",o=P(),c.c(),l=P(),u=D("div"),h=D("button"),h.textContent="Agregar direccin",d=P(),_e(f.$$.fragment),M(s,"class","svelte-11y6yw3"),M(h,"class","btnInformacion svelte-11y6yw3"),U(h,"font-size","20px"),M(u,"class","containerBtnAgregar svelte-11y6yw3"),M(i,"class","containerComponent svelte-11y6yw3"),M(t,"class","containerPerfil svelte-11y6yw3")},m(c,v){x(c,t,v),Ie(n,t,null),S(t,r),S(t,i),S(i,s),S(i,o),y[a].m(i,null),S(i,l),S(i,u),S(u,h),x(c,d,v),Ie(f,c,v),p=!0,m||(g=$(h,"click",e[4]),m=!0)},p(e,t){const r={};1&t&&(r.usuario=e[0]),n.$set(r);let s=a;a=w(e),a===s?y[a].p(e,t):(pe(),ve(y[s],1,1,(()=>{y[s]=null})),me(),c=y[a],c?c.p(e,t):(c=y[a]=v[a](e),c.c()),ge(c,1),c.m(i,l))},i(e){p||(ge(n.$$.fragment,e),ge(c),ge(f.$$.fragment,e),p=!0)},o(e){ve(n.$$.fragment,e),ve(c),ve(f.$$.fragment,e),p=!1},d(e){e&&A(t),Te(n),y[a].d(),e&&A(d),Te(f,e),m=!1,g()}}}function kN(e){let t,n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=xN(TN(e,r,t));const s=e=>ve(i[e],1,1,(()=>{i[e]=null}));return{c(){t=D("div");for(let e=0;e<i.length;e+=1)i[e].c();M(t,"class","containerDirecciones svelte-11y6yw3")},m(e,r){x(e,t,r);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);n=!0},p(e,n){if(3&n){let o;for(r=e[1],o=0;o<r.length;o+=1){const s=TN(e,r,o);i[o]?(i[o].p(s,n),ge(i[o],1)):(i[o]=xN(s),i[o].c(),ge(i[o],1),i[o].m(t,null))}for(pe(),o=r.length;o<i.length;o+=1)s(o);me()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)ge(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ve(i[e]);n=!1},d(e){e&&A(t),N(i,e)}}}function CN(t){let n,r;return n=new FA({props:{imagen:"https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/ilustraciones%2FEmpty-folder.svg?alt=media&token=c0ce0263-3bcf-44dd-bd56-701305784981",mensaje:"No se registran direcciones"}}),{c(){_e(n.$$.fragment)},m(e,t){Ie(n,e,t),r=!0},p:e,i(e){r||(ge(n.$$.fragment,e),r=!0)},o(e){ve(n.$$.fragment,e),r=!1},d(e){Te(n,e)}}}function xN(e){let t,n,r,i,s;return n=new IN({props:{direccion:e[9],usuario:e[0]}}),{c(){t=D("div"),_e(n.$$.fragment),r=P(),M(t,"key",i=e[9].id)},m(e,i){x(e,t,i),Ie(n,t,null),S(t,r),s=!0},p(e,r){const o={};2&r&&(o.direccion=e[9]),1&r&&(o.usuario=e[0]),n.$set(o),(!s||2&r&&i!==(i=e[9].id))&&M(t,"key",i)},i(e){s||(ge(n.$$.fragment,e),s=!0)},o(e){ve(n.$$.fragment,e),s=!1},d(e){e&&A(t),Te(n)}}}function AN(e){let t,n,r,i;const s=[SN,EN],o=[];function a(e,t){return e[2]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function NN(e,t,n){let r,i,s,o,a,c;h(e,bk,(e=>n(2,i=e))),h(e,Fk,(e=>n(5,s=e))),h(e,vk,(e=>n(7,o=e))),h(e,gk,(e=>n(8,a=e))),h(e,_k,(e=>n(3,c=e)));let l=[];(async()=>{await fk().then((e=>{n(0,l={...JSON.parse(localStorage.getItem(e)),key:e}),y(Fk,s=l.direcciones,s),n(1,r=l.direcciones),y(bk,i=!0,i)})).catch((()=>{y(bk,i=!1,i)}))})();return e.$$.update=()=>{32&e.$$.dirty&&n(1,r=s)},[l,r,i,c,()=>{y(gk,a=!0,a),y(vk,o=!1,o)},s,()=>y(_k,c=!0,c)]}class DN extends ke{constructor(e){super(),Se(this,e,NN,AN,a,{})}}function RN(e,t,n){const r=e.slice();return r[2]=t[n],r}function PN(e){let t,n,r,i,s,o,a,c,u,h=e[2].nombre+"";return{c(){t=D("div"),n=D("div"),r=D("img"),o=P(),a=D("p"),c=R(h),u=P(),l(r.src,i=e[2].imagen)||M(r,"src",i),M(r,"alt",s=e[2].nombre),M(r,"class","svelte-7x8tas"),M(a,"class","titulo svelte-7x8tas"),M(n,"class","contenido svelte-7x8tas"),M(t,"class","cardProducto svelte-7x8tas")},m(e,i){x(e,t,i),S(t,n),S(n,r),S(n,o),S(n,a),S(a,c),S(t,u)},p(e,t){1&t&&!l(r.src,i=e[2].imagen)&&M(r,"src",i),1&t&&s!==(s=e[2].nombre)&&M(r,"alt",s),1&t&&h!==(h=e[2].nombre+"")&&F(c,h)},d(e){e&&A(t)}}}function ON(t){let n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T=t[0].referencia_pedido+"",E=t[1](t[0].fecha_compra)+"",k=t[0].total+"",C=t[0].carrito,O=[];for(let e=0;e<C.length;e+=1)O[e]=PN(RN(t,C,e));return{c(){n=D("section"),r=D("div"),i=D("div"),s=D("p"),o=D("b"),o.textContent="Pedido id:",a=P(),c=R(T),l=P(),u=D("p"),h=D("b"),h.textContent="Comprado el",d=P(),f=R(E),p=P(),m=D("p"),g=D("b"),g.textContent="Total:",v=R(" $"),y=R(k),w=P(),b=D("div"),b.innerHTML='<button class="btnVerPedido svelte-7x8tas">Ver pedido</button>',_=P(),I=D("div");for(let e=0;e<O.length;e+=1)O[e].c();M(s,"class","svelte-7x8tas"),M(u,"class","svelte-7x8tas"),M(m,"class","svelte-7x8tas"),M(i,"class","informacion svelte-7x8tas"),M(b,"class","btnPedido"),M(r,"class","navbarPedido svelte-7x8tas"),M(I,"class","contenedorCards svelte-7x8tas"),M(n,"class","contenedorPedido svelte-7x8tas")},m(e,t){x(e,n,t),S(n,r),S(r,i),S(i,s),S(s,o),S(s,a),S(s,c),S(i,l),S(i,u),S(u,h),S(u,d),S(u,f),S(i,p),S(i,m),S(m,g),S(m,v),S(m,y),S(r,w),S(r,b),S(n,_),S(n,I);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(I,null)},p(e,[t]){if(1&t&&T!==(T=e[0].referencia_pedido+"")&&F(c,T),1&t&&E!==(E=e[1](e[0].fecha_compra)+"")&&F(f,E),1&t&&k!==(k=e[0].total+"")&&F(y,k),1&t){let n;for(C=e[0].carrito,n=0;n<C.length;n+=1){const r=RN(e,C,n);O[n]?O[n].p(r,t):(O[n]=PN(r),O[n].c(),O[n].m(I,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=C.length}},i:e,o:e,d(e){e&&A(n),N(O,e)}}}function $N(e,t,n){let{pedido:r}=t;console.log(r);return e.$$set=e=>{"pedido"in e&&n(0,r=e.pedido)},[r,e=>{const t=new Date(e);t.setDate(t.getDate());return t.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}]}class LN extends ke{constructor(e){super(),Se(this,e,$N,ON,a,{pedido:0})}}function MN(e,t,n){const r=e.slice();return r[7]=t[n],r}function FN(t){let n,r,i,s,o,a,c;return s=new dC({}),{c(){n=D("div"),r=D("button"),r.textContent="Iniciar Sesin",i=P(),_e(s.$$.fragment),M(r,"class","btnLogin svelte-1le82wx"),M(n,"class","contenidoUnlogin svelte-1le82wx")},m(e,l){x(e,n,l),S(n,r),x(e,i,l),Ie(s,e,l),o=!0,a||(c=$(r,"click",t[5]),a=!0)},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),e&&A(i),Te(s,e),a=!1,c()}}}function VN(e){let t,n,r,i,s,o,a,c,l;n=new EA({props:{usuario:e[1]}});const u=[jN,UN],h=[];function d(e,t){return e[2].length<1?0:1}return a=d(e),c=h[a]=u[a](e),{c(){t=D("div"),_e(n.$$.fragment),r=P(),i=D("div"),s=D("h1"),s.textContent="Mis pedidos",o=P(),c.c(),M(s,"class","svelte-1le82wx"),M(i,"class","containerComponent svelte-1le82wx"),M(t,"class","containerPerfil svelte-1le82wx")},m(e,c){x(e,t,c),Ie(n,t,null),S(t,r),S(t,i),S(i,s),S(i,o),h[a].m(i,null),l=!0},p(e,t){const r={};2&t&&(r.usuario=e[1]),n.$set(r);let s=a;a=d(e),a===s?h[a].p(e,t):(pe(),ve(h[s],1,1,(()=>{h[s]=null})),me(),c=h[a],c?c.p(e,t):(c=h[a]=u[a](e),c.c()),ge(c,1),c.m(i,null))},i(e){l||(ge(n.$$.fragment,e),ge(c),l=!0)},o(e){ve(n.$$.fragment,e),ve(c),l=!1},d(e){e&&A(t),Te(n),h[a].d()}}}function UN(e){let t,n,r=e[0].reverse(),i=[];for(let t=0;t<r.length;t+=1)i[t]=qN(MN(e,r,t));const s=e=>ve(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=O()},m(e,r){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,r);x(e,t,r),n=!0},p(e,n){if(1&n){let o;for(r=e[0].reverse(),o=0;o<r.length;o+=1){const s=MN(e,r,o);i[o]?(i[o].p(s,n),ge(i[o],1)):(i[o]=qN(s),i[o].c(),ge(i[o],1),i[o].m(t.parentNode,t))}for(pe(),o=r.length;o<i.length;o+=1)s(o);me()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)ge(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ve(i[e]);n=!1},d(e){N(i,e),e&&A(t)}}}function jN(t){let n,r;return n=new FA({props:{imagen:"https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/ilustraciones%2FNo-order.svg?alt=media&token=68b1de07-8754-4e88-9636-3cf101697447",mensaje:"No tienes pedidos registrados"}}),{c(){_e(n.$$.fragment)},m(e,t){Ie(n,e,t),r=!0},p:e,i(e){r||(ge(n.$$.fragment,e),r=!0)},o(e){ve(n.$$.fragment,e),r=!1},d(e){Te(n,e)}}}function qN(e){let t,n;return t=new LN({props:{pedido:e[7]}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.pedido=e[7]),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function BN(e){let t,n,r,i;const s=[VN,FN],o=[];function a(e,t){return e[3]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function zN(e,t,n){let r,i,s,o;h(e,bk,(e=>n(3,i=e))),h(e,jk,(e=>n(0,s=e))),h(e,_k,(e=>n(4,o=e)));let a=[];(async()=>{await fk().then((e=>{n(1,a={...JSON.parse(localStorage.getItem(e)),key:e}),y(bk,i=!0,i),y(jk,s=a.pedidos,s),console.log(s)})).catch((()=>{y(bk,i=!1,i)}))})();return e.$$.update=()=>{1&e.$$.dirty&&n(2,r=s)},[s,a,r,i,o,()=>y(_k,o=!0,o)]}class GN extends ke{constructor(e){super(),Se(this,e,zN,BN,a,{})}}function KN(t){let n,r,i,a,c,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,O,L=t[0].nombre+"",V=t[0].precio+"";return{c(){n=D("div"),r=D("div"),i=D("i"),a=P(),c=D("div"),u=D("div"),h=D("img"),p=P(),m=D("div"),g=D("h6"),v=R(L),y=P(),w=D("p"),b=R("$ "),_=R(V),I=P(),T=D("div"),E=D("a"),k=R("Ver producto"),M(i,"class","bi bi-x-circle-fill icon svelte-106317q"),M(r,"class","btnCerrar svelte-106317q"),l(h.src,d=t[0].imagenes[0])||M(h,"src",d),M(h,"alt",f=t[0].nombre),M(h,"class","svelte-106317q"),M(u,"class","containerImg svelte-106317q"),M(g,"class","titulo"),M(m,"class","containerInformacion svelte-106317q"),M(E,"class","btnInformacion svelte-106317q"),M(E,"href",C="/producto/"+t[0].id),M(T,"class","btnVerProducto svelte-106317q"),M(c,"class","contenido svelte-106317q"),M(n,"class","containerCard svelte-106317q")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(n,a),S(n,c),S(c,u),S(u,h),S(c,p),S(c,m),S(m,g),S(g,v),S(m,y),S(m,w),S(w,b),S(w,_),S(c,I),S(c,T),S(T,E),S(E,k),N||(O=[$(i,"keypress",(function(){o(t[1](t[0].id))&&t[1](t[0].id).apply(this,arguments)})),$(i,"click",(function(){o(t[1](t[0].id))&&t[1](t[0].id).apply(this,arguments)}))],N=!0)},p(e,[n]){t=e,1&n&&!l(h.src,d=t[0].imagenes[0])&&M(h,"src",d),1&n&&f!==(f=t[0].nombre)&&M(h,"alt",f),1&n&&L!==(L=t[0].nombre+"")&&F(v,L),1&n&&V!==(V=t[0].precio+"")&&F(_,V),1&n&&C!==(C="/producto/"+t[0].id)&&M(E,"href",C)},i:e,o:e,d(e){e&&A(n),N=!1,s(O)}}}function HN(e,t,n){let r;h(e,Vk,(e=>n(3,r=e)));let{producto_favorito:i}=t,{usuario:s}=t;console.log(i.id);return e.$$set=e=>{"producto_favorito"in e&&n(0,i=e.producto_favorito),"usuario"in e&&n(2,s=e.usuario)},[i,async e=>{const t=JSON.parse(localStorage.getItem(s.key)),n=t.favoritos.filter((t=>t.id!==e));t.favoritos=n,y(Vk,r=t.favoritos,r);const i=JSON.stringify(t);localStorage.setItem(s.key,i),rk("usuarios",{favoritos:t.favoritos},t.id),console.log(n)},s]}class WN extends ke{constructor(e){super(),Se(this,e,HN,KN,a,{producto_favorito:0,usuario:2})}}function QN(e,t,n){const r=e.slice();return r[6]=t[n],r}function JN(t){let n,r,i,s,o,a,c;return s=new dC({}),{c(){n=D("div"),r=D("button"),r.textContent="Iniciar Sesin",i=P(),_e(s.$$.fragment),M(r,"class","btnLogin svelte-ecgulo"),M(n,"class","contenidoUnlogin svelte-ecgulo")},m(e,l){x(e,n,l),S(n,r),x(e,i,l),Ie(s,e,l),o=!0,a||(c=$(r,"click",t[5]),a=!0)},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),e&&A(i),Te(s,e),a=!1,c()}}}function YN(e){let t,n,r,i,s,o,a,c,l,u;n=new EA({props:{usuario:e[0]}});const h=[ZN,XN],d=[];function f(e,t){return e[1].length<1?0:1}return c=f(e),l=d[c]=h[c](e),{c(){t=D("div"),_e(n.$$.fragment),r=P(),i=D("div"),s=D("h1"),s.textContent="Lista de deseos",o=P(),a=D("div"),l.c(),M(s,"class","svelte-ecgulo"),M(a,"class","contenido svelte-ecgulo"),M(i,"class","containerComponent svelte-ecgulo"),M(t,"class","containerPerfil svelte-ecgulo")},m(e,l){x(e,t,l),Ie(n,t,null),S(t,r),S(t,i),S(i,s),S(i,o),S(i,a),d[c].m(a,null),u=!0},p(e,t){const r={};1&t&&(r.usuario=e[0]),n.$set(r);let i=c;c=f(e),c===i?d[c].p(e,t):(pe(),ve(d[i],1,1,(()=>{d[i]=null})),me(),l=d[c],l?l.p(e,t):(l=d[c]=h[c](e),l.c()),ge(l,1),l.m(a,null))},i(e){u||(ge(n.$$.fragment,e),ge(l),u=!0)},o(e){ve(n.$$.fragment,e),ve(l),u=!1},d(e){e&&A(t),Te(n),d[c].d()}}}function XN(e){let t,n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=eD(QN(e,r,t));const s=e=>ve(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=O()},m(e,r){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,r);x(e,t,r),n=!0},p(e,n){if(3&n){let o;for(r=e[1],o=0;o<r.length;o+=1){const s=QN(e,r,o);i[o]?(i[o].p(s,n),ge(i[o],1)):(i[o]=eD(s),i[o].c(),ge(i[o],1),i[o].m(t.parentNode,t))}for(pe(),o=r.length;o<i.length;o+=1)s(o);me()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)ge(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ve(i[e]);n=!1},d(e){N(i,e),e&&A(t)}}}function ZN(t){let n,r;return n=new FA({props:{imagen:"https://firebasestorage.googleapis.com/v0/b/deportes-triunfo.appspot.com/o/ilustraciones%2FNothing-here.svg?alt=media&token=468f1599-c39d-470f-bacb-942a54c939a2",mensaje:"No tienes ningn producto agregado a tu lista de deseos"}}),{c(){_e(n.$$.fragment)},m(e,t){Ie(n,e,t),r=!0},p:e,i(e){r||(ge(n.$$.fragment,e),r=!0)},o(e){ve(n.$$.fragment,e),r=!1},d(e){Te(n,e)}}}function eD(e){let t,n;return t=new WN({props:{producto_favorito:e[6],usuario:e[0]}}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.producto_favorito=e[6]),1&n&&(r.usuario=e[0]),t.$set(r)},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function tD(e){let t,n,r,i;const s=[YN,JN],o=[];function a(e,t){return e[2]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function nD(e,t,n){let r,i,s,o;h(e,bk,(e=>n(2,i=e))),h(e,Vk,(e=>n(4,s=e))),h(e,_k,(e=>n(3,o=e)));let a=[];Q((async()=>{await fk().then((e=>{n(0,a={...JSON.parse(localStorage.getItem(e)),key:e}),y(Vk,s=a.favoritos,s),y(bk,i=!0,i)})).catch((()=>{y(bk,i=!1,i)}))}));return e.$$.update=()=>{16&e.$$.dirty&&n(1,r=s)},[a,r,i,o,s,()=>y(_k,o=!0,o)]}class rD extends ke{constructor(e){super(),Se(this,e,nD,tD,a,{})}}function iD(t){let n,r,i,o,a,c,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,O,L=t[0].nombre+"",V=t[0].precio+"",U=t[0].cantidad+"";return{c(){n=D("div"),r=D("div"),i=D("i"),o=P(),a=D("img"),u=P(),h=D("div"),d=D("h5"),f=R(L),p=P(),m=D("p"),g=R("$ "),v=R(V),y=P(),w=D("p"),b=D("b"),b.textContent="Disponibles:",_=P(),I=R(U),T=R(" und(s)."),E=P(),k=D("div"),C=D("button"),C.textContent="Editar",M(i,"class","bi bi-x-circle-fill icon svelte-14avew"),M(r,"class","btnClose svelte-14avew"),l(a.src,c=t[1])||M(a,"src",c),M(a,"class","card-img-top svelte-14avew"),M(a,"alt","Imagenes del producto "),M(d,"class","card-title svelte-14avew"),M(m,"class","card-text"),M(h,"class","card-body svelte-14avew"),M(C,"class","btnLogin svelte-14avew"),M(k,"class","accionesBtn svelte-14avew"),M(n,"class","card")},m(e,s){x(e,n,s),S(n,r),S(r,i),S(n,o),S(n,a),S(n,u),S(n,h),S(h,d),S(d,f),S(h,p),S(h,m),S(m,g),S(m,v),S(h,y),S(h,w),S(w,b),S(w,_),S(w,I),S(w,T),S(n,E),S(n,k),S(k,C),N||(O=[$(i,"keypress",t[3]),$(i,"click",t[3]),$(C,"click",t[2])],N=!0)},p(e,[t]){2&t&&!l(a.src,c=e[1])&&M(a,"src",c),1&t&&L!==(L=e[0].nombre+"")&&F(f,L),1&t&&V!==(V=e[0].precio+"")&&F(v,V),1&t&&U!==(U=e[0].cantidad+"")&&F(I,U)},i:e,o:e,d(e){e&&A(n),N=!1,s(O)}}}function sD(e,t,n){let r,i,s,o,a,c,l,u;h(e,Ek,(e=>n(4,i=e))),h(e,Dk,(e=>n(5,s=e))),h(e,Bk,(e=>n(6,o=e))),h(e,Kk,(e=>n(7,a=e))),h(e,zk,(e=>n(8,c=e))),h(e,Ik,(e=>n(9,l=e))),h(e,vk,(e=>n(10,u=e)));let{producto:d}=t;return e.$$set=e=>{"producto"in e&&n(0,d=e.producto)},e.$$.update=()=>{1&e.$$.dirty&&n(1,r=d.imagenes[0])},[d,r,()=>{y(vk,u=!0,u),y(Ik,l=!0,l),y(Kk,a.cantidad=d.cantidad,a),y(Kk,a.categoria=d.categoria,a),y(Kk,a.descripcion=d.descripcion,a),y(Kk,a.imagenes=d.imagenes,a),y(Kk,a.nombre=d.nombre,a),y(Kk,a.precio=d.precio,a),y(Kk,a.sub_categoria=d.sub_categoria,a),y(zk,c={...a,id:d.id},c)},async()=>{confirm("Esta seguro de eliminar este Producto")?(console.log(o),sk("productos",d.id).then((async()=>{y(Bk,o=[...o.filter((e=>e.id!==d.id))],o),y(Ek,i=!0,i),y(Dk,s="Producto eliminado con exito",s),setTimeout((function(){y(Ek,i=!1,i),location.reload()}),3e3)}))):console.log("El producto no ha sido eliminado")}]}class oD extends ke{constructor(e){super(),Se(this,e,sD,iD,a,{producto:0})}}function aD(t){let n,r,i,o,a,c;return{c(){n=D("div"),r=D("button"),r.textContent="Cargar imagenes",i=P(),o=D("button"),o.textContent="Agregar producto",M(r,"class","buttonLogin svelte-1updjhz"),M(o,"class","buttonLogin svelte-1updjhz"),M(n,"class","btnProducto svelte-1updjhz")},m(e,s){x(e,n,s),S(n,r),S(n,i),S(n,o),a||(c=[$(r,"click",t[5]),$(o,"click",t[2])],a=!0)},p:e,d(e){e&&A(n),a=!1,s(c)}}}function cD(t){let n,r,i,o,a,c;return{c(){n=D("div"),r=D("button"),r.textContent="Cargar imagenes",i=P(),o=D("button"),o.textContent="Actualizar producto",M(r,"class","buttonLogin svelte-1updjhz"),M(o,"class","buttonLogin svelte-1updjhz"),M(n,"class","btnProducto svelte-1updjhz")},m(e,s){x(e,n,s),S(n,r),S(n,i),S(n,o),a||(c=[$(r,"click",t[5]),$(o,"click",t[4])],a=!0)},p:e,d(e){e&&A(n),a=!1,s(c)}}}function lD(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C;function N(e,t){return e[1]?cD:aD}h=new tC({props:{variable:"nombre",mensaje:"Nombre del producto",directorio:e[0]}}),f=new tC({props:{variable:"categoria",mensaje:"Categoria",directorio:e[0]}}),m=new tC({props:{variable:"sub_categoria",mensaje:"Sub. Categoria",directorio:e[0]}}),y=new tC({props:{variable:"cantidad",mensaje:"Cantidad",directorio:e[0]}}),b=new tC({props:{variable:"precio",mensaje:"Precio",directorio:e[0]}}),I=new hN({props:{variable:"descripcion",mensaje:"Describe la informacin del producto",directorio:e[0]}});let R=N(e),O=R(e);return{c(){t=D("div"),n=D("div"),r=D("i"),i=P(),o=D("h1"),o.textContent="Ingrese el producto",a=P(),c=D("form"),l=D("div"),u=D("div"),_e(h.$$.fragment),d=P(),_e(f.$$.fragment),p=P(),_e(m.$$.fragment),g=P(),v=D("div"),_e(y.$$.fragment),w=P(),_e(b.$$.fragment),_=P(),_e(I.$$.fragment),T=P(),O.c(),M(r,"class","bi bi-x-circle-fill icon svelte-1updjhz"),M(n,"class","btnCerrar svelte-1updjhz"),M(u,"class","formularioIzq svelte-1updjhz"),M(v,"class","formularioDer svelte-1updjhz"),M(l,"class","containerFormularioPartes svelte-1updjhz"),M(c,"action",""),M(t,"class","formularioProducto svelte-1updjhz")},m(s,A){x(s,t,A),S(t,n),S(n,r),S(t,i),S(t,o),S(t,a),S(t,c),S(c,l),S(l,u),Ie(h,u,null),S(u,d),Ie(f,u,null),S(u,p),Ie(m,u,null),S(l,g),S(l,v),Ie(y,v,null),S(v,w),Ie(b,v,null),S(c,_),Ie(I,c,null),S(t,T),O.m(t,null),E=!0,k||(C=[$(r,"keypress",e[3]),$(r,"click",e[3])],k=!0)},p(e,[n]){const r={};1&n&&(r.directorio=e[0]),h.$set(r);const i={};1&n&&(i.directorio=e[0]),f.$set(i);const s={};1&n&&(s.directorio=e[0]),m.$set(s);const o={};1&n&&(o.directorio=e[0]),y.$set(o);const a={};1&n&&(a.directorio=e[0]),b.$set(a);const c={};1&n&&(c.directorio=e[0]),I.$set(c),R===(R=N(e))&&O?O.p(e,n):(O.d(1),O=R(e),O&&(O.c(),O.m(t,null)))},i(e){E||(ge(h.$$.fragment,e),ge(f.$$.fragment,e),ge(m.$$.fragment,e),ge(y.$$.fragment,e),ge(b.$$.fragment,e),ge(I.$$.fragment,e),E=!0)},o(e){ve(h.$$.fragment,e),ve(f.$$.fragment,e),ve(m.$$.fragment,e),ve(y.$$.fragment,e),ve(b.$$.fragment,e),ve(I.$$.fragment,e),E=!1},d(e){e&&A(t),Te(h),Te(f),Te(m),Te(y),Te(b),Te(I),O.d(),k=!1,s(C)}}}function uD(e,t,n){let r,i,s,o,a,c,l,u;h(e,Ek,(e=>n(6,r=e))),h(e,Dk,(e=>n(7,i=e))),h(e,$k,(e=>n(8,s=e))),h(e,zk,(e=>n(9,o=e))),h(e,Ik,(e=>n(10,a=e))),h(e,Bk,(e=>n(11,c=e))),h(e,Kk,(e=>n(0,l=e))),h(e,vk,(e=>n(1,u=e)));const d=()=>{y(Kk,l.nombre="",l),y(Kk,l.categoria="",l),y(Kk,l.cantidad="",l),y(Kk,l.descripcion="",l),y(Kk,l.precio="",l),y(Kk,l.sub_categoria="",l),y(Kk,l.imagenes=[],l),y($k,s=[],s),y(Ik,a=!1,a)};console.log(o);return[l,u,async()=>{let e=await lk(s),t={nombre:l.nombre,categoria:l.categoria.toLowerCase(),cantidad:l.cantidad,descripcion:l.descripcion,precio:l.precio,sub_categoria:l.sub_categoria.toLowerCase(),imagenes:e};nk("productos",t).then((async()=>{console.log("objeto cargado",t),d(),y(Bk,c=[...c,t],c),y(Ik,a=!1,a),y(Ek,r=!0,r),y(Dk,i="El producto ha sido creado",i),setTimeout((function(){y(Ek,r=!1,r)}),3e3)}))},d,async()=>{let e=await lk(s);console.log(s);let t={nombre:l.nombre,categoria:l.categoria.toLowerCase(),cantidad:l.cantidad,descripcion:l.descripcion,precio:l.precio,sub_categoria:l.sub_categoria.toLowerCase(),imagenes:0==s.length?l.imagenes:e};rk("productos",t,o.id).then((async()=>{console.log("objeto actualizado",t),d(),y(Bk,c=[...c.filter((e=>e.id!==o.id)),t],c),y(Ik,a=!1,a),y(Ek,r=!0,r),y(Dk,i="El producto ha sido actualizado",i),setTimeout((function(){y(Ek,r=!1,r)}),3e3)}))},()=>{try{for(const e of s)if(e&&e.type.startsWith("image/")){const t=new FileReader;t.onload=async t=>{let n=t.target.result;ck(e.name,n)},t.readAsDataURL(e)}}catch(e){console.error("Error: "+e)}y(Ek,r=!0,r),y(Dk,i="Las imagenes han sido cargadas",i),setTimeout((function(){y(Ek,r=!1,r)}),3e3)}]}class hD extends ke{constructor(e){super(),Se(this,e,uD,lD,a,{})}}function dD(t){let n,r,i,s,o,a,c,l,u;return{c(){n=D("div"),r=D("label"),i=D("input"),s=P(),o=D("span"),o.innerHTML='<i class="bi bi-plus-lg svelte-rkvf0h"></i>',a=P(),c=D("p"),c.textContent="Seleccione max. 4 imagenes",M(i,"type","file"),M(i,"id","image"),M(i,"name","image"),U(i,"display","none"),i.multiple=!0,M(o,"class","btnInput svelte-rkvf0h"),M(r,"for","image"),M(r,"class","intento"),M(c,"class","svelte-rkvf0h"),M(n,"class","containerInputImg svelte-rkvf0h")},m(e,h){x(e,n,h),S(n,r),S(r,i),S(r,s),S(r,o),S(n,a),S(n,c),l||(u=$(i,"change",t[2]),l=!0)},p:e,d(e){e&&A(n),l=!1,u()}}}function fD(e){let t;return{c(){t=D("div"),t.innerHTML='<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev" style="padding: 20px;"><span class="carousel-control-prev-icon svelte-rkvf0h" aria-hidden="true"></span> \n          <span class="visually-hidden">Previous</span></button> \n        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next" style="padding: 20px;"><span class="carousel-control-next-icon svelte-rkvf0h" aria-hidden="true"></span> \n          <span class="visually-hidden">Next</span></button>',M(t,"class","containerArrows")},m(e,n){x(e,t,n)},d(e){e&&A(t)}}}function pD(t){let n,r,i,s,o,a,c,l=0==t[0].length&&dD(t),u=t[0].length>0&&fD();return{c(){n=D("div"),l&&l.c(),r=P(),i=D("div"),s=D("div"),o=P(),a=D("div"),c=P(),u&&u.c(),M(s,"class","carousel-inner svelte-rkvf0h"),M(a,"class","carrusel svelte-rkvf0h"),M(i,"id","carouselExampleCaptions"),M(i,"class","carousel slide"),M(n,"class","containerSlider svelte-rkvf0h")},m(e,t){x(e,n,t),l&&l.m(n,null),S(n,r),S(n,i),S(i,s),S(i,o),S(i,a),S(i,c),u&&u.m(i,null)},p(e,[t]){0==e[0].length?l?l.p(e,t):(l=dD(e),l.c(),l.m(n,r)):l&&(l.d(1),l=null),e[0].length>0?u||(u=fD(),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},i:e,o:e,d(e){e&&A(n),l&&l.d(),u&&u.d()}}}function mD(e,t,n){let r;h(e,$k,(e=>n(4,r=e)));let i=[];const s=e=>{n(0,i=e.target.files),y($k,r=e.target.files,r);let t=document.querySelector(".carousel-inner"),s=document.querySelector(".carrusel");if(i.length>4)alert("Nmero mximo de imagenes permitidas superado"),n(0,i=[]);else for(let e=0;e<i.length;e++)if(i[e]&&i[e].type.startsWith("image/")){const n=new FileReader;n.onload=n=>{const r=document.createElement("img");r.classList.add("carousel-item"),r.src=n.target.result,r.alt=i[e].name,0===e&&r.classList.add("active"),t.appendChild(r);const o=document.createElement("img");o.classList.add("carrusel-img"),o.src=n.target.result,o.alt=i[e].name,0===e&&o.classList.add("active"),0===e&&o.setAttribute("aria-current","true"),o.setAttribute("type","button"),o.setAttribute("data-bs-target","#carouselExampleCaptions"),o.setAttribute("data-bs-slide-to",`${e}`),o.setAttribute("aria-label",`Slide ${e+1}`),s.appendChild(o)},n.readAsDataURL(i[e])}};return[i,s,e=>s(e)]}class gD extends ke{constructor(e){super(),Se(this,e,mD,pD,a,{})}}function vD(t){let n,r,i,s,o;return r=new gD({}),s=new hD({}),{c(){n=D("div"),_e(r.$$.fragment),i=P(),_e(s.$$.fragment),M(n,"class","containerProductos svelte-ud5q3w")},m(e,t){x(e,n,t),Ie(r,n,null),S(n,i),Ie(s,n,null),o=!0},p:e,i(e){o||(ge(r.$$.fragment,e),ge(s.$$.fragment,e),o=!0)},o(e){ve(r.$$.fragment,e),ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),Te(r),Te(s)}}}class yD extends ke{constructor(e){super(),Se(this,e,null,vD,a,{})}}function wD(e,t,n){const r=e.slice();return r[16]=t[n],r}function bD(e,t,n){const r=e.slice();return r[19]=t[n],r}function _D(e,t,n){const r=e.slice();return r[22]=t[n],r}function ID(t){let n,r,i,s,o,a,c;return s=new dC({}),{c(){n=D("div"),r=D("button"),r.textContent="Iniciar Sesin",i=P(),_e(s.$$.fragment),M(r,"class","btnLogin svelte-1ujgove"),M(n,"class","contenidoUnlogin svelte-1ujgove")},m(e,l){x(e,n,l),S(n,r),x(e,i,l),Ie(s,e,l),o=!0,a||(c=$(r,"click",t[13]),a=!0)},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){ve(s.$$.fragment,e),o=!1},d(e){e&&A(n),e&&A(i),Te(s,e),a=!1,c()}}}function TD(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,R,L,F,V,U,j,q,B,z,G,K,H,W,Q;t=new gC({props:{mensaje:e[6]}}),i=new EA({props:{usuario:e[0]}});let J=e[5],Y=[];for(let t=0;t<J.length;t+=1)Y[t]=ED(_D(e,J,t));let X=e[2],Z=[];for(let t=0;t<X.length;t+=1)Z[t]=SD(bD(e,X,t));let ee=e[1],te=[];for(let t=0;t<ee.length;t+=1)te[t]=kD(wD(e,ee,t));const ne=e=>ve(te[e],1,1,(()=>{te[e]=null}));let re=e[4]&&CD();return{c(){_e(t.$$.fragment),n=P(),r=D("div"),_e(i.$$.fragment),o=P(),a=D("div"),c=D("h1"),c.textContent="Administrar productos",l=P(),u=D("p"),u.textContent="Filtro de productos",h=P(),d=D("div"),f=D("div"),p=D("div"),m=D("label"),m.textContent="Preference",g=P(),v=D("p"),v.textContent="Categoria:",y=P(),w=D("select"),b=D("option"),b.textContent="Selecciona...";for(let e=0;e<Y.length;e+=1)Y[e].c();_=P(),I=D("div"),T=D("label"),T.textContent="Preference",E=P(),k=D("p"),k.textContent="Subcategoria:",C=P(),R=D("select"),L=D("option"),L.textContent="Selecciona...";for(let e=0;e<Z.length;e+=1)Z[e].c();F=P(),V=D("div"),U=D("button"),U.textContent="Filtrar",j=P(),q=D("button"),q.textContent="Agregar producto",B=P(),z=D("div");for(let e=0;e<te.length;e+=1)te[e].c();G=P(),re&&re.c(),K=O(),M(m,"class","visually-hidden"),M(m,"for","specificSizeSelect"),b.selected=!0,b.__value="",b.value=b.__value,M(w,"class","form-select selectCategoria"),M(w,"id","specificSizeSelect"),M(p,"class","col-sm-3 svelte-1ujgove"),M(T,"class","visually-hidden"),M(T,"for","specificSizeSelect"),L.selected=!0,L.__value="",L.value=L.__value,M(R,"class","form-select selectSubcategoria"),M(R,"id","specificSizeSelect"),M(I,"class","col-sm-3 svelte-1ujgove"),M(U,"id","btnFiltro"),M(U,"class","svelte-1ujgove"),M(V,"class","contenedor_btnFiltro svelte-1ujgove"),M(f,"class","filtro svelte-1ujgove"),M(q,"class","btnLogin svelte-1ujgove"),M(d,"class","filtroAgregar svelte-1ujgove"),M(z,"class","contenedorCards svelte-1ujgove"),M(a,"class","containerComponent svelte-1ujgove"),M(r,"class","containerPerfil svelte-1ujgove")},m(s,A){Ie(t,s,A),x(s,n,A),x(s,r,A),Ie(i,r,null),S(r,o),S(r,a),S(a,c),S(a,l),S(a,u),S(a,h),S(a,d),S(d,f),S(f,p),S(p,m),S(p,g),S(p,v),S(p,y),S(p,w),S(w,b);for(let e=0;e<Y.length;e+=1)Y[e]&&Y[e].m(w,null);S(f,_),S(f,I),S(I,T),S(I,E),S(I,k),S(I,C),S(I,R),S(R,L);for(let e=0;e<Z.length;e+=1)Z[e]&&Z[e].m(R,null);S(f,F),S(f,V),S(V,U),S(d,j),S(d,q),S(a,B),S(a,z);for(let e=0;e<te.length;e+=1)te[e]&&te[e].m(z,null);x(s,G,A),re&&re.m(s,A),x(s,K,A),H=!0,W||(Q=[$(w,"change",e[8]),$(U,"click",e[10]),$(q,"click",e[9])],W=!0)},p(e,n){const r={};64&n&&(r.mensaje=e[6]),t.$set(r);const s={};if(1&n&&(s.usuario=e[0]),i.$set(s),32&n){let t;for(J=e[5],t=0;t<J.length;t+=1){const r=_D(e,J,t);Y[t]?Y[t].p(r,n):(Y[t]=ED(r),Y[t].c(),Y[t].m(w,null))}for(;t<Y.length;t+=1)Y[t].d(1);Y.length=J.length}if(4&n){let t;for(X=e[2],t=0;t<X.length;t+=1){const r=bD(e,X,t);Z[t]?Z[t].p(r,n):(Z[t]=SD(r),Z[t].c(),Z[t].m(R,null))}for(;t<Z.length;t+=1)Z[t].d(1);Z.length=X.length}if(2&n){let t;for(ee=e[1],t=0;t<ee.length;t+=1){const r=wD(e,ee,t);te[t]?(te[t].p(r,n),ge(te[t],1)):(te[t]=kD(r),te[t].c(),ge(te[t],1),te[t].m(z,null))}for(pe(),t=ee.length;t<te.length;t+=1)ne(t);me()}e[4]?re?16&n&&ge(re,1):(re=CD(),re.c(),ge(re,1),re.m(K.parentNode,K)):re&&(pe(),ve(re,1,1,(()=>{re=null})),me())},i(e){if(!H){ge(t.$$.fragment,e),ge(i.$$.fragment,e);for(let e=0;e<ee.length;e+=1)ge(te[e]);ge(re),H=!0}},o(e){ve(t.$$.fragment,e),ve(i.$$.fragment,e),te=te.filter(Boolean);for(let e=0;e<te.length;e+=1)ve(te[e]);ve(re),H=!1},d(e){Te(t,e),e&&A(n),e&&A(r),Te(i),N(Y,e),N(Z,e),N(te,e),e&&A(G),re&&re.d(e),e&&A(K),W=!1,s(Q)}}}function ED(e){let t,n,r,i=e[22].nombre+"";return{c(){t=D("option"),n=R(i),t.__value=r=e[22].valor,t.value=t.__value},m(e,r){x(e,t,r),S(t,n)},p(e,s){32&s&&i!==(i=e[22].nombre+"")&&F(n,i),32&s&&r!==(r=e[22].valor)&&(t.__value=r,t.value=t.__value)},d(e){e&&A(t)}}}function SD(e){let t,n,r,i=e[19].nombre+"";return{c(){t=D("option"),n=R(i),t.__value=r=e[19].valor,t.value=t.__value},m(e,r){x(e,t,r),S(t,n)},p(e,s){4&s&&i!==(i=e[19].nombre+"")&&F(n,i),4&s&&r!==(r=e[19].valor)&&(t.__value=r,t.value=t.__value)},d(e){e&&A(t)}}}function kD(e){let t,n,r,i,s;return n=new oD({props:{producto:e[16]}}),{c(){t=D("div"),_e(n.$$.fragment),r=P(),M(t,"key",i=e[16].id),M(t,"class","card svelte-1ujgove")},m(e,i){x(e,t,i),Ie(n,t,null),S(t,r),s=!0},p(e,r){const o={};2&r&&(o.producto=e[16]),n.$set(o),(!s||2&r&&i!==(i=e[16].id))&&M(t,"key",i)},i(e){s||(ge(n.$$.fragment,e),s=!0)},o(e){ve(n.$$.fragment,e),s=!1},d(e){e&&A(t),Te(n)}}}function CD(e){let t,n;return t=new yD({}),{c(){_e(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},i(e){n||(ge(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Te(t,e)}}}function xD(e){let t,n,r,i;const s=[TD,ID],o=[];function a(e,t){return e[3]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),r=O()},m(e,n){o[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?o[t].p(e,i):(pe(),ve(o[c],1,1,(()=>{o[c]=null})),me(),n=o[t],n?n.p(e,i):(n=o[t]=s[t](e),n.c()),ge(n,1),n.m(r.parentNode,r))},i(e){i||(ge(n),i=!0)},o(e){ve(n),i=!1},d(e){o[t].d(e),e&&A(r)}}}function AD(e,t,n){let r,i,s,o,a,c,l,u,d;h(e,bk,(e=>n(3,s=e))),h(e,Bk,(e=>n(12,o=e))),h(e,vk,(e=>n(15,a=e))),h(e,Ik,(e=>n(4,c=e))),h(e,Jk,(e=>n(5,l=e))),h(e,Dk,(e=>n(6,u=e))),h(e,_k,(e=>n(7,d=e)));let f=[],p=[],m=[];(async()=>{await fk().then((async e=>{n(0,f={...JSON.parse(localStorage.getItem(e)),key:e}),y(bk,s=!0,s),p=await ek("productos"),y(Bk,o=p,o)})).catch((()=>{y(bk,s=!1,s)}))})();return e.$$.update=()=>{4096&e.$$.dirty&&n(1,r=o),2048&e.$$.dirty&&n(2,i=m)},[f,r,i,s,c,l,u,d,e=>{l.forEach((t=>{t.valor===e.target.value?n(11,m=t.contenido):n(2,i=[])})),console.log(m)},()=>{y(Ik,c=!0,c),y(vk,a=!1,a)},()=>{const e=document.querySelector(".selectCategoria"),t=document.querySelector(".selectSubcategoria"),i=e.value,s=t.value;let a=[];""===i?n(1,r=p):(o.forEach((e=>{""!==i&&""!==s?e.categoria===i&&e.sub_categoria===s&&a.push(e):""!==i&&e.categoria===i&&a.push(e)})),y(Bk,o=a,o),n(1,r=o))},m,o,()=>y(_k,d=!0,d)]}class ND extends ke{constructor(e){super(),Se(this,e,AD,xD,a,{})}}function DD(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function RD(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,O,L,V,U,j,q,B,z,G,K,H,W=e[1][0].referencia_pedido+"",Q=e[1][0].nombre_cliente+"",J=e[1][0].documento_cliente+"",Y=e[4](e[1][0].fecha_compra)+"",X=e[5](e[1][0].carrito)+"",Z=e[1][0].carrito,ee=[];for(let t=0;t<Z.length;t+=1)ee[t]=PD(DD(e,Z,t));return{c(){t=D("section"),n=D("div"),r=D("div"),i=D("h5"),o=R("Pedido Nro. "),a=R(W),c=P(),l=D("i"),u=P(),h=D("div"),d=D("div"),f=D("h6"),f.textContent="Informacin cliente",p=P(),m=D("p"),g=D("b"),g.textContent="Nombre del cliente: ",v=R(Q),y=P(),w=D("p"),b=D("b"),b.textContent="Documento del cliente: ",_=R(J),I=P(),T=D("p"),E=D("b"),E.textContent="Fecha de la compra: ",k=R(Y),C=P(),O=D("table"),L=D("thead"),L.innerHTML='<tr><th scope="col">#</th> \n                    <th scope="col">Imgen</th> \n                    <th scope="col">Nombre de producto</th> \n                    <th scope="col">Cantidad</th> \n                    <th scope="col">Vlr. unidad</th> \n                    <th scope="col">Vlr. Final</th></tr>',V=P(),U=D("tbody");for(let e=0;e<ee.length;e+=1)ee[e].c();j=P(),q=D("div"),B=D("h5"),z=R("Total: $"),G=R(X),M(l,"class","bi bi-x-lg icon svelte-l1rtz6"),M(r,"class","titulo svelte-l1rtz6"),M(f,"class","svelte-l1rtz6"),M(d,"class","cuerpo_titulos svelte-l1rtz6"),M(O,"class","table"),M(q,"class","final svelte-l1rtz6"),M(h,"class","cuerpo"),M(n,"class","contenido svelte-l1rtz6"),M(t,"class","containerGeneral svelte-l1rtz6")},m(s,A){x(s,t,A),S(t,n),S(n,r),S(r,i),S(i,o),S(i,a),S(r,c),S(r,l),S(n,u),S(n,h),S(h,d),S(d,f),S(d,p),S(d,m),S(m,g),S(m,v),S(d,y),S(d,w),S(w,b),S(w,_),S(d,I),S(d,T),S(T,E),S(T,k),S(h,C),S(h,O),S(O,L),S(O,V),S(O,U);for(let e=0;e<ee.length;e+=1)ee[e]&&ee[e].m(U,null);S(h,j),S(h,q),S(q,B),S(B,z),S(B,G),K||(H=[$(l,"keypress",e[3]),$(l,"click",e[3])],K=!0)},p(e,t){if(2&t&&W!==(W=e[1][0].referencia_pedido+"")&&F(a,W),2&t&&Q!==(Q=e[1][0].nombre_cliente+"")&&F(v,Q),2&t&&J!==(J=e[1][0].documento_cliente+"")&&F(_,J),2&t&&Y!==(Y=e[4](e[1][0].fecha_compra)+"")&&F(k,Y),6&t){let n;for(Z=e[1][0].carrito,n=0;n<Z.length;n+=1){const r=DD(e,Z,n);ee[n]?ee[n].p(r,t):(ee[n]=PD(r),ee[n].c(),ee[n].m(U,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Z.length}2&t&&X!==(X=e[5](e[1][0].carrito)+"")&&F(G,X)},d(e){e&&A(t),N(ee,e),K=!1,s(H)}}}function PD(e){let t,n,r,i,s,o,a,c,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E=e[9]+1+"",k=e[7].nombre+"",C=e[7].cantidad+"",N=e[7].precio+"",O=e[2].format(parseFloat(e[7].precio.replace(/\./g,""))*parseInt(e[7].cantidad))+"";return{c(){t=D("tr"),n=D("th"),r=R(E),i=P(),s=D("td"),o=D("img"),c=P(),u=D("td"),h=R(k),d=P(),f=D("td"),p=R(C),m=P(),g=D("td"),v=R("$ "),y=R(N),w=P(),b=D("td"),_=R("$ "),I=R(O),T=P(),M(n,"scope","col"),l(o.src,a=e[7].imagen)||M(o,"src",a),M(o,"alt","Imgen producto"),M(o,"class","svelte-l1rtz6"),M(s,"class","tdImagen svelte-l1rtz6")},m(e,a){x(e,t,a),S(t,n),S(n,r),S(t,i),S(t,s),S(s,o),S(t,c),S(t,u),S(u,h),S(t,d),S(t,f),S(f,p),S(t,m),S(t,g),S(g,v),S(g,y),S(t,w),S(t,b),S(b,_),S(b,I),S(t,T)},p(e,t){2&t&&!l(o.src,a=e[7].imagen)&&M(o,"src",a),2&t&&k!==(k=e[7].nombre+"")&&F(h,k),2&t&&C!==(C=e[7].cantidad+"")&&F(p,C),2&t&&N!==(N=e[7].precio+"")&&F(y,N),2&t&&O!==(O=e[2].format(parseFloat(e[7].precio.replace(/\./g,""))*parseInt(e[7].cantidad))+"")&&F(I,O)},d(e){e&&A(t)}}}function OD(t){let n,r=t[0]&&RD(t);return{c(){r&&r.c(),n=O()},m(e,t){r&&r.m(e,t),x(e,n,t)},p(e,[t]){e[0]?r?r.p(e,t):(r=RD(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&A(n)}}}function $D(e,t,n){let r,i;h(e,kk,(e=>n(0,r=e))),h(e,Mk,(e=>n(1,i=e)));const s=new Intl.NumberFormat("es-ES");return[r,i,s,()=>{y(kk,r=!1,r)},function(e){return(e=>{const t=new Date(e);return t.setDate(t.getDate()),t.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})})(new Date(1e3*e.seconds+e.nanoseconds/1e6))},e=>{let t=0,n=0;console.log(e);for(let r=0;r<e.length;r++)n=e[r].cantidad*parseFloat(e[r].precio.replace(/\./g,"")),t+=n,console.log(t);return s.format(t)}]}class LD extends ke{constructor(e){super(),Se(this,e,$D,OD,a,{})}}function MD(e,t,n){const r=e.slice();return r[14]=t[n],r}function FD(e){let t,n,r,i,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,R,O,L,F,U,j;t=new LD({});let q=e[1],B=[];for(let t=0;t<q.length;t+=1)B[t]=VD(MD(e,q,t));return{c(){_e(t.$$.fragment),n=P(),r=D("section"),i=D("div"),i.innerHTML="<h1>Administrar Pedidos</h1>",a=P(),c=D("div"),l=D("div"),u=D("input"),h=P(),d=D("i"),f=P(),p=D("div"),m=D("h5"),m.textContent="Filtrar por",g=P(),v=D("select"),y=D("option"),y.textContent="Selecciona...",w=D("option"),w.textContent="ltimos 30 das",b=D("option"),b.textContent="ltimos 3 meses",_=D("option"),_.textContent="ltimos 6 meses",I=D("option"),I.textContent="2024",T=D("option"),T.textContent="2023",E=P(),k=D("div"),C=D("table"),R=D("thead"),R.innerHTML='<tr><th scope="col" class="svelte-qxwkxu">Id producto</th> \n            <th scope="col" class="svelte-qxwkxu">Referencia interna</th> \n            <th scope="col" class="svelte-qxwkxu">Cliente</th> \n            <th scope="col" class="svelte-qxwkxu">Doc. cliente</th> \n            <th scope="col" class="svelte-qxwkxu">Fecha de compra</th> \n            <th scope="col" class="svelte-qxwkxu">Total</th> \n            <th scope="col" class="svelte-qxwkxu">Descripcin pedido</th> \n            <th scope="col" class="svelte-qxwkxu">Estado</th></tr>',O=P(),L=D("tbody");for(let e=0;e<B.length;e+=1)B[e].c();M(i,"class","containerTitulo svelte-qxwkxu"),M(u,"type","text"),M(u,"placeholder","Burcar por Id de pedido"),M(u,"class","svelte-qxwkxu"),M(d,"class","bi bi-search icon svelte-qxwkxu"),M(l,"class","containerInput"),M(m,"class","svelte-qxwkxu"),y.selected=!0,y.__value="",y.value=y.__value,w.__value="1",w.value=w.__value,b.__value="3",b.value=b.__value,_.__value="6",_.value=_.__value,I.__value="12",I.value=I.__value,T.__value="2023",T.value=T.__value,M(v,"name","selectFecha"),M(v,"id","selectFecha"),M(v,"class","selectTiempo svelte-qxwkxu"),M(p,"class","containerSelect"),M(c,"class","containerFiltro svelte-qxwkxu"),M(L,"class","table-group-divider"),M(C,"class","table svelte-qxwkxu"),M(k,"class","containerTabla svelte-qxwkxu"),M(r,"class","containerPrincipal svelte-qxwkxu")},m(s,A){Ie(t,s,A),x(s,n,A),x(s,r,A),S(r,i),S(r,a),S(r,c),S(c,l),S(l,u),V(u,e[0]),S(l,h),S(l,d),S(c,f),S(c,p),S(p,m),S(p,g),S(p,v),S(v,y),S(v,w),S(v,b),S(v,_),S(v,I),S(v,T),S(r,E),S(r,k),S(k,C),S(C,R),S(C,O),S(C,L);for(let e=0;e<B.length;e+=1)B[e]&&B[e].m(L,null);F=!0,U||(j=[$(u,"input",e[7]),$(d,"keypress",(function(){o(e[4](e[0]))&&e[4](e[0]).apply(this,arguments)})),$(d,"click",(function(){o(e[4](e[0]))&&e[4](e[0]).apply(this,arguments)}))],U=!0)},p(t,n){if(e=t,1&n&&u.value!==e[0]&&V(u,e[0]),42&n){let t;for(q=e[1],t=0;t<q.length;t+=1){const r=MD(e,q,t);B[t]?B[t].p(r,n):(B[t]=VD(r),B[t].c(),B[t].m(L,null))}for(;t<B.length;t+=1)B[t].d(1);B.length=q.length}},i(e){F||(ge(t.$$.fragment,e),F=!0)},o(e){ve(t.$$.fragment,e),F=!1},d(e){Te(t,e),e&&A(n),e&&A(r),N(B,e),U=!1,s(j)}}}function VD(e){let t,n,r,i,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,k,C,N,O,L,V,U,j=e[14].id+"",q=e[14].referencia_pedido+"",B=e[14].nombre_cliente+"",z=e[14].documento_cliente+"",G=e[3](e[14].fecha_compra)+"",K=e[14].nombre_cliente+"";function H(){return e[8](e[14])}function W(){return e[9](e[14])}return{c(){t=D("tr"),n=D("td"),r=R(j),i=P(),o=D("td"),a=R(q),c=P(),l=D("td"),u=R(B),h=P(),d=D("td"),f=R(z),p=P(),m=D("td"),g=R(G),v=P(),y=D("td"),w=R(K),b=P(),_=D("td"),I=D("i"),T=P(),E=D("td"),k=D("select"),C=D("option"),C.textContent="Selecciona...",N=D("option"),N.textContent="Entregado",O=D("option"),O.textContent="Pendiente",L=P(),M(n,"class","svelte-qxwkxu"),M(o,"class","svelte-qxwkxu"),M(l,"class","svelte-qxwkxu"),M(d,"class","svelte-qxwkxu"),M(m,"class","svelte-qxwkxu"),M(y,"class","svelte-qxwkxu"),M(I,"class","bi bi-card-checklist svelte-qxwkxu"),M(_,"class","tdIcon svelte-qxwkxu"),C.selected=!0,C.__value="",C.value=C.__value,N.__value="entregado",N.value=N.__value,O.__value="pendiente",O.value=O.__value,M(k,"name","selectEstado"),M(k,"id","selectEstado"),M(E,"class","svelte-qxwkxu")},m(e,s){x(e,t,s),S(t,n),S(n,r),S(t,i),S(t,o),S(o,a),S(t,c),S(t,l),S(l,u),S(t,h),S(t,d),S(d,f),S(t,p),S(t,m),S(m,g),S(t,v),S(t,y),S(y,w),S(t,b),S(t,_),S(_,I),S(t,T),S(t,E),S(E,k),S(k,C),S(k,N),S(k,O),S(t,L),V||(U=[$(I,"keypress",H),$(I,"click",W)],V=!0)},p(t,n){e=t,2&n&&j!==(j=e[14].id+"")&&F(r,j),2&n&&q!==(q=e[14].referencia_pedido+"")&&F(a,q),2&n&&B!==(B=e[14].nombre_cliente+"")&&F(u,B),2&n&&z!==(z=e[14].documento_cliente+"")&&F(f,z),2&n&&G!==(G=e[3](e[14].fecha_compra)+"")&&F(g,G),2&n&&K!==(K=e[14].nombre_cliente+"")&&F(w,K)},d(e){e&&A(t),V=!1,s(U)}}}function UD(e){let t,n,r=e[2]&&FD(e);return{c(){r&&r.c(),t=O()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[2]?r?(r.p(e,n),4&n&&ge(r,1)):(r=FD(e),r.c(),ge(r,1),r.m(t.parentNode,t)):r&&(pe(),ve(r,1,1,(()=>{r=null})),me())},i(e){n||(ge(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&A(t)}}}function jD(e,t,n){let r,i,s,o,a;h(e,bk,(e=>n(2,i=e))),h(e,jk,(e=>n(6,s=e))),h(e,Mk,(e=>n(11,o=e))),h(e,kk,(e=>n(12,a=e)));let c=[],l="";const u=e=>{y(kk,a=!0,a),y(Mk,o=s.filter((t=>t.id===e)),o),console.log(o)};(async()=>{await fk().then((async e=>{c={...JSON.parse(localStorage.getItem(e)),key:e},"admin"===c.telefono?(y(bk,i=!0,i),y(jk,s=await ek("pedidos"),s)):Ze("/")})).catch((()=>{y(bk,i=!1,i)}))})();return e.$$.update=()=>{64&e.$$.dirty&&n(1,r=s)},[l,r,i,function(e){return(e=>{const t=new Date(e);return t.setDate(t.getDate()),t.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})})(new Date(1e3*e.seconds+e.nanoseconds/1e6))},e=>{const t=s.findIndex((t=>t.id===e));-1!==t?(n(1,r=[s[t]]),console.log(r)):(n(1,r=s),console.log(r))},u,s,function(){l=this.value,n(0,l)},e=>u(e.id),e=>u(e.id)]}class qD extends ke{constructor(e){super(),Se(this,e,jD,UD,a,{})}}function BD(t){let n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,v,y,w,b,_,I,T,E,S,k,C,N,D,R,O,$,L,M,F,V,U;return n=new He({props:{path:"/",component:VC}}),i=new He({props:{path:"/catalogo/:categoria/",component:ex}}),o=new He({props:{path:"/catalogo/",component:ex}}),c=new He({props:{path:"/login",component:ix}}),u=new He({props:{path:"/registro",component:bC}}),d=new He({props:{path:"/producto/:id",component:bx}}),p=new He({props:{path:"/restablecer_contrasena",component:vA}}),g=new He({props:{path:"/carrito",component:rA}}),y=new He({props:{path:"/perfil_usuario/informacion_personal",component:AA}}),b=new He({props:{path:"/perfil_usuario/configuracion",component:$A}}),I=new He({props:{path:"/perfil_usuario/pedidos",component:GN}}),E=new He({props:{path:"/perfil_usuario/metodos_de_pago",component:ZA}}),k=new He({props:{path:"/perfil_usuario/direcciones",component:DN}}),N=new He({props:{path:"/perfil_usuario/devoluciones",component:sN}}),R=new He({props:{path:"/perfil_usuario/lista_de_deseos",component:rD}}),$=new He({props:{path:"/perfil_usuario/administrar_productos",component:ND}}),M=new He({props:{path:"/central_pedidos",component:qD}}),V=new He({props:{path:"*",component:oA}}),{c(){_e(n.$$.fragment),r=P(),_e(i.$$.fragment),s=P(),_e(o.$$.fragment),a=P(),_e(c.$$.fragment),l=P(),_e(u.$$.fragment),h=P(),_e(d.$$.fragment),f=P(),_e(p.$$.fragment),m=P(),_e(g.$$.fragment),v=P(),_e(y.$$.fragment),w=P(),_e(b.$$.fragment),_=P(),_e(I.$$.fragment),T=P(),_e(E.$$.fragment),S=P(),_e(k.$$.fragment),C=P(),_e(N.$$.fragment),D=P(),_e(R.$$.fragment),O=P(),_e($.$$.fragment),L=P(),_e(M.$$.fragment),F=P(),_e(V.$$.fragment)},m(e,t){Ie(n,e,t),x(e,r,t),Ie(i,e,t),x(e,s,t),Ie(o,e,t),x(e,a,t),Ie(c,e,t),x(e,l,t),Ie(u,e,t),x(e,h,t),Ie(d,e,t),x(e,f,t),Ie(p,e,t),x(e,m,t),Ie(g,e,t),x(e,v,t),Ie(y,e,t),x(e,w,t),Ie(b,e,t),x(e,_,t),Ie(I,e,t),x(e,T,t),Ie(E,e,t),x(e,S,t),Ie(k,e,t),x(e,C,t),Ie(N,e,t),x(e,D,t),Ie(R,e,t),x(e,O,t),Ie($,e,t),x(e,L,t),Ie(M,e,t),x(e,F,t),Ie(V,e,t),U=!0},p:e,i(e){U||(ge(n.$$.fragment,e),ge(i.$$.fragment,e),ge(o.$$.fragment,e),ge(c.$$.fragment,e),ge(u.$$.fragment,e),ge(d.$$.fragment,e),ge(p.$$.fragment,e),ge(g.$$.fragment,e),ge(y.$$.fragment,e),ge(b.$$.fragment,e),ge(I.$$.fragment,e),ge(E.$$.fragment,e),ge(k.$$.fragment,e),ge(N.$$.fragment,e),ge(R.$$.fragment,e),ge($.$$.fragment,e),ge(M.$$.fragment,e),ge(V.$$.fragment,e),U=!0)},o(e){ve(n.$$.fragment,e),ve(i.$$.fragment,e),ve(o.$$.fragment,e),ve(c.$$.fragment,e),ve(u.$$.fragment,e),ve(d.$$.fragment,e),ve(p.$$.fragment,e),ve(g.$$.fragment,e),ve(y.$$.fragment,e),ve(b.$$.fragment,e),ve(I.$$.fragment,e),ve(E.$$.fragment,e),ve(k.$$.fragment,e),ve(N.$$.fragment,e),ve(R.$$.fragment,e),ve($.$$.fragment,e),ve(M.$$.fragment,e),ve(V.$$.fragment,e),U=!1},d(e){Te(n,e),e&&A(r),Te(i,e),e&&A(s),Te(o,e),e&&A(a),Te(c,e),e&&A(l),Te(u,e),e&&A(h),Te(d,e),e&&A(f),Te(p,e),e&&A(m),Te(g,e),e&&A(v),Te(y,e),e&&A(w),Te(b,e),e&&A(_),Te(I,e),e&&A(T),Te(E,e),e&&A(S),Te(k,e),e&&A(C),Te(N,e),e&&A(D),Te(R,e),e&&A(O),Te($,e),e&&A(L),Te(M,e),e&&A(F),Te(V,e)}}}function zD(e){let t,n,r,i,s,o;return t=new pA({}),r=new lt({props:{$$slots:{default:[BD]},$$scope:{ctx:e}}}),s=new wA({}),{c(){_e(t.$$.fragment),n=P(),_e(r.$$.fragment),i=P(),_e(s.$$.fragment)},m(e,a){Ie(t,e,a),x(e,n,a),Ie(r,e,a),x(e,i,a),Ie(s,e,a),o=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n)},i(e){o||(ge(t.$$.fragment,e),ge(r.$$.fragment,e),ge(s.$$.fragment,e),o=!0)},o(e){ve(t.$$.fragment,e),ve(r.$$.fragment,e),ve(s.$$.fragment,e),o=!1},d(e){Te(t,e),e&&A(n),Te(r,e),e&&A(i),Te(s,e)}}}return new class extends ke{constructor(e){super(),Se(this,e,null,zD,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
